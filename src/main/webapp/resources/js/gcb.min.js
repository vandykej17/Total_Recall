(function(){var org={},requirejs,require,define;!function(a){function b(a,b){return r.call(a,b)}function c(a,b){var c,d,e,f,g,h,i,j,k,l,m=b&&b.split("/"),n=p.map,o=n&&n["*"]||{};if(a&&"."===a.charAt(0))if(b){for(m=m.slice(0,m.length-1),a=m.concat(a.split("/")),j=0;j<a.length;j+=1)if("."===(l=a[j]))a.splice(j,1),j-=1;else if(".."===l){if(1===j&&(".."===a[2]||".."===a[0]))break;j>0&&(a.splice(j-1,2),j-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((m||o)&&n){for(c=a.split("/"),j=c.length;j>0;j-=1){if(d=c.slice(0,j).join("/"),m)for(k=m.length;k>0;k-=1)if((e=n[m.slice(0,k).join("/")])&&(e=e[d])){f=e,g=j;break}if(f)break;!h&&o&&o[d]&&(h=o[d],i=j)}!f&&h&&(f=h,g=i),f&&(c.splice(0,g,f),a=c.join("/"))}return a}function d(b,c){return function(){return k.apply(a,s.call(arguments,0).concat([b,c]))}}function e(a){return function(b){return c(b,a)}}function f(a){return function(b){n[a]=b}}function g(c){if(b(o,c)){var d=o[c];delete o[c],q[c]=!0,j.apply(a,d)}if(!b(n,c)&&!b(q,c))throw new Error("No "+c);return n[c]}function h(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function i(a){return function(){return p&&p.config&&p.config[a]||{}}}var j,k,l,m,n={},o={},p={},q={},r=Object.prototype.hasOwnProperty,s=[].slice;l=function(a,b){var d,f=h(a),i=f[0];return a=f[1],i&&(i=c(i,b),d=g(i)),i?a=d&&d.normalize?d.normalize(a,e(b)):c(a,b):(a=c(a,b),f=h(a),i=f[0],a=f[1],i&&(d=g(i))),{f:i?i+"!"+a:a,n:a,pr:i,p:d}},m={require:function(a){return d(a)},exports:function(a){var b=n[a];return void 0!==b?b:n[a]={}},module:function(a){return{id:a,uri:"",exports:n[a],config:i(a)}}},j=function(c,e,h,i){var j,k,p,r,s,t,u=[];if(i=i||c,"function"==typeof h){for(e=!e.length&&h.length?["require","exports","module"]:e,s=0;s<e.length;s+=1)if(r=l(e[s],i),"require"===(k=r.f))u[s]=m.require(c);else if("exports"===k)u[s]=m.exports(c),t=!0;else if("module"===k)j=u[s]=m.module(c);else if(b(n,k)||b(o,k)||b(q,k))u[s]=g(k);else{if(!r.p)throw new Error(c+" missing "+k);r.p.load(r.n,d(i,!0),f(k),{}),u[s]=n[k]}p=h.apply(n[c],u),c&&(j&&j.exports!==a&&j.exports!==n[c]?n[c]=j.exports:p===a&&t||(n[c]=p))}else c&&(n[c]=h)},requirejs=require=k=function(b,c,d,e,f){return"string"==typeof b?m[b]?m[b](c):g(l(b,c).f):(b.splice||(p=b,c.splice?(b=c,c=d,d=null):b=a),c=c||function(){},"function"==typeof d&&(d=e,e=f),e?j(a,b,c,d):setTimeout(function(){j(a,b,c,d)},4),k)},k.config=function(a){return p=a,p.deps&&k(p.deps,p.callback),k},define=function(a,c,d){c.splice||(d=c,c=[]),b(n,a)||b(o,a)||(o[a]=[a,c,d])},define.amd={jQuery:!0}}(),define("vendor/almond",function(){}),function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b=!!a&&"length"in a&&a.length,c=na.type(a);return"function"!==c&&!na.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a,b,c){if(na.isFunction(b))return na.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return na.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(xa.test(b))return na.filter(b,a,c);b=na.filter(b,a)}return na.grep(a,function(a){return na.inArray(a,b)>-1!==c})}function e(a,b){do{a=a[b]}while(a&&1!==a.nodeType);return a}function f(a){var b={};return na.each(a.match(Ca)||[],function(a,c){b[c]=!0}),b}function g(){da.addEventListener?(da.removeEventListener("DOMContentLoaded",h),a.removeEventListener("load",h)):(da.detachEvent("onreadystatechange",h),a.detachEvent("onload",h))}function h(){(da.addEventListener||"load"===a.event.type||"complete"===da.readyState)&&(g(),na.ready())}function i(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(Ha,"-$1").toLowerCase();if("string"==typeof(c=a.getAttribute(d))){try{c="true"===c||"false"!==c&&("null"===c?null:+c+""===c?+c:Ga.test(c)?na.parseJSON(c):c)}catch(a){}na.data(a,b,c)}else c=void 0}return c}function j(a){var b;for(b in a)if(("data"!==b||!na.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function k(a,b,c,d){if(Fa(a)){var e,f,g=na.expando,h=a.nodeType,i=h?na.cache:a,j=h?a[g]:a[g]&&g;if(j&&i[j]&&(d||i[j].data)||void 0!==c||"string"!=typeof b)return j||(j=h?a[g]=ca.pop()||na.guid++:g),i[j]||(i[j]=h?{}:{toJSON:na.noop}),"object"!=typeof b&&"function"!=typeof b||(d?i[j]=na.extend(i[j],b):i[j].data=na.extend(i[j].data,b)),f=i[j],d||(f.data||(f.data={}),f=f.data),void 0!==c&&(f[na.camelCase(b)]=c),"string"==typeof b?null==(e=f[b])&&(e=f[na.camelCase(b)]):e=f,e}}function l(a,b,c){if(Fa(a)){var d,e,f=a.nodeType,g=f?na.cache:a,h=f?a[na.expando]:na.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){na.isArray(b)?b=b.concat(na.map(b,na.camelCase)):b in d?b=[b]:(b=na.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;for(;e--;)delete d[b[e]];if(c?!j(d):!na.isEmptyObject(d))return}(c||(delete g[h].data,j(g[h])))&&(f?na.cleanData([a],!0):la.deleteExpando||g!=g.window?delete g[h]:g[h]=void 0)}}}function m(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return na.css(a,b,"")},i=h(),j=c&&c[3]||(na.cssNumber[b]?"":"px"),k=(na.cssNumber[b]||"px"!==j&&+i)&&Ja.exec(na.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do{f=f||".5",k/=f,na.style(a,b,k+j)}while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}function n(a){var b=Ra.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function o(a,b){var c,d,e=0,f=void 0!==a.getElementsByTagName?a.getElementsByTagName(b||"*"):void 0!==a.querySelectorAll?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||na.nodeName(d,b)?f.push(d):na.merge(f,o(d,b));return void 0===b||b&&na.nodeName(a,b)?na.merge([a],f):f}function p(a,b){for(var c,d=0;null!=(c=a[d]);d++)na._data(c,"globalEval",!b||na._data(b[d],"globalEval"))}function q(a){Na.test(a.type)&&(a.defaultChecked=a.checked)}function r(a,b,c,d,e){for(var f,g,h,i,j,k,l,m=a.length,r=n(b),s=[],t=0;t<m;t++)if((g=a[t])||0===g)if("object"===na.type(g))na.merge(s,g.nodeType?[g]:g);else if(Ta.test(g)){for(i=i||r.appendChild(b.createElement("div")),j=(Oa.exec(g)||["",""])[1].toLowerCase(),l=Sa[j]||Sa._default,i.innerHTML=l[1]+na.htmlPrefilter(g)+l[2],f=l[0];f--;)i=i.lastChild;if(!la.leadingWhitespace&&Qa.test(g)&&s.push(b.createTextNode(Qa.exec(g)[0])),!la.tbody)for(g="table"!==j||Ua.test(g)?"<table>"!==l[1]||Ua.test(g)?0:i:i.firstChild,f=g&&g.childNodes.length;f--;)na.nodeName(k=g.childNodes[f],"tbody")&&!k.childNodes.length&&g.removeChild(k);for(na.merge(s,i.childNodes),i.textContent="";i.firstChild;)i.removeChild(i.firstChild);i=r.lastChild}else s.push(b.createTextNode(g));for(i&&r.removeChild(i),la.appendChecked||na.grep(o(s,"input"),q),t=0;g=s[t++];)if(d&&na.inArray(g,d)>-1)e&&e.push(g);else if(h=na.contains(g.ownerDocument,g),i=o(r.appendChild(g),"script"),h&&p(i),c)for(f=0;g=i[f++];)Pa.test(g.type||"")&&c.push(g);return i=null,r}function s(){return!0}function t(){return!1}function u(){try{return da.activeElement}catch(a){}}function v(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)v(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),!1===e)e=t;else if(!e)return a;return 1===f&&(g=e,e=function(a){return na().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=na.guid++)),a.each(function(){na.event.add(this,b,e,d,c)})}function w(a,b){return na.nodeName(a,"table")&&na.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function x(a){return a.type=(null!==na.find.attr(a,"type"))+"/"+a.type,a}function y(a){var b=db.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function z(a,b){if(1===b.nodeType&&na.hasData(a)){var c,d,e,f=na._data(a),g=na._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;d<e;d++)na.event.add(b,c,h[c][d])}g.data&&(g.data=na.extend({},g.data))}}function A(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!la.noCloneEvent&&b[na.expando]){e=na._data(b);for(d in e.events)na.removeEvent(b,d,e.handle);b.removeAttribute(na.expando)}"script"===c&&b.text!==a.text?(x(b).text=a.text,y(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),la.html5Clone&&a.innerHTML&&!na.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Na.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}}function B(a,b,c,d){b=fa.apply([],b);var e,f,g,h,i,j,k=0,l=a.length,m=l-1,n=b[0],p=na.isFunction(n);if(p||l>1&&"string"==typeof n&&!la.checkClone&&cb.test(n))return a.each(function(e){var f=a.eq(e);p&&(b[0]=n.call(this,e,f.html())),B(f,b,c,d)});if(l&&(j=r(b,a[0].ownerDocument,!1,a,d),e=j.firstChild,1===j.childNodes.length&&(j=e),e||d)){for(h=na.map(o(j,"script"),x),g=h.length;k<l;k++)f=j,k!==m&&(f=na.clone(f,!0,!0),g&&na.merge(h,o(f,"script"))),c.call(a[k],f,k);if(g)for(i=h[h.length-1].ownerDocument,na.map(h,y),k=0;k<g;k++)f=h[k],Pa.test(f.type||"")&&!na._data(f,"globalEval")&&na.contains(i,f)&&(f.src?na._evalUrl&&na._evalUrl(f.src):na.globalEval((f.text||f.textContent||f.innerHTML||"").replace(eb,"")));j=e=null}return a}function C(a,b,c){for(var d,e=b?na.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||na.cleanData(o(d)),d.parentNode&&(c&&na.contains(d.ownerDocument,d)&&p(o(d,"script")),d.parentNode.removeChild(d));return a}function D(a,b){var c=na(b.createElement(a)).appendTo(b.body),d=na.css(c[0],"display");return c.detach(),d}function E(a){var b=da,c=ib[a];return c||(c=D(a,b),"none"!==c&&c||(hb=(hb||na("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(hb[0].contentWindow||hb[0].contentDocument).document,b.write(),b.close(),c=D(a,b),hb.detach()),ib[a]=c),c}function F(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function G(a){if(a in xb)return a;for(var b=a.charAt(0).toUpperCase()+a.slice(1),c=wb.length;c--;)if((a=wb[c]+b)in xb)return a}function H(a,b){for(var c,d,e,f=[],g=0,h=a.length;g<h;g++)d=a[g],d.style&&(f[g]=na._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&La(d)&&(f[g]=na._data(d,"olddisplay",E(d.nodeName)))):(e=La(d),(c&&"none"!==c||!e)&&na._data(d,"olddisplay",e?c:na.css(d,"display"))));for(g=0;g<h;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function I(a,b,c){var d=tb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function J(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;f<4;f+=2)"margin"===c&&(g+=na.css(a,c+Ka[f],!0,e)),d?("content"===c&&(g-=na.css(a,"padding"+Ka[f],!0,e)),"margin"!==c&&(g-=na.css(a,"border"+Ka[f]+"Width",!0,e))):(g+=na.css(a,"padding"+Ka[f],!0,e),"padding"!==c&&(g+=na.css(a,"border"+Ka[f]+"Width",!0,e)));return g}function K(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=nb(a),g=la.boxSizing&&"border-box"===na.css(a,"boxSizing",!1,f);if(e<=0||null==e){if(e=ob(a,b,f),(e<0||null==e)&&(e=a.style[b]),kb.test(e))return e;d=g&&(la.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+J(a,b,c||(g?"border":"content"),d,f)+"px"}function L(a,b,c,d,e){return new L.prototype.init(a,b,c,d,e)}function M(){return a.setTimeout(function(){yb=void 0}),yb=na.now()}function N(a,b){var c,d={height:a},e=0;for(b=b?1:0;e<4;e+=2-b)c=Ka[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function O(a,b,c){for(var d,e=(R.tweeners[b]||[]).concat(R.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function P(a,b,c){var d,e,f,g,h,i,j,k=this,l={},m=a.style,n=a.nodeType&&La(a),o=na._data(a,"fxshow");c.queue||(h=na._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,k.always(function(){k.always(function(){h.unqueued--,na.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],j=na.css(a,"display"),"inline"===("none"===j?na._data(a,"olddisplay")||E(a.nodeName):j)&&"none"===na.css(a,"float")&&(la.inlineBlockNeedsLayout&&"inline"!==E(a.nodeName)?m.zoom=1:m.display="inline-block")),c.overflow&&(m.overflow="hidden",la.shrinkWrapBlocks()||k.always(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Ab.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(n?"hide":"show")){if("show"!==e||!o||void 0===o[d])continue;n=!0}l[d]=o&&o[d]||na.style(a,d)}else j=void 0;if(na.isEmptyObject(l))"inline"===("none"===j?E(a.nodeName):j)&&(m.display=j);else{o?"hidden"in o&&(n=o.hidden):o=na._data(a,"fxshow",{}),f&&(o.hidden=!n),n?na(a).show():k.done(function(){na(a).hide()}),k.done(function(){var b;na._removeData(a,"fxshow");for(b in l)na.style(a,b,l[b])});for(d in l)g=O(n?o[d]:0,d,k),d in o||(o[d]=g.start,n&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Q(a,b){var c,d,e,f,g;for(c in a)if(d=na.camelCase(c),e=b[d],f=a[c],na.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),(g=na.cssHooks[d])&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function R(a,b,c){var d,e,f=0,g=R.prefilters.length,h=na.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=yb||M(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:na.extend({},b),opts:na.extend(!0,{specialEasing:{},easing:na.easing._default},c),originalProperties:b,originalOptions:c,startTime:yb||M(),duration:c.duration,tweens:[],createTween:function(b,c){var d=na.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Q(k,j.opts.specialEasing);f<g;f++)if(d=R.prefilters[f].call(j,a,k,j.opts))return na.isFunction(d.stop)&&(na._queueHooks(j.elem,j.opts.queue).stop=na.proxy(d.stop,d)),d;return na.map(k,O,j),na.isFunction(j.opts.start)&&j.opts.start.call(a,j),na.fx.timer(na.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function S(a){return na.attr(a,"class")||""}function T(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(Ca)||[];if(na.isFunction(c))for(;d=f[e++];)"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function U(a,b,c,d){function e(h){var i;return f[h]=!0,na.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Zb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function V(a,b){var c,d,e=na.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&na.extend(!0,a,c),a}function W(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}if(f)return f!==i[0]&&i.unshift(f),c[f]}function X(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(!(g=j[i+" "+f]||j["* "+f]))for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){!0===g?g=j[e]:!0!==j[e]&&(f=h[0],k.unshift(h[1]));break}if(!0!==g)if(g&&a.throws)b=g(b);else try{b=g(b)}catch(a){return{state:"parsererror",error:g?a:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function Y(a){return a.style&&a.style.display||na.css(a,"display")}function Z(a){if(!na.contains(a.ownerDocument||da,a))return!0;for(;a&&1===a.nodeType;){if("none"===Y(a)||"hidden"===a.type)return!0;a=a.parentNode}return!1}function $(a,b,c,d){var e;if(na.isArray(b))na.each(b,function(b,e){c||cc.test(a)?d(a,e):$(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==na.type(b))d(a,b);else for(e in b)$(a+"["+e+"]",b[e],c,d)}function _(){try{return new a.XMLHttpRequest}catch(a){}}function aa(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}function ba(a){return na.isWindow(a)?a:9===a.nodeType&&(a.defaultView||a.parentWindow)}var ca=[],da=a.document,ea=ca.slice,fa=ca.concat,ga=ca.push,ha=ca.indexOf,ia={},ja=ia.toString,ka=ia.hasOwnProperty,la={},ma="1.12.4",na=function(a,b){return new na.fn.init(a,b)},oa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,pa=/^-ms-/,qa=/-([\da-z])/gi,ra=function(a,b){return b.toUpperCase()};na.fn=na.prototype={jquery:ma,constructor:na,selector:"",length:0,toArray:function(){return ea.call(this)},get:function(a){return null!=a?a<0?this[a+this.length]:this[a]:ea.call(this)},pushStack:function(a){var b=na.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return na.each(this,a)},map:function(a){return this.pushStack(na.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(ea.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:ga,sort:ca.sort,splice:ca.splice},na.extend=na.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||na.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(na.isPlainObject(c)||(b=na.isArray(c)))?(b?(b=!1,f=a&&na.isArray(a)?a:[]):f=a&&na.isPlainObject(a)?a:{},g[d]=na.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},na.extend({expando:"jQuery"+(ma+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===na.type(a)},isArray:Array.isArray||function(a){return"array"===na.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){var b=a&&a.toString();return!na.isArray(a)&&b-parseFloat(b)+1>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==na.type(a)||a.nodeType||na.isWindow(a))return!1;try{if(a.constructor&&!ka.call(a,"constructor")&&!ka.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(a){return!1}if(!la.ownFirst)for(b in a)return ka.call(a,b);for(b in a);return void 0===b||ka.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?ia[ja.call(a)]||"object":typeof a},globalEval:function(b){b&&na.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(pa,"ms-").replace(qa,ra)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var d,e=0;if(c(a))for(d=a.length;e<d&&!1!==b.call(a[e],e,a[e]);e++);else for(e in a)if(!1===b.call(a[e],e,a[e]))break;return a},trim:function(a){return null==a?"":(a+"").replace(oa,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?na.merge(d,"string"==typeof a?[a]:a):ga.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if(ha)return ha.call(b,a,c);for(d=b.length,c=c?c<0?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d=[],e=0,f=a.length,g=!c;e<f;e++)!b(a[e],e)!==g&&d.push(a[e]);return d},map:function(a,b,d){var e,f,g=0,h=[];if(c(a))for(e=a.length;g<e;g++)null!=(f=b(a[g],g,d))&&h.push(f);else for(g in a)null!=(f=b(a[g],g,d))&&h.push(f);return fa.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(e=a[b],b=a,a=e),na.isFunction(a))return c=ea.call(arguments,2),d=function(){return a.apply(b||this,c.concat(ea.call(arguments)))},d.guid=a.guid=a.guid||na.guid++,d},now:function(){return+new Date},support:la}),"function"==typeof Symbol&&(na.fn[Symbol.iterator]=ca[Symbol.iterator]),na.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){ia["[object "+b+"]"]=b.toLowerCase()});var sa=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,n,o=b&&b.ownerDocument,p=b?b.nodeType:9;if(c=c||[],"string"!=typeof a||!a||1!==p&&9!==p&&11!==p)return c;if(!d&&((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,I)){if(11!==p&&(j=ra.exec(a)))if(e=j[1]){if(9===p){if(!(g=b.getElementById(e)))return c;if(g.id===e)return c.push(g),c}else if(o&&(g=o.getElementById(e))&&M(b,g)&&g.id===e)return c.push(g),c}else{if(j[2])return $.apply(c,b.getElementsByTagName(a)),c;if((e=j[3])&&v.getElementsByClassName&&b.getElementsByClassName)return $.apply(c,b.getElementsByClassName(e)),c}if(v.qsa&&!T[a+" "]&&(!J||!J.test(a))){if(1!==p)o=b,n=a;else if("object"!==b.nodeName.toLowerCase()){for((h=b.getAttribute("id"))?h=h.replace(ta,"\\$&"):b.setAttribute("id",h=N),l=z(a),f=l.length,i=ma.test(h)?"#"+h:"[id='"+h+"']";f--;)l[f]=i+" "+m(l[f]);n=l.join(","),o=sa.test(a)&&k(b.parentNode)||b}if(n)try{return $.apply(c,o.querySelectorAll(n)),c}catch(a){}finally{h===N&&b.removeAttribute("id")}}}return B(a.replace(ha,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>w.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(a){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=c.length;d--;)w.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||V)-(~a.sourceIndex||V);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&void 0!==a.getElementsByTagName&&a}function l(){}function m(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(j=b[N]||(b[N]={}),i=j[b.uniqueID]||(j[b.uniqueID]={}),(h=i[d])&&h[0]===P&&h[1]===f)return k[2]=h[2];if(i[d]=k,k[2]=a(b,c,g))return!0}}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,c,d){for(var e=0,f=c.length;e<f;e++)b(a,c[e],d);return d}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,r=d||p(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?r:q(r,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=q(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?aa(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=q(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function s(a){for(var b,c,d,e=a.length,f=w.relative[a[0].type],g=f||w.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return aa(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];h<e;h++)if(c=w.relative[a[h].type])k=[n(o(k),c)];else{if(c=w.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;d<e&&!w.relative[a[d].type];d++);return r(h>1&&o(k),h>1&&m(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ha,"$1"),c,h<d&&s(a.slice(h,d)),d<e&&s(a=a.slice(d)),d<e&&m(a))}k.push(c)}return o(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&w.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g===G||g||j);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0,g||k.ownerDocument===G||(F(k),h=!I);m=a[l++];)if(m(k,g||G,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)p[o]||r[o]||(r[o]=Y.call(i));r=q(r)}$.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+1*new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V=1<<31,W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,aa=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},ba="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ca="[\\x20\\t\\r\\n\\f]",da="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ea="\\["+ca+"*("+da+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+da+"))|)"+ca+"*\\]",fa=":("+da+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ea+")*)|.*)\\)|)",ga=new RegExp(ca+"+","g"),ha=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),ia=new RegExp("^"+ca+"*,"+ca+"*"),ja=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),ka=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),la=new RegExp(fa),ma=new RegExp("^"+da+"$"),na={ID:new RegExp("^#("+da+")"),CLASS:new RegExp("^\\.("+da+")"),TAG:new RegExp("^("+da+"|[*])"),ATTR:new RegExp("^"+ea),PSEUDO:new RegExp("^"+fa),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:"+ba+")$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},oa=/^(?:input|select|textarea|button)$/i,pa=/^h\d$/i,qa=/^[^{]+\{\s*\[native \w/,ra=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,sa=/[+~]/,ta=/'|\\/g,ua=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig"),va=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},wa=function(){F()};try{$.apply(X=_.call(O.childNodes),O.childNodes),X[O.childNodes.length].nodeType}catch(a){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}v=b.support={},y=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},F=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:O;return d!==G&&9===d.nodeType&&d.documentElement?(G=d,H=G.documentElement,I=!y(G),(c=G.defaultView)&&c.top!==c&&(c.addEventListener?c.addEventListener("unload",wa,!1):c.attachEvent&&c.attachEvent("onunload",wa)),v.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),v.getElementsByTagName=e(function(a){return a.appendChild(G.createComment("")),!a.getElementsByTagName("*").length}),v.getElementsByClassName=qa.test(G.getElementsByClassName),v.getById=e(function(a){return H.appendChild(a).id=N,!G.getElementsByName||!G.getElementsByName(N).length}),v.getById?(w.find.ID=function(a,b){if(void 0!==b.getElementById&&I){var c=b.getElementById(a);return c?[c]:[]}},w.filter.ID=function(a){var b=a.replace(ua,va);return function(a){return a.getAttribute("id")===b}}):(delete w.find.ID,w.filter.ID=function(a){var b=a.replace(ua,va);return function(a){var c=void 0!==a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),w.find.TAG=v.getElementsByTagName?function(a,b){return void 0!==b.getElementsByTagName?b.getElementsByTagName(a):v.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},w.find.CLASS=v.getElementsByClassName&&function(a,b){if(void 0!==b.getElementsByClassName&&I)return b.getElementsByClassName(a)},K=[],J=[],(v.qsa=qa.test(G.querySelectorAll))&&(e(function(a){H.appendChild(a).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&J.push("[*^$]="+ca+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+ca+"*(?:value|"+ba+")"),a.querySelectorAll("[id~="+N+"-]").length||J.push("~="),a.querySelectorAll(":checked").length||J.push(":checked"),a.querySelectorAll("a#"+N+"+*").length||J.push(".#.+[+~]")}),e(function(a){var b=G.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+ca+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(v.matchesSelector=qa.test(L=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){v.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",fa)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=qa.test(H.compareDocumentPosition),M=b||qa.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c||(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!v.sortDetached&&b.compareDocumentPosition(a)===c?a===G||a.ownerDocument===O&&M(O,a)?-1:b===G||b.ownerDocument===O&&M(O,b)?1:D?aa(D,a)-aa(D,b):0:4&c?-1:1)}:function(a,b){if(a===b)return E=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===G?-1:b===G?1:e?-1:f?1:D?aa(D,a)-aa(D,b):0;if(e===f)return g(a,b);for(c=a;c=c.parentNode;)h.unshift(c);for(c=b;c=c.parentNode;)i.unshift(c);for(;h[d]===i[d];)d++;return d?g(h[d],i[d]):h[d]===O?-1:i[d]===O?1:0},G):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(ka,"='$1']"),v.matchesSelector&&I&&!T[c+" "]&&(!K||!K.test(c))&&(!J||!J.test(c)))try{var d=L.call(a,c);if(d||v.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(a){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=w.attrHandle[b.toLowerCase()],d=c&&W.call(w.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:v.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!v.detectDuplicates,D=!v.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},x=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=x(b);return c},w=b.selectors={cacheLength:50,createPseudo:d,match:na,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ua,va),a[3]=(a[3]||a[4]||a[5]||"").replace(ua,va),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return na.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&la.test(c)&&(b=z(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ua,va).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||void 0!==a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:!c||(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ga," ")+" ").indexOf(d)>-1:"|="===c&&(f===d||f.slice(0,d.length+1)===d+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){for(;p;){for(m=b;m=m[p];)if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(m=q,l=m[N]||(m[N]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===P&&j[1],t=n&&j[2],m=n&&q.childNodes[n];m=++n&&m&&m[p]||(t=n=0)||o.pop();)if(1===m.nodeType&&++t&&m===b){k[a]=[P,n,t];break}}else if(s&&(m=b,l=m[N]||(m[N]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===P&&j[1],t=n),!1===t)for(;(m=++n&&m&&m[p]||(t=n=0)||o.pop())&&((h?m.nodeName.toLowerCase()!==r:1!==m.nodeType)||!++t||(s&&(l=m[N]||(m[N]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[P,t]),m!==b)););return(t-=e)===d||t%d==0&&t/d>=0}}},PSEUDO:function(a,c){var e,f=w.pseudos[a]||w.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],w.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=aa(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=A(a.replace(ha,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(ua,va),function(b){return(b.textContent||b.innerText||x(b)).indexOf(a)>-1}}),lang:d(function(a){return ma.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(ua,va).toLowerCase(),function(b){var c;do{if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return(c=c.toLowerCase())===a||0===c.indexOf(a+"-")}while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!w.pseudos.empty(a)},header:function(a){return pa.test(a.nodeName)},input:function(a){return oa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[c<0?c+b:c]}),even:j(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},w.pseudos.nth=w.pseudos.eq;for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[u]=h(u);for(u in{submit:!0,reset:!0})w.pseudos[u]=i(u);return l.prototype=w.filters=w.pseudos,w.setFilters=new l,z=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=w.preFilter;h;){d&&!(e=ia.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ja.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ha," ")}),h=h.slice(d.length));for(g in w.filter)!(e=na[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)},A=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=z(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d)),f.selector=a}return f},B=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,l=!d&&z(a=j.selector||a);if(c=c||[],1===l.length){if(f=l[0]=l[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&v.getById&&9===b.nodeType&&I&&w.relative[f[1].type]){if(!(b=(w.find.ID(g.matches[0].replace(ua,va),b)||[])[0]))return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=na.needsContext.test(a)?0:f.length;e--&&(g=f[e],!w.relative[h=g.type]);)if((i=w.find[h])&&(d=i(g.matches[0].replace(ua,va),sa.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),!(a=d.length&&m(f)))return $.apply(c,d),c;break}}return(j||A(a,l))(d,b,!I,c,!b||sa.test(a)&&k(b.parentNode)||b),c},v.sortStable=N.split("").sort(U).join("")===N,v.detectDuplicates=!!E,F(),v.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),v.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ba,function(a,b,c){var d;if(!c)return!0===a[b]?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);na.find=sa,na.expr=sa.selectors,na.expr[":"]=na.expr.pseudos,na.uniqueSort=na.unique=sa.uniqueSort,na.text=sa.getText,na.isXMLDoc=sa.isXML,na.contains=sa.contains;var ta=function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&na(a).is(c))break;d.push(a)}return d},ua=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},va=na.expr.match.needsContext,wa=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,xa=/^.[^:#\[\.,]*$/;na.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?na.find.matchesSelector(d,a)?[d]:[]:na.find.matches(a,na.grep(b,function(a){return 1===a.nodeType}))},na.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(na(a).filter(function(){for(b=0;b<e;b++)if(na.contains(d[b],this))return!0}));for(b=0;b<e;b++)na.find(a,d[b],c);return c=this.pushStack(e>1?na.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&va.test(a)?na(a):a||[],!1).length}});var ya,za=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(na.fn.init=function(a,b,c){var d,e;if(!a)return this;if(c=c||ya,"string"==typeof a){if(!(d="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:za.exec(a))||!d[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(d[1]){if(b=b instanceof na?b[0]:b,na.merge(this,na.parseHTML(d[1],b&&b.nodeType?b.ownerDocument||b:da,!0)),wa.test(d[1])&&na.isPlainObject(b))for(d in b)na.isFunction(this[d])?this[d](b[d]):this.attr(d,b[d]);return this}if((e=da.getElementById(d[2]))&&e.parentNode){if(e.id!==d[2])return ya.find(a);this.length=1,this[0]=e}return this.context=da,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):na.isFunction(a)?void 0!==c.ready?c.ready(a):a(na):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),na.makeArray(a,this))}).prototype=na.fn,ya=na(da);var Aa=/^(?:parents|prev(?:Until|All))/,Ba={children:!0,contents:!0,next:!0,prev:!0};na.fn.extend({has:function(a){var b,c=na(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(na.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=va.test(a)||"string"!=typeof a?na(a,b||this.context):0;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&na.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?na.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?na.inArray(this[0],na(a)):na.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(na.uniqueSort(na.merge(this.get(),na(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),na.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ta(a,"parentNode")},parentsUntil:function(a,b,c){return ta(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return ta(a,"nextSibling")},prevAll:function(a){return ta(a,"previousSibling")},nextUntil:function(a,b,c){return ta(a,"nextSibling",c)},prevUntil:function(a,b,c){return ta(a,"previousSibling",c)},siblings:function(a){return ua((a.parentNode||{}).firstChild,a)},children:function(a){return ua(a.firstChild)},contents:function(a){return na.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:na.merge([],a.childNodes)}},function(a,b){na.fn[a]=function(c,d){var e=na.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=na.filter(d,e)),this.length>1&&(Ba[a]||(e=na.uniqueSort(e)),Aa.test(a)&&(e=e.reverse())),this.pushStack(e)}});var Ca=/\S+/g;na.Callbacks=function(a){a="string"==typeof a?f(a):na.extend({},a);var b,c,d,e,g=[],h=[],i=-1,j=function(){for(e=a.once,d=b=!0;h.length;i=-1)for(c=h.shift();++i<g.length;)!1===g[i].apply(c[0],c[1])&&a.stopOnFalse&&(i=g.length,c=!1);a.memory||(c=!1),b=!1,e&&(g=c?[]:"")},k={add:function(){return g&&(c&&!b&&(i=g.length-1,h.push(c)),function b(c){na.each(c,function(c,d){na.isFunction(d)?a.unique&&k.has(d)||g.push(d):d&&d.length&&"string"!==na.type(d)&&b(d)})}(arguments),c&&!b&&j()),this},remove:function(){return na.each(arguments,function(a,b){for(var c;(c=na.inArray(b,g,c))>-1;)g.splice(c,1),c<=i&&i--}),this},has:function(a){return a?na.inArray(a,g)>-1:g.length>0},empty:function(){return g&&(g=[]),this},disable:function(){return e=h=[],g=c="",this},disabled:function(){return!g},lock:function(){return e=!0,c||k.disable(),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],h.push(c),b||j()),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},na.extend({Deferred:function(a){var b=[["resolve","done",na.Callbacks("once memory"),"resolved"],["reject","fail",na.Callbacks("once memory"),"rejected"],["notify","progress",na.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return na.Deferred(function(c){na.each(b,function(b,f){var g=na.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&na.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?na.extend(a,d):d}},e={};return d.pipe=d.then,na.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=ea.call(arguments),g=f.length,h=1!==g||a&&na.isFunction(a.promise)?g:0,i=1===h?a:na.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?ea.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);e<g;e++)f[e]&&na.isFunction(f[e].promise)?f[e].promise().progress(j(e,c,b)).done(j(e,d,f)).fail(i.reject):--h;return h||i.resolveWith(d,f),i.promise()}});var Da;na.fn.ready=function(a){return na.ready.promise().done(a),this},na.extend({isReady:!1,readyWait:1,holdReady:function(a){a?na.readyWait++:na.ready(!0)},ready:function(a){(!0===a?--na.readyWait:na.isReady)||(na.isReady=!0,!0!==a&&--na.readyWait>0||(Da.resolveWith(da,[na]),na.fn.triggerHandler&&(na(da).triggerHandler("ready"),na(da).off("ready"))))}}),na.ready.promise=function(b){if(!Da)if(Da=na.Deferred(),"complete"===da.readyState||"loading"!==da.readyState&&!da.documentElement.doScroll)a.setTimeout(na.ready);else if(da.addEventListener)da.addEventListener("DOMContentLoaded",h),a.addEventListener("load",h);else{da.attachEvent("onreadystatechange",h),a.attachEvent("onload",h);var c=!1;try{c=null==a.frameElement&&da.documentElement}catch(a){}c&&c.doScroll&&function b(){if(!na.isReady){try{c.doScroll("left")}catch(c){return a.setTimeout(b,50)}g(),na.ready()}}()}return Da.promise(b)},na.ready.promise();var Ea;for(Ea in na(la))break;la.ownFirst="0"===Ea,la.inlineBlockNeedsLayout=!1,na(function(){var a,b,c,d;(c=da.getElementsByTagName("body")[0])&&c.style&&(b=da.createElement("div"),d=da.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),void 0!==b.style.zoom&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",la.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=da.createElement("div");la.deleteExpando=!0;try{delete a.test}catch(a){la.deleteExpando=!1}a=null}();var Fa=function(a){var b=na.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return(1===c||9===c)&&(!b||!0!==b&&a.getAttribute("classid")===b)},Ga=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ha=/([A-Z])/g;na.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return!!(a=a.nodeType?na.cache[a[na.expando]]:a[na.expando])&&!j(a)},data:function(a,b,c){return k(a,b,c)},removeData:function(a,b){return l(a,b)},_data:function(a,b,c){return k(a,b,c,!0)},_removeData:function(a,b){return l(a,b,!0)}}),na.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=na.data(f),1===f.nodeType&&!na._data(f,"parsedAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=na.camelCase(d.slice(5)),i(f,d,e[d])));na._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){na.data(this,a)}):arguments.length>1?this.each(function(){na.data(this,a,b)}):f?i(f,a,na.data(f,a)):void 0},removeData:function(a){return this.each(function(){na.removeData(this,a)})}}),na.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=na._data(a,b),c&&(!d||na.isArray(c)?d=na._data(a,b,na.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=na.queue(a,b),d=c.length,e=c.shift(),f=na._queueHooks(a,b),g=function(){na.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return na._data(a,c)||na._data(a,c,{empty:na.Callbacks("once memory").add(function(){na._removeData(a,b+"queue"),na._removeData(a,c)})})}}),na.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?na.queue(this[0],a):void 0===b?this:this.each(function(){var c=na.queue(this,a,b);na._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&na.dequeue(this,a)})},dequeue:function(a){return this.each(function(){na.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=na.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)(c=na._data(f[g],a+"queueHooks"))&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}}),function(){var a;la.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return(c=da.getElementsByTagName("body")[0])&&c.style?(b=da.createElement("div"),d=da.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),void 0!==b.style.zoom&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(da.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var Ia=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ja=new RegExp("^(?:([+-])=|)("+Ia+")([a-z%]*)$","i"),Ka=["Top","Right","Bottom","Left"],La=function(a,b){return a=b||a,"none"===na.css(a,"display")||!na.contains(a.ownerDocument,a)},Ma=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===na.type(c)){e=!0;for(h in c)Ma(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,na.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(na(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Na=/^(?:checkbox|radio)$/i,Oa=/<([\w:-]+)/,Pa=/^$|\/(?:java|ecma)script/i,Qa=/^\s+/,Ra="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";!function(){var a=da.createElement("div"),b=da.createDocumentFragment(),c=da.createElement("input");a.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",la.leadingWhitespace=3===a.firstChild.nodeType,la.tbody=!a.getElementsByTagName("tbody").length,la.htmlSerialize=!!a.getElementsByTagName("link").length,la.html5Clone="<:nav></:nav>"!==da.createElement("nav").cloneNode(!0).outerHTML,c.type="checkbox",c.checked=!0,b.appendChild(c),la.appendChecked=c.checked,a.innerHTML="<textarea>x</textarea>",la.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue,b.appendChild(a),c=da.createElement("input"),c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),a.appendChild(c),la.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,la.noCloneEvent=!!a.addEventListener,a[na.expando]=1,la.attributes=!a.getAttribute(na.expando)}();var Sa={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:la.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};Sa.optgroup=Sa.option,Sa.tbody=Sa.tfoot=Sa.colgroup=Sa.caption=Sa.thead,Sa.th=Sa.td;var Ta=/<|&#?\w+;/,Ua=/<tbody/i;!function(){var b,c,d=da.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(la[b]=c in a)||(d.setAttribute(c,"t"),la[b]=!1===d.attributes[c].expando);d=null}();var Va=/^(?:input|select|textarea)$/i,Wa=/^key/,Xa=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ya=/^(?:focusinfocus|focusoutblur)$/,Za=/^([^.]*)(?:\.(.+)|)/;na.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=na._data(a);if(q){for(c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=na.guid++),(g=q.events)||(g=q.events={}),(k=q.handle)||(k=q.handle=function(a){return void 0===na||a&&na.event.triggered===a.type?void 0:na.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(Ca)||[""],h=b.length;h--;)f=Za.exec(b[h])||[],n=p=f[1],o=(f[2]||"").split(".").sort(),n&&(j=na.event.special[n]||{},n=(e?j.delegateType:j.bindType)||n,j=na.event.special[n]||{},l=na.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&na.expr.match.needsContext.test(e),namespace:o.join(".")},i),(m=g[n])||(m=g[n]=[],m.delegateCount=0,j.setup&&!1!==j.setup.call(a,d,o,k)||(a.addEventListener?a.addEventListener(n,k,!1):a.attachEvent&&a.attachEvent("on"+n,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),na.event.global[n]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=na.hasData(a)&&na._data(a);if(q&&(k=q.events)){for(b=(b||"").match(Ca)||[""],j=b.length;j--;)if(h=Za.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=na.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&!1!==l.teardown.call(a,o,q.handle)||na.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)na.event.remove(a,n+b[j],c,d,!0);na.isEmptyObject(k)&&(delete q.handle,na._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||da],n=ka.call(b,"type")?b.type:b,o=ka.call(b,"namespace")?b.namespace.split("."):[];if(h=k=d=d||da,3!==d.nodeType&&8!==d.nodeType&&!Ya.test(n+na.event.triggered)&&(n.indexOf(".")>-1&&(o=n.split("."),n=o.shift(),o.sort()),g=n.indexOf(":")<0&&"on"+n,b=b[na.expando]?b:new na.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:na.makeArray(c,[b]),j=na.event.special[n]||{},e||!j.trigger||!1!==j.trigger.apply(d,c))){if(!e&&!j.noBubble&&!na.isWindow(d)){for(i=j.delegateType||n,Ya.test(i+n)||(h=h.parentNode);h;h=h.parentNode)m.push(h),k=h;k===(d.ownerDocument||da)&&m.push(k.defaultView||k.parentWindow||a)}for(l=0;(h=m[l++])&&!b.isPropagationStopped();)b.type=l>1?i:j.bindType||n,f=(na._data(h,"events")||{})[b.type]&&na._data(h,"handle"),f&&f.apply(h,c),(f=g&&h[g])&&f.apply&&Fa(h)&&(b.result=f.apply(h,c),!1===b.result&&b.preventDefault());if(b.type=n,!e&&!b.isDefaultPrevented()&&(!j._default||!1===j._default.apply(m.pop(),c))&&Fa(d)&&g&&d[n]&&!na.isWindow(d)){k=d[g],k&&(d[g]=null),na.event.triggered=n;try{d[n]()}catch(a){}na.event.triggered=void 0,k&&(d[g]=k)}return b.result}},dispatch:function(a){a=na.event.fix(a);var b,c,d,e,f,g=[],h=ea.call(arguments),i=(na._data(this,"events")||{})[a.type]||[],j=na.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||!1!==j.preDispatch.call(this,a)){for(g=na.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(f.namespace)||(a.handleObj=f,a.data=f.data,void 0!==(d=((na.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,h))&&!1===(a.result=d)&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(!0!==i.disabled||"click"!==a.type)){for(d=[],c=0;c<h;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?na(e,this).index(i)>-1:na.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[na.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Xa.test(e)?this.mouseHooks:Wa.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new na.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||da),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||da,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==u()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){if(this===u()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(na.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(a){return na.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c){var d=na.extend(new na.Event,c,{type:a,isSimulated:!0});na.event.trigger(d,null,b),d.isDefaultPrevented()&&c.preventDefault()}},na.removeEvent=da.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)}:function(a,b,c){var d="on"+b;a.detachEvent&&(void 0===a[d]&&(a[d]=null),a.detachEvent(d,c))},na.Event=function(a,b){if(!(this instanceof na.Event))return new na.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?s:t):this.type=a,b&&na.extend(this,b),this.timeStamp=a&&a.timeStamp||na.now(),this[na.expando]=!0},na.Event.prototype={constructor:na.Event,isDefaultPrevented:t,isPropagationStopped:t,isImmediatePropagationStopped:t,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=s,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=s,a&&!this.isSimulated&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=s,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},na.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){na.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||na.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),la.submit||(na.event.special.submit={setup:function(){if(na.nodeName(this,"form"))return!1;na.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=na.nodeName(b,"input")||na.nodeName(b,"button")?na.prop(b,"form"):void 0;c&&!na._data(c,"submit")&&(na.event.add(c,"submit._submit",function(a){a._submitBubble=!0}),na._data(c,"submit",!0))})},postDispatch:function(a){a._submitBubble&&(delete a._submitBubble,this.parentNode&&!a.isTrigger&&na.event.simulate("submit",this.parentNode,a))},teardown:function(){if(na.nodeName(this,"form"))return!1;na.event.remove(this,"._submit")}}),la.change||(na.event.special.change={setup:function(){if(Va.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(na.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._justChanged=!0)}),na.event.add(this,"click._change",function(a){this._justChanged&&!a.isTrigger&&(this._justChanged=!1),na.event.simulate("change",this,a)})),!1;na.event.add(this,"beforeactivate._change",function(a){var b=a.target;Va.test(b.nodeName)&&!na._data(b,"change")&&(na.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||na.event.simulate("change",this.parentNode,a)}),na._data(b,"change",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){return na.event.remove(this,"._change"),!Va.test(this.nodeName)}}),la.focusin||na.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){na.event.simulate(b,a.target,na.event.fix(a))};na.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=na._data(d,b);e||d.addEventListener(a,c,!0),na._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=na._data(d,b)-1;e?na._data(d,b,e):(d.removeEventListener(a,c,!0),na._removeData(d,b))}}}),na.fn.extend({on:function(a,b,c,d){return v(this,a,b,c,d)},one:function(a,b,c,d){return v(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,na(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return!1!==b&&"function"!=typeof b||(c=b,b=void 0),!1===c&&(c=t),this.each(function(){na.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){na.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return na.event.trigger(a,b,c,!0)}});var $a=/ jQuery\d+="(?:null|\d+)"/g,_a=new RegExp("<(?:"+Ra+")[\\s/>]","i"),ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,bb=/<script|<style|<link/i,cb=/checked\s*(?:[^=]|=\s*.checked.)/i,db=/^true\/(.*)/,eb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,fb=n(da),gb=fb.appendChild(da.createElement("div"));na.extend({htmlPrefilter:function(a){return a.replace(ab,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h,i=na.contains(a.ownerDocument,a);if(la.html5Clone||na.isXMLDoc(a)||!_a.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(gb.innerHTML=a.outerHTML,gb.removeChild(f=gb.firstChild)),!(la.noCloneEvent&&la.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||na.isXMLDoc(a)))for(d=o(f),h=o(a),g=0;null!=(e=h[g]);++g)d[g]&&A(e,d[g]);if(b)if(c)for(h=h||o(a),d=d||o(f),g=0;null!=(e=h[g]);g++)z(e,d[g]);else z(a,f);return d=o(f,"script"),d.length>0&&p(d,!i&&o(a,"script")),d=h=e=null,f},cleanData:function(a,b){for(var c,d,e,f,g=0,h=na.expando,i=na.cache,j=la.attributes,k=na.event.special;null!=(c=a[g]);g++)if((b||Fa(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?na.event.remove(c,d):na.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j||void 0===c.removeAttribute?c[h]=void 0:c.removeAttribute(h),ca.push(e))}}}),na.fn.extend({domManip:B,detach:function(a){return C(this,a,!0)},remove:function(a){return C(this,a)},text:function(a){return Ma(this,function(a){return void 0===a?na.text(this):this.empty().append((this[0]&&this[0].ownerDocument||da).createTextNode(a))},null,a,arguments.length)},append:function(){return B(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){w(this,a).appendChild(a)}})},prepend:function(){return B(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=w(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return B(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return B(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&na.cleanData(o(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&na.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return na.clone(this,a,b)})},html:function(a){return Ma(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace($a,""):void 0;if("string"==typeof a&&!bb.test(a)&&(la.htmlSerialize||!_a.test(a))&&(la.leadingWhitespace||!Qa.test(a))&&!Sa[(Oa.exec(a)||["",""])[1].toLowerCase()]){a=na.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(na.cleanData(o(b,!1)),b.innerHTML=a);b=0}catch(a){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return B(this,arguments,function(b){var c=this.parentNode;na.inArray(this,a)<0&&(na.cleanData(o(this)),c&&c.replaceChild(b,this))},a)}}),na.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){na.fn[a]=function(a){for(var c,d=0,e=[],f=na(a),g=f.length-1;d<=g;d++)c=d===g?this:this.clone(!0),na(f[d])[b](c),ga.apply(e,c.get());return this.pushStack(e)}});var hb,ib={HTML:"block",BODY:"block"},jb=/^margin/,kb=new RegExp("^("+Ia+")(?!px)[a-z%]+$","i"),lb=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},mb=da.documentElement;!function(){function b(){var b,k,l=da.documentElement;l.appendChild(i),j.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",c=e=h=!1,d=g=!0,a.getComputedStyle&&(k=a.getComputedStyle(j),c="1%"!==(k||{}).top,h="2px"===(k||{}).marginLeft,e="4px"===(k||{width:"4px"}).width,j.style.marginRight="50%",d="4px"===(k||{marginRight:"4px"}).marginRight,b=j.appendChild(da.createElement("div")),b.style.cssText=j.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",b.style.marginRight=b.style.width="0",j.style.width="1px",g=!parseFloat((a.getComputedStyle(b)||{}).marginRight),j.removeChild(b)),j.style.display="none",f=0===j.getClientRects().length,f&&(j.style.display="",j.innerHTML="<table><tr><td></td><td>t</td></tr></table>",j.childNodes[0].style.borderCollapse="separate",b=j.getElementsByTagName("td"),b[0].style.cssText="margin:0;border:0;padding:0;display:none",(f=0===b[0].offsetHeight)&&(b[0].style.display="",b[1].style.display="none",f=0===b[0].offsetHeight)),l.removeChild(i)}var c,d,e,f,g,h,i=da.createElement("div"),j=da.createElement("div");j.style&&(j.style.cssText="float:left;opacity:.5",la.opacity="0.5"===j.style.opacity,la.cssFloat=!!j.style.cssFloat,j.style.backgroundClip="content-box",j.cloneNode(!0).style.backgroundClip="",la.clearCloneStyle="content-box"===j.style.backgroundClip,i=da.createElement("div"),i.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",j.innerHTML="",i.appendChild(j),la.boxSizing=""===j.style.boxSizing||""===j.style.MozBoxSizing||""===j.style.WebkitBoxSizing,na.extend(la,{reliableHiddenOffsets:function(){return null==c&&b(),f},boxSizingReliable:function(){return null==c&&b(),e},pixelMarginRight:function(){return null==c&&b(),d},pixelPosition:function(){return null==c&&b(),c},reliableMarginRight:function(){return null==c&&b(),g},reliableMarginLeft:function(){return null==c&&b(),h}}))}();var nb,ob,pb=/^(top|right|bottom|left)$/;a.getComputedStyle?(nb=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)},ob=function(a,b,c){var d,e,f,g,h=a.style;return c=c||nb(a),g=c?c.getPropertyValue(b)||c[b]:void 0,""!==g&&void 0!==g||na.contains(a.ownerDocument,a)||(g=na.style(a,b)),c&&!la.pixelMarginRight()&&kb.test(g)&&jb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f),void 0===g?g:g+""}):mb.currentStyle&&(nb=function(a){return a.currentStyle},ob=function(a,b,c){var d,e,f,g,h=a.style;return c=c||nb(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),kb.test(g)&&!pb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});var qb=/alpha\([^)]*\)/i,rb=/opacity\s*=\s*([^)]*)/i,sb=/^(none|table(?!-c[ea]).+)/,tb=new RegExp("^("+Ia+")(.*)$","i"),ub={position:"absolute",visibility:"hidden",display:"block"},vb={letterSpacing:"0",fontWeight:"400"},wb=["Webkit","O","Moz","ms"],xb=da.createElement("div").style;na.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=ob(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:la.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=na.camelCase(b),i=a.style;if(b=na.cssProps[h]||(na.cssProps[h]=G(h)||h),g=na.cssHooks[b]||na.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=Ja.exec(c))&&e[1]&&(c=m(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(na.cssNumber[h]?"":"px")),la.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(a){}}},css:function(a,b,c,d){var e,f,g,h=na.camelCase(b);return b=na.cssProps[h]||(na.cssProps[h]=G(h)||h),g=na.cssHooks[b]||na.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=ob(a,b,d)),"normal"===f&&b in vb&&(f=vb[b]),""===c||c?(e=parseFloat(f),!0===c||isFinite(e)?e||0:f):f}}),na.each(["height","width"],function(a,b){na.cssHooks[b]={get:function(a,c,d){if(c)return sb.test(na.css(a,"display"))&&0===a.offsetWidth?lb(a,ub,function(){return K(a,b,d)}):K(a,b,d)},set:function(a,c,d){var e=d&&nb(a);return I(a,c,d?J(a,b,d,la.boxSizing&&"border-box"===na.css(a,"boxSizing",!1,e),e):0)}}}),la.opacity||(na.cssHooks.opacity={get:function(a,b){return rb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=na.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===na.trim(f.replace(qb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=qb.test(f)?f.replace(qb,e):f+" "+e)}}),na.cssHooks.marginRight=F(la.reliableMarginRight,function(a,b){if(b)return lb(a,{display:"inline-block"},ob,[a,"marginRight"])}),na.cssHooks.marginLeft=F(la.reliableMarginLeft,function(a,b){if(b)return(parseFloat(ob(a,"marginLeft"))||(na.contains(a.ownerDocument,a)?a.getBoundingClientRect().left-lb(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}):0))+"px"}),na.each({margin:"",padding:"",border:"Width"},function(a,b){na.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+Ka[d]+b]=f[d]||f[d-2]||f[0];return e}},jb.test(a)||(na.cssHooks[a+b].set=I)}),na.fn.extend({css:function(a,b){return Ma(this,function(a,b,c){var d,e,f={},g=0;if(na.isArray(b)){for(d=nb(a),e=b.length;g<e;g++)f[b[g]]=na.css(a,b[g],!1,d);return f}return void 0!==c?na.style(a,b,c):na.css(a,b)},a,b,arguments.length>1)},show:function(){return H(this,!0)},hide:function(){return H(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){La(this)?na(this).show():na(this).hide()})}}),na.Tween=L,L.prototype={constructor:L,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||na.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(na.cssNumber[c]?"":"px")},cur:function(){var a=L.propHooks[this.prop];return a&&a.get?a.get(this):L.propHooks._default.get(this)},run:function(a){var b,c=L.propHooks[this.prop];return this.options.duration?this.pos=b=na.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):L.propHooks._default.set(this),this}},L.prototype.init.prototype=L.prototype,L.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=na.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){na.fx.step[a.prop]?na.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[na.cssProps[a.prop]]&&!na.cssHooks[a.prop]?a.elem[a.prop]=a.now:na.style(a.elem,a.prop,a.now+a.unit)}}},L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},na.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},na.fx=L.prototype.init,na.fx.step={};var yb,zb,Ab=/^(?:toggle|show|hide)$/,Bb=/queueHooks$/;na.Animation=na.extend(R,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return m(c.elem,a,Ja.exec(b),c),c}]},tweener:function(a,b){na.isFunction(a)?(b=a,a=["*"]):a=a.match(Ca);for(var c,d=0,e=a.length;d<e;d++)c=a[d],R.tweeners[c]=R.tweeners[c]||[],R.tweeners[c].unshift(b)},prefilters:[P],prefilter:function(a,b){b?R.prefilters.unshift(a):R.prefilters.push(a)}}),na.speed=function(a,b,c){var d=a&&"object"==typeof a?na.extend({},a):{complete:c||!c&&b||na.isFunction(a)&&a,duration:a,easing:c&&b||b&&!na.isFunction(b)&&b};return d.duration=na.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in na.fx.speeds?na.fx.speeds[d.duration]:na.fx.speeds._default,null!=d.queue&&!0!==d.queue||(d.queue="fx"),d.old=d.complete,d.complete=function(){na.isFunction(d.old)&&d.old.call(this),d.queue&&na.dequeue(this,d.queue)},d},na.fn.extend({fadeTo:function(a,b,c,d){return this.filter(La).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=na.isEmptyObject(a),f=na.speed(b,c,d),g=function(){var b=R(this,na.extend({},a),f);(e||na._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||!1===f.queue?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=na.timers,g=na._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Bb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||na.dequeue(this,a)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var b,c=na._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=na.timers,g=d?d.length:0;for(c.finish=!0,na.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),na.each(["toggle","show","hide"],function(a,b){var c=na.fn[b];na.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(N(b,!0),a,d,e)}}),na.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){na.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),na.timers=[],na.fx.tick=function(){var a,b=na.timers,c=0;for(yb=na.now();c<b.length;c++)(a=b[c])()||b[c]!==a||b.splice(c--,1);b.length||na.fx.stop(),yb=void 0},na.fx.timer=function(a){na.timers.push(a),a()?na.fx.start():na.timers.pop()},na.fx.interval=13,na.fx.start=function(){zb||(zb=a.setInterval(na.fx.tick,na.fx.interval))},na.fx.stop=function(){a.clearInterval(zb),zb=null},na.fx.speeds={slow:600,fast:200,_default:400},na.fn.delay=function(b,c){return b=na.fx?na.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a,b=da.createElement("input"),c=da.createElement("div"),d=da.createElement("select"),e=d.appendChild(da.createElement("option"));c=da.createElement("div"),c.setAttribute("className","t"),c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=c.getElementsByTagName("a")[0],b.setAttribute("type","checkbox"),c.appendChild(b),a=c.getElementsByTagName("a")[0],a.style.cssText="top:1px",la.getSetAttribute="t"!==c.className,la.style=/top/.test(a.getAttribute("style")),la.hrefNormalized="/a"===a.getAttribute("href"),la.checkOn=!!b.value,la.optSelected=e.selected,la.enctype=!!da.createElement("form").enctype,d.disabled=!0,la.optDisabled=!e.disabled,b=da.createElement("input"),b.setAttribute("value",""),la.input=""===b.getAttribute("value"),b.value="t",b.setAttribute("type","radio"),la.radioValue="t"===b.value}();var Cb=/\r/g,Db=/[\x20\t\r\n\f]+/g;na.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=na.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,na(this).val()):a,null==e?e="":"number"==typeof e?e+="":na.isArray(e)&&(e=na.map(e,function(a){return null==a?"":a+""})),(b=na.valHooks[this.type]||na.valHooks[this.nodeName.toLowerCase()])&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return(b=na.valHooks[e.type]||na.valHooks[e.nodeName.toLowerCase()])&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(Cb,""):null==c?"":c)}}}),na.extend({valHooks:{option:{get:function(a){var b=na.find.attr(a,"value");return null!=b?b:na.trim(na.text(a)).replace(Db," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||e<0,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;i<h;i++)if(c=d[i],(c.selected||i===e)&&(la.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!na.nodeName(c.parentNode,"optgroup"))){if(b=na(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=na.makeArray(b),g=e.length;g--;)if(d=e[g],na.inArray(na.valHooks.option.get(d),f)>-1)try{d.selected=c=!0}catch(a){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),na.each(["radio","checkbox"],function(){na.valHooks[this]={set:function(a,b){if(na.isArray(b))return a.checked=na.inArray(na(a).val(),b)>-1}},la.checkOn||(na.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var Eb,Fb,Gb=na.expr.attrHandle,Hb=/^(?:checked|selected)$/i,Ib=la.getSetAttribute,Jb=la.input;na.fn.extend({attr:function(a,b){return Ma(this,na.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){na.removeAttr(this,a)})}}),na.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return void 0===a.getAttribute?na.prop(a,b,c):(1===f&&na.isXMLDoc(a)||(b=b.toLowerCase(),e=na.attrHooks[b]||(na.expr.match.bool.test(b)?Fb:Eb)),void 0!==c?null===c?void na.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=na.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!la.radioValue&&"radio"===b&&na.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(Ca);if(f&&1===a.nodeType)for(;c=f[e++];)d=na.propFix[c]||c,na.expr.match.bool.test(c)?Jb&&Ib||!Hb.test(c)?a[d]=!1:a[na.camelCase("default-"+c)]=a[d]=!1:na.attr(a,c,""),a.removeAttribute(Ib?c:d)}}),Fb={set:function(a,b,c){return!1===b?na.removeAttr(a,c):Jb&&Ib||!Hb.test(c)?a.setAttribute(!Ib&&na.propFix[c]||c,c):a[na.camelCase("default-"+c)]=a[c]=!0,c}},na.each(na.expr.match.bool.source.match(/\w+/g),function(a,b){var c=Gb[b]||na.find.attr;Jb&&Ib||!Hb.test(b)?Gb[b]=function(a,b,d){var e,f;return d||(f=Gb[b],Gb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,Gb[b]=f),e}:Gb[b]=function(a,b,c){if(!c)return a[na.camelCase("default-"+b)]?b.toLowerCase():null}}),Jb&&Ib||(na.attrHooks.value={set:function(a,b,c){if(!na.nodeName(a,"input"))return Eb&&Eb.set(a,b,c);a.defaultValue=b}}),Ib||(Eb={set:function(a,b,c){var d=a.getAttributeNode(c);if(d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c))return b}},Gb.id=Gb.name=Gb.coords=function(a,b,c){var d;if(!c)return(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},na.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);if(c&&c.specified)return c.value},set:Eb.set},na.attrHooks.contenteditable={set:function(a,b,c){Eb.set(a,""!==b&&b,c)}},na.each(["width","height"],function(a,b){na.attrHooks[b]={set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}}})),la.style||(na.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var Kb=/^(?:input|select|textarea|button|object)$/i,Lb=/^(?:a|area)$/i;na.fn.extend({prop:function(a,b){return Ma(this,na.prop,a,b,arguments.length>1)},removeProp:function(a){return a=na.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(a){}})}}),na.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&na.isXMLDoc(a)||(b=na.propFix[b]||b,e=na.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=na.find.attr(a,"tabindex");return b?parseInt(b,10):Kb.test(a.nodeName)||Lb.test(a.nodeName)&&a.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),la.hrefNormalized||na.each(["href","src"],function(a,b){na.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),la.optSelected||(na.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),na.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){na.propFix[this.toLowerCase()]=this}),la.enctype||(na.propFix.enctype="encoding");var Mb=/[\t\r\n\f]/g;na.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(na.isFunction(a))return this.each(function(b){na(this).addClass(a.call(this,b,S(this)))});if("string"==typeof a&&a)for(b=a.match(Ca)||[];c=this[i++];)if(e=S(c),d=1===c.nodeType&&(" "+e+" ").replace(Mb," ")){for(g=0;f=b[g++];)d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=na.trim(d),e!==h&&na.attr(c,"class",h)}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(na.isFunction(a))return this.each(function(b){na(this).removeClass(a.call(this,b,S(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a)for(b=a.match(Ca)||[];c=this[i++];)if(e=S(c),d=1===c.nodeType&&(" "+e+" ").replace(Mb," ")){for(g=0;f=b[g++];)for(;d.indexOf(" "+f+" ")>-1;)d=d.replace(" "+f+" "," ");h=na.trim(d),e!==h&&na.attr(c,"class",h)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):na.isFunction(a)?this.each(function(c){na(this).toggleClass(a.call(this,c,S(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c)for(d=0,e=na(this),f=a.match(Ca)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else void 0!==a&&"boolean"!==c||(b=S(this),b&&na._data(this,"__className__",b),na.attr(this,"class",b||!1===a?"":na._data(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;for(b=" "+a+" ";c=this[d++];)if(1===c.nodeType&&(" "+S(c)+" ").replace(Mb," ").indexOf(b)>-1)return!0;return!1}}),na.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){na.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),na.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var Nb=a.location,Ob=na.now(),Pb=/\?/,Qb=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;na.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=na.trim(b+"");return e&&!na.trim(e.replace(Qb,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():na.error("Invalid JSON: "+b)},na.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new a.DOMParser,c=d.parseFromString(b,"text/xml")):(c=new a.ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(a){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||na.error("Invalid XML: "+b),c};var Rb=/#.*$/,Sb=/([?&])_=[^&]*/,Tb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ub=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Vb=/^(?:GET|HEAD)$/,Wb=/^\/\//,Xb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Yb={},Zb={},$b="*/".concat("*"),_b=Nb.href,ac=Xb.exec(_b.toLowerCase())||[];na.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_b,type:"GET",isLocal:Ub.test(ac[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$b,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":na.parseJSON,"text xml":na.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?V(V(a,na.ajaxSettings),b):V(na.ajaxSettings,a)},ajaxPrefilter:T(Yb),ajaxTransport:T(Zb),ajax:function(b,c){function d(b,c,d,e){var f,l,s,t,v,x=c;2!==u&&(u=2,i&&a.clearTimeout(i),k=void 0,h=e||"",w.readyState=b>0?4:0,f=b>=200&&b<300||304===b,d&&(t=W(m,w,d)),t=X(m,t,w,f),f?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&(na.lastModified[g]=v),(v=w.getResponseHeader("etag"))&&(na.etag[g]=v)),204===b||"HEAD"===m.type?x="nocontent":304===b?x="notmodified":(x=t.state,l=t.data,s=t.error,f=!s)):(s=x,!b&&x||(x="error",b<0&&(b=0))),w.status=b,w.statusText=(c||x)+"",f?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=void 0,j&&o.trigger(f?"ajaxSuccess":"ajaxError",[w,m,f?l:s]),q.fireWith(n,[w,x]),j&&(o.trigger("ajaxComplete",[w,m]),--na.active||na.event.trigger("ajaxStop")))}"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m=na.ajaxSetup({},c),n=m.context||m,o=m.context&&(n.nodeType||n.jquery)?na(n):na.event,p=na.Deferred(),q=na.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!l)for(l={};b=Tb.exec(h);)l[b[1].toLowerCase()]=b[2];b=l[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?h:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(u<2)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return k&&k.abort(b),d(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,m.url=((b||m.url||_b)+"").replace(Rb,"").replace(Wb,ac[1]+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=na.trim(m.dataType||"*").toLowerCase().match(Ca)||[""],null==m.crossDomain&&(e=Xb.exec(m.url.toLowerCase()),m.crossDomain=!(!e||e[1]===ac[1]&&e[2]===ac[2]&&(e[3]||("http:"===e[1]?"80":"443"))===(ac[3]||("http:"===ac[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=na.param(m.data,m.traditional)),U(Yb,m,c,w),2===u)return w;j=na.event&&m.global,j&&0==na.active++&&na.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Vb.test(m.type),g=m.url,m.hasContent||(m.data&&(g=m.url+=(Pb.test(g)?"&":"?")+m.data,delete m.data),!1===m.cache&&(m.url=Sb.test(g)?g.replace(Sb,"$1_="+Ob++):g+(Pb.test(g)?"&":"?")+"_="+Ob++)),m.ifModified&&(na.lastModified[g]&&w.setRequestHeader("If-Modified-Since",na.lastModified[g]),na.etag[g]&&w.setRequestHeader("If-None-Match",na.etag[g])),(m.data&&m.hasContent&&!1!==m.contentType||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+$b+"; q=0.01":""):m.accepts["*"]);for(f in m.headers)w.setRequestHeader(f,m.headers[f]);if(m.beforeSend&&(!1===m.beforeSend.call(n,w,m)||2===u))return w.abort();v="abort";for(f in{success:1,error:1,complete:1})w[f](m[f]);if(k=U(Zb,m,c,w)){if(w.readyState=1,j&&o.trigger("ajaxSend",[w,m]),2===u)return w;m.async&&m.timeout>0&&(i=a.setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,k.send(s,d)}catch(a){if(!(u<2))throw a;d(-1,a)}}else d(-1,"No Transport");return w},getJSON:function(a,b,c){return na.get(a,b,c,"json")},getScript:function(a,b){return na.get(a,void 0,b,"script")}}),na.each(["get","post"],function(a,b){na[b]=function(a,c,d,e){return na.isFunction(c)&&(e=e||d,d=c,c=void 0),na.ajax(na.extend({url:a,type:b,dataType:e,data:c,success:d},na.isPlainObject(a)&&a))}}),na._evalUrl=function(a){return na.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},na.fn.extend({wrapAll:function(a){if(na.isFunction(a))return this.each(function(b){na(this).wrapAll(a.call(this,b))});if(this[0]){var b=na(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return na.isFunction(a)?this.each(function(b){na(this).wrapInner(a.call(this,b))}):this.each(function(){var b=na(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=na.isFunction(a);return this.each(function(c){na(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){na.nodeName(this,"body")||na(this).replaceWith(this.childNodes)}).end()}}),na.expr.filters.hidden=function(a){return la.reliableHiddenOffsets()?a.offsetWidth<=0&&a.offsetHeight<=0&&!a.getClientRects().length:Z(a)},na.expr.filters.visible=function(a){return!na.expr.filters.hidden(a)};var bc=/%20/g,cc=/\[\]$/,dc=/\r?\n/g,ec=/^(?:submit|button|image|reset|file)$/i,fc=/^(?:input|select|textarea|keygen)/i;na.param=function(a,b){var c,d=[],e=function(a,b){b=na.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=na.ajaxSettings&&na.ajaxSettings.traditional),na.isArray(a)||a.jquery&&!na.isPlainObject(a))na.each(a,function(){e(this.name,this.value)});else for(c in a)$(c,a[c],b,e);return d.join("&").replace(bc,"+")},na.fn.extend({serialize:function(){return na.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=na.prop(this,"elements");return a?na.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!na(this).is(":disabled")&&fc.test(this.nodeName)&&!ec.test(a)&&(this.checked||!Na.test(a))}).map(function(a,b){var c=na(this).val();return null==c?null:na.isArray(c)?na.map(c,function(a){return{name:b.name,value:a.replace(dc,"\r\n")}}):{name:b.name,value:c.replace(dc,"\r\n")}}).get()}}),na.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return this.isLocal?aa():da.documentMode>8?_():/^(get|post|head|put|delete|options)$/i.test(this.type)&&_()||aa()}:_;var gc=0,hc={},ic=na.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in hc)hc[a](void 0,!0)}),la.cors=!!ic&&"withCredentials"in ic,ic=la.ajax=!!ic,ic&&na.ajaxTransport(function(b){if(!b.crossDomain||la.cors){var c;return{send:function(d,e){var f,g=b.xhr(),h=++gc;if(g.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(f in b.xhrFields)g[f]=b.xhrFields[f];b.mimeType&&g.overrideMimeType&&g.overrideMimeType(b.mimeType),b.crossDomain||d["X-Requested-With"]||(d["X-Requested-With"]="XMLHttpRequest");for(f in d)void 0!==d[f]&&g.setRequestHeader(f,d[f]+"");g.send(b.hasContent&&b.data||null),c=function(a,d){var f,i,j;if(c&&(d||4===g.readyState))if(delete hc[h],c=void 0,g.onreadystatechange=na.noop,d)4!==g.readyState&&g.abort();else{j={},f=g.status,"string"==typeof g.responseText&&(j.text=g.responseText);try{i=g.statusText}catch(a){i=""}f||!b.isLocal||b.crossDomain?1223===f&&(f=204):f=j.text?200:404}j&&e(f,i,j,g.getAllResponseHeaders())},b.async?4===g.readyState?a.setTimeout(c):g.onreadystatechange=hc[h]=c:c()},abort:function(){c&&c(void 0,!0)}}}}),na.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return na.globalEval(a),a}}}),na.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),na.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=da.head||na("head")[0]||da.documentElement;return{send:function(d,e){b=da.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var jc=[],kc=/(=)\?(?=&|$)|\?\?/;na.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=jc.pop()||na.expando+"_"+Ob++;return this[a]=!0,a}}),na.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=!1!==b.jsonp&&(kc.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&kc.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=na.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(kc,"$1"+e):!1!==b.jsonp&&(b.url+=(Pb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||na.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?na(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,jc.push(e)),g&&na.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),na.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||da;var d=wa.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=r([a],b,e),e&&e.length&&na(e).remove(),na.merge([],d.childNodes))};var lc=na.fn.load;na.fn.load=function(a,b,c){if("string"!=typeof a&&lc)return lc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=na.trim(a.slice(h,a.length)),a=a.slice(0,h)),na.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&na.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?na("<div>").append(na.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},na.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){na.fn[b]=function(a){return this.on(b,a)}}),na.expr.filters.animated=function(a){return na.grep(na.timers,function(b){return a===b.elem}).length},na.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=na.css(a,"position"),l=na(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=na.css(a,"top"),i=na.css(a,"left"),j=("absolute"===k||"fixed"===k)&&na.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),na.isFunction(b)&&(b=b.call(a,c,na.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},na.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){na.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,na.contains(b,e)?(void 0!==e.getBoundingClientRect&&(d=e.getBoundingClientRect()),c=ba(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===na.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),na.nodeName(a[0],"html")||(c=a.offset()),c.top+=na.css(a[0],"borderTopWidth",!0),c.left+=na.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-na.css(d,"marginTop",!0),left:b.left-c.left-na.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&!na.nodeName(a,"html")&&"static"===na.css(a,"position");)a=a.offsetParent;return a||mb})}}),na.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);na.fn[a]=function(d){return Ma(this,function(a,d,e){var f=ba(a);if(void 0===e)return f?b in f?f[b]:f.document.documentElement[d]:a[d];f?f.scrollTo(c?na(f).scrollLeft():e,c?e:na(f).scrollTop()):a[d]=e},a,d,arguments.length,null)}}),na.each(["top","left"],function(a,b){na.cssHooks[b]=F(la.pixelPosition,function(a,c){if(c)return c=ob(a,b),kb.test(c)?na(a).position()[b]+"px":c})}),na.each({Height:"height",Width:"width"},function(a,b){na.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){na.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(!0===d||!0===e?"margin":"border");return Ma(this,function(b,c,d){var e;return na.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?na.css(b,c,g):na.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),na.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),na.fn.size=function(){return this.length},na.fn.andSelf=na.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return na});var mc=a.jQuery,nc=a.$;return na.noConflict=function(b){return a.$===na&&(a.$=nc),b&&a.jQuery===na&&(a.jQuery=mc),na},na}),function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?void(this._wrapped=a):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.4.4";var y=x.each=x.forEach=function(a,b,d){if(null!=a)if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;e<f;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g in a)if(x.has(a,g)&&b.call(d,a[g],g,a)===c)return};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){if(!(e=e&&b.call(d,a,f,g)))return c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){if(e||(e=b.call(d,a,f,g)))return c}),!!e)};x.contains=x.include=function(a,b){return null!=a&&(s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b}))},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.where=function(a,b,c){return x.isEmpty(b)?c?null:[]:x[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},x.findWhere=function(a,b){return x.where(a,b,!0)},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-1/0;var d={computed:-1/0,value:-1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d};var B=function(a){return x.isFunction(a)?a:function(b){return b[a]}};x.sortBy=function(a,b,c){var d=B(b);return x.pluck(x.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index<b.index?-1:1}),"value")};var C=function(a,b,c,d){var e={},f=B(b||x.identity);return y(a,function(b,g){var h=f.call(c,b,g,a);d(e,h,b)}),e};x.groupBy=function(a,b,c){return C(a,b,c,function(a,b,c){(x.has(a,b)?a[b]:a[b]=[]).push(c)})},x.countBy=function(a,b,c){return C(a,b,c,function(a,b){x.has(a,b)||(a[b]=0),a[b]++})},x.sortedIndex=function(a,b,c,d){c=null==c?x.identity:B(c);for(var e=c.call(d,b),f=0,g=a.length;f<g;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){if(null!=a)return null==b||c?a[0]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){if(null!=a)return null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return y(a,function(a){x.isArray(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(i.apply(d,arguments))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=h.call(arguments),b=x.max(x.pluck(a,"length")),c=new Array(b),d=0;d<b;d++)c[d]=x.pluck(a,""+d);return c},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=c<0?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;d<e;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);e<d;)f[e++]=a,a+=c;return f},x.bind=function(a,b){if(a.bind===w&&w)return w.apply(a,h.call(arguments,1));var c=h.call(arguments,2);return function(){return a.apply(b,c.concat(h.call(arguments)))}},x.partial=function(a){var b=h.call(arguments,1);return function(){return a.apply(this,b.concat(h.call(arguments)))}},x.bindAll=function(a){var b=h.call(arguments,1);return 0===b.length&&(b=x.functions(a)),y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b){var c,d,e,f,g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)};return function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,j<=0?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},x.debounce=function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return function(){var c=[a];return g.apply(c,arguments),b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)x.has(a,c)&&(b[b.length]=c);return b},x.values=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push(a[c]);return b},x.pairs=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push([c,a[c]]);return b},x.invert=function(a){var b={};for(var c in a)x.has(a,c)&&(b[a[c]]=c);return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)null==a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var E=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;c.push(a),d.push(b);var g=0,h=!0;if("[object Array]"==e){if(g=a.length,h=g==b.length)for(;g--&&(h=E(a[g],b[g],c,d)););}else{var i=a.constructor,k=b.constructor;if(i!==k&&!(x.isFunction(i)&&i instanceof i&&x.isFunction(k)&&k instanceof k))return!1;for(var l in a)if(x.has(a,l)&&(g++,!(h=x.has(b,l)&&E(a[l],b[l],c,d))))break;if(h){for(l in b)if(x.has(b,l)&&!g--)break;h=!g}}return c.pop(),d.pop(),h};x.isEqual=function(a,b){return E(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=Array(a),e=0;e<a;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var F={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};F.unescape=x.invert(F.escape);var G={escape:new RegExp("["+x.keys(F.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(F.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(G[a],function(b){return F[a][b]})}}),x.result=function(a,b){if(null==a)return null;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),L.call(this,c.apply(x,a))}})};var H=0;x.uniqueId=function(a){var b=++H+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,J={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||I).source,(c.interpolate||I).source,(c.evaluate||I).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(K,function(a){return"\\"+J[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(a){throw a.source=g,a}if(b)return d(b,x);var h=function(a){return d.call(this,a,x)};return h.source="function("+(c.variable||"obj")+"){\n"+g+"}",h},x.chain=function(a){return x(a).chain()};var L=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],L.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return L.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}.call(this),define("json",[],function(){"use strict";var hasJSON=window.JSON,hasJSONparse=hasJSON&&JSON.parse,hasJSONstringify=hasJSON&&JSON.stringify&&'{"a":1}'==JSON.stringify({a:0},function(a,b){return b||1});if(hasJSONparse&&hasJSONstringify)return{parse:JSON.parse,stringify:function(){return window.Prototype&&Array.prototype.toJSON?function(a){var b=Array.prototype.toJSON;delete Array.prototype.toJSON;var c=JSON.stringify(a);return Array.prototype.toJSON=b,c}:JSON.stringify}()};var escapeString=function(a){return('"'+a.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:hasJSONparse?JSON.parse:function(str,strict){if((strict=!0)&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(str))throw new SyntaxError("Invalid characters in JSON");return eval("("+str+")")},stringify:function(a,b,c){function d(a,f,g){b&&(a=b(g,a));var h,i=typeof a;if("number"==i)return isFinite(a)?a+"":"null";if("boolean"==i)return a+"";if(null===a)return"null";if("string"==typeof a)return escapeString(a);if("function"==i||"undefined"==i)return e;if(a instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(b,c,d){var e=a["getUTC"+c]()+(d?1:0);return e<10?"0"+e:e});if(a.valueOf()!==a)return d(a.valueOf(),f,g);var j=c?f+c:"",k=c?" ":"",l=c?"\n":"";if(a instanceof Array){var m=a.length,n=[];for(g=0;g<m;g++){h=d(a[g],j,g),"string"!=typeof h&&(h="null"),n.push(l+j+h)}return"["+n.join(",")+l+f+"]"}var o=[];for(g in a){var p;if(a.hasOwnProperty(g)){if("number"==typeof g)p='"'+g+'"';else{if("string"!=typeof g)continue;p=escapeString(g)}if("string"!=typeof(h=d(a[g],j,g)))continue;o.push(l+j+p+":"+k+h)}}return"{"+o.join(",")+l+f+"}"}var e;return"string"==typeof b&&(c=b,b=null),d(a,"","")}}}),define("cb/lib/log",["underscore","json"],function(a,b){"use strict";function c(c){var d,f,g="";for(d=0;d<c.length;d++)if(f=c[d],a.isArray(f))try{g+=b.stringify(f)+" "}catch(a){""!==g&&(console.log(g),g=""),console.log("["+f.join(",")+"]")}else if(window&&window.Node&&f instanceof window.Node&&e)try{g+=e.serializeToString(f)+" "}catch(a){""!==g&&(console.log(g),g=""),console.dir(f)}else if(a.isObject(f))try{g+=b.stringify(f)+" "}catch(a){""!==g&&(console.log(g),g=""),console.dir(f)}else g+=f;""!==g&&console.log(g)}function d(){var b=a.toArray(arguments);a.find(b,a.isObject)?c(b):console.log(b.join(" "))}var e,f=!1;try{e=new window.XMLSerializer}catch(a){e=null}try{window.external.Log(""),f=!0}catch(a){f=!1}return f?(window.onerror=function(a,b,c){window.external.Log("JavaScript error: "+a+" on line "+c+" for "+b)},function(){var c=a.toArray(arguments),d="";a.each(c,function(a,e){try{d+=b.stringify(a)}catch(a){d+=a.message?"[ERROR: "+a.message+"]":"[UNKNOWN ERROR]"}e+1!==c.length&&(d+=", ")});try{window.external.Log(d)}catch(a){window.alert("Cannot log "+d+". Error: "+a.message)}}):!Function.prototype.bind||"object"!=typeof console&&"function"!=typeof console||"object"!=typeof console.log?"undefined"!=typeof console&&"function"==typeof console.log?d:function(){}:(a.each(["log","info","warn","error","assert","dir","clear","profile","profileEnd"],function(a){console[a]=this.call(console[a],console)},Function.prototype.bind),d)}),define("cb/lib/contexts",[],function(){"use strict";function a(){return window.top}function b(a,b){return a==b}function c(){return b(a(),window)}return{isSameWindow:b,isTopContext:c,getTopContext:a}}),define("integration/lib/config",["jquery","underscore"],function(a,b){"use strict";function c(){return{debug:!1,cobrowse:{theme:"cx",disableBuiltInUI:!1,primaryMedia:null,maxOfflineDuration:h,disableWebSockets:!1,apikey:null,css:{server:!0,browser:!1,default:!1},localization:null,setDocumentDomain:!0,disableBackForwardCache:!0,eventsHandling:{enableMouseDownUp:!0,enableAdditionalMouseEnterLeave:!0,enableFocusBlur:!0}},tracker:null,chat:{localization:null,registration:!0,autoRestore:!0,maxOfflineDuration:h,disableWebSockets:!1,ui:{}},buttons:{position:"left",cobrowse:!0,chat:!1}}}function d(c,d){var e;return!c||a.isEmptyObject(c)?d:(e=c,e.browser=!!e.browser,e.server=!!e.server,b.isBoolean(e.default)||(e.default=e.browser),e)}function e(e){var f,g,h,i,j,k,l,m=new c;return g=a.extend(!0,{},m,e),h=g.cobrowse,i=g.chat,j=e.cobrowse,j&&(h.css=d(j.css,m.cobrowse.css)),e.integration&&(a.extend(!0,g,e.integration),delete g.integration),f=e&&(e.buttons||e.integration&&e.integration.buttons)||{},!1===h&&b.isUndefined(f.cobrowse)&&(g.buttons.cobrowse=!1),!1===i&&b.isUndefined(f.chat)&&(g.buttons.chat=!1),k=["disableWebSockets","apikey","maxOfflineDuration"],l=["chat","cobrowse"],b.forEach(l,function(c){!1!==g[c]&&a.extend(g[c],b.pick(g,k),b.pick(e[c]||{},k))}),g}function f(b,c){var d,e;return c?(d=b.chat.ui.onBeforeWrapper,e=b.chat.ui.onBeforeMessage,a.extend(!0,b.chat,{ui:{onBeforeWrapper:function(a){c&&c.markServiceElement(a),d&&d(a)},onBeforeMessage:function(a,b){return!/\{start:\d{9}\}/.test(b)&&(e?e(a,b):void 0)}}})):b.chat}function g(a){var c;return b.isObject(a.cobrowse)&&(c=a.cobrowse.debug,b.isBoolean(c))?c:a.debug}var h=600;return{extendConfig:e,getIntegratedChatConfig:f,getCobrowseDebugValue:g,getDefaultConfig:function(){return new c}}}),define("cb/constants",[],function(){"use strict";var a="/service/session",b="/service/context",c="/service/window";return{MASTER_GLOBAL_NAME:"__genesys_cobrowse_masterApp__",SLAVE_GLOBAL_NAME:"SlaveApp",IFRAME_INDEX_PROP:"__genesys_cobrowse_iframe_id__",SERVICE_NODE_ATTR:"data-gcb-service-node",CSS_INDEX_PROPERTY:"__cb_css_index__",PSEUDO_HOVER_ATTR:"_gcbPseudoHover_",TOPMOST_CONTEXT_ID:1,userRoles:{MASTER:1,SLAVE:2},mouseSyncSpeed:{HIGH:80,LOW:280},modes:{POINTER:1,WRITE:2},cometDLogLevel:{INFO:"info",DEBUG:"debug",WARN:"warn"},COMETD_MAX_NETWORK_DELAY:6e4,SERVER_AVAILABILITY_TIMEOUT:15e3,CSS_LOADING_TIMEOUT:7e3,sessionEndTriggers:{SELF:"self",EXTERNAL:"external",TIMEOUT:"timeout",INACTIVITY_TIMEOUT:"inactivityTimeout",ERROR:"error",SERVER_UNAVAILABLE:"serverUnavailable",SESSIONS_OVER_LIMIT:"sessionsOverLimit",UNKNOWN_REASON:"unknownReason"},deactivationReasonsFromServer:{NONE:"NONE",TIMEOUT_INACTIVE:"TIMEOUT_INACTIVE",STOPPED_BY_USER:"STOPPED_BY_USER",DISCONNECTED_USER:"DISCONNECTED_USER",SESSIONS_OVER_LIMIT:"SESSIONS_OVER_LIMIT"},SESSION_CONFIG_KEY:"com.genesyslab.cobrowse.session.config",SESSION_COOKIE_NAME:"gcb-cobrowse-session",RELOAD_EXTENSION_COOKIE_NAME:"gcb-cobrowse-reload",RELOAD_EXTENSION_TIMEOUT:600,PAUSE_BEFORE_NAVIGATION:2e3,NAVIGATION_TIMEOUT:7e3,TOOLBAR_POSITION_KEY:"_gcbToolbarCoords_",DOM_RESTRICTION_CLASS_PREFIX:"cobrowse-domrestriction",channels:{META_HANDSHAKE:"/meta/handshake",META_CONNECT:"/meta/connect",SESSION_CREATE:a+"/create",SESSION_CONFIG:a+"/config",SESSION_JOIN:a+"/join",SESSION_JOINED:a+"/joined",SESSION_MODE:a+"/mode",SESSION_MODE_ATTEMPT:a+"/mode/attempt",SESSION_MODE_DENIAL:a+"/mode/denial",SESSION_EXIT:a+"/exit",SESSION_DEACTIVATED:a+"/deactivated",SERVICE_CONTEXT:b,CONTEXT_DOM:b+"/dom",CONTEXT_CSS:b+"/css",CONTEXT_READY:b+"/ready",CONTEXT_SCROLL:b+"/scroll",CONTEXT_MOUSE:b+"/mouse",CONTEXT_INPUT:b+"/input",WINDOW_SIZE:c+"/size",WINDOW_DIALOG_START:c+"/dialog/start",WINDOW_DIALOG_END:c+"/dialog/end",WINDOW_CONTROL:c+"/control",WINDOW_NAVIGATE:c+"/navigate",WINDOW_NAVIGATE_ATTEMPT:c+"/navigate/attempt",WINDOW_NAVIGATE_DENIAL:c+"/navigate/denial"},SERVER_STICKY_COOKIE:"gcbSessionServer",LIVE_SESSIONS_REST_RESOURCE:"/rest/live/sessions/",SLAVE_METRICS_REST_RESOURCE:"/rest/live/sessions/{id}/slave-rendered",slaveMirrorHooks:{SET_ATTRIBUTE:"setAttribute"},DOM_MESSAGE_KEYS_TO_TRANSPORT_KEYS_MAP:{nodeType:"a",id:"b",name:"c",publicId:"d",systemId:"e",textContent:"f",childNodes:"g",tagName:"h",attributes:"i",node:"j",previousSibling:"k",parentNode:"l",svg:"m",width:"n",height:"o"},DOM_MESSAGE_CHILD_NODES_KEY:"childNodes",DOM_MESSAGE_TYPE:{INITIALIZE:"initialize",APPLY_CHANGED:"applyChanged",UPDATE_SIZE:"updateSize",SET_CSS:"setCSS"},INPUT_MESSAGE_TYPES:{SNAPSHOT:"snapshot",VALUE:"value",EVENT:"event"},UNMASK_PWD_OPTION:"doNotMaskPasswords",EVENTS_HANDLING_OPTIONS:"eventsHandling",WINDOW_SCROLL:"WINDOW_SCROLL",ELEMENT_SCROLL:"ELEMENT_SCROLL",SCROLL_REACTIVATION_DELAY:70}}),function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define("SecondLevelDomains",b):a.SecondLevelDomains=b()}(this,function(){"use strict";var a=Object.prototype.hasOwnProperty,b={list:{ac:"com|gov|mil|net|org",ae:"ac|co|gov|mil|name|net|org|pro|sch",af:"com|edu|gov|net|org",al:"com|edu|gov|mil|net|org",ao:"co|ed|gv|it|og|pb",ar:"com|edu|gob|gov|int|mil|net|org|tur",at:"ac|co|gv|or",au:"asn|com|csiro|edu|gov|id|net|org",ba:"co|com|edu|gov|mil|net|org|rs|unbi|unmo|unsa|untz|unze",bb:"biz|co|com|edu|gov|info|net|org|store|tv",bh:"biz|cc|com|edu|gov|info|net|org",bn:"com|edu|gov|net|org",bo:"com|edu|gob|gov|int|mil|net|org|tv",br:"adm|adv|agr|am|arq|art|ato|b|bio|blog|bmd|cim|cng|cnt|com|coop|ecn|edu|eng|esp|etc|eti|far|flog|fm|fnd|fot|fst|g12|ggf|gov|imb|ind|inf|jor|jus|lel|mat|med|mil|mus|net|nom|not|ntr|odo|org|ppg|pro|psc|psi|qsl|rec|slg|srv|tmp|trd|tur|tv|vet|vlog|wiki|zlg",bs:"com|edu|gov|net|org",bz:"du|et|om|ov|rg",ca:"ab|bc|mb|nb|nf|nl|ns|nt|nu|on|pe|qc|sk|yk",ck:"biz|co|edu|gen|gov|info|net|org",cn:"ac|ah|bj|com|cq|edu|fj|gd|gov|gs|gx|gz|ha|hb|he|hi|hl|hn|jl|js|jx|ln|mil|net|nm|nx|org|qh|sc|sd|sh|sn|sx|tj|tw|xj|xz|yn|zj",co:"com|edu|gov|mil|net|nom|org",cr:"ac|c|co|ed|fi|go|or|sa",cy:"ac|biz|com|ekloges|gov|ltd|name|net|org|parliament|press|pro|tm",do:"art|com|edu|gob|gov|mil|net|org|sld|web",dz:"art|asso|com|edu|gov|net|org|pol",ec:"com|edu|fin|gov|info|med|mil|net|org|pro",eg:"com|edu|eun|gov|mil|name|net|org|sci",er:"com|edu|gov|ind|mil|net|org|rochest|w",es:"com|edu|gob|nom|org",et:"biz|com|edu|gov|info|name|net|org",fj:"ac|biz|com|info|mil|name|net|org|pro",fk:"ac|co|gov|net|nom|org",fr:"asso|com|f|gouv|nom|prd|presse|tm",gg:"co|net|org",gh:"com|edu|gov|mil|org",gn:"ac|com|gov|net|org",gr:"com|edu|gov|mil|net|org",gt:"com|edu|gob|ind|mil|net|org",gu:"com|edu|gov|net|org",hk:"com|edu|gov|idv|net|org",id:"ac|co|go|mil|net|or|sch|web",il:"ac|co|gov|idf|k12|muni|net|org",in:"ac|co|edu|ernet|firm|gen|gov|i|ind|mil|net|nic|org|res",iq:"com|edu|gov|i|mil|net|org",ir:"ac|co|dnssec|gov|i|id|net|org|sch",it:"edu|gov",je:"co|net|org",jo:"com|edu|gov|mil|name|net|org|sch",jp:"ac|ad|co|ed|go|gr|lg|ne|or",ke:"ac|co|go|info|me|mobi|ne|or|sc",kh:"com|edu|gov|mil|net|org|per",ki:"biz|com|de|edu|gov|info|mob|net|org|tel",km:"asso|com|coop|edu|gouv|k|medecin|mil|nom|notaires|pharmaciens|presse|tm|veterinaire",kn:"edu|gov|net|org",kr:"ac|busan|chungbuk|chungnam|co|daegu|daejeon|es|gangwon|go|gwangju|gyeongbuk|gyeonggi|gyeongnam|hs|incheon|jeju|jeonbuk|jeonnam|k|kg|mil|ms|ne|or|pe|re|sc|seoul|ulsan",kw:"com|edu|gov|net|org",ky:"com|edu|gov|net|org",kz:"com|edu|gov|mil|net|org",lb:"com|edu|gov|net|org",lk:"assn|com|edu|gov|grp|hotel|int|ltd|net|ngo|org|sch|soc|web",lr:"com|edu|gov|net|org",lv:"asn|com|conf|edu|gov|id|mil|net|org",ly:"com|edu|gov|id|med|net|org|plc|sch",ma:"ac|co|gov|m|net|org|press",mc:"asso|tm",me:"ac|co|edu|gov|its|net|org|priv",mg:"com|edu|gov|mil|nom|org|prd|tm",mk:"com|edu|gov|inf|name|net|org|pro",ml:"com|edu|gov|net|org|presse",mn:"edu|gov|org",mo:"com|edu|gov|net|org",mt:"com|edu|gov|net|org",mv:"aero|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro",mw:"ac|co|com|coop|edu|gov|int|museum|net|org",mx:"com|edu|gob|net|org",my:"com|edu|gov|mil|name|net|org|sch",nf:"arts|com|firm|info|net|other|per|rec|store|web",ng:"biz|com|edu|gov|mil|mobi|name|net|org|sch",ni:"ac|co|com|edu|gob|mil|net|nom|org",np:"com|edu|gov|mil|net|org",nr:"biz|com|edu|gov|info|net|org",om:"ac|biz|co|com|edu|gov|med|mil|museum|net|org|pro|sch",pe:"com|edu|gob|mil|net|nom|org|sld",ph:"com|edu|gov|i|mil|net|ngo|org",pk:"biz|com|edu|fam|gob|gok|gon|gop|gos|gov|net|org|web",pl:"art|bialystok|biz|com|edu|gda|gdansk|gorzow|gov|info|katowice|krakow|lodz|lublin|mil|net|ngo|olsztyn|org|poznan|pwr|radom|slupsk|szczecin|torun|warszawa|waw|wroc|wroclaw|zgora",pr:"ac|biz|com|edu|est|gov|info|isla|name|net|org|pro|prof",ps:"com|edu|gov|net|org|plo|sec",pw:"belau|co|ed|go|ne|or",ro:"arts|com|firm|info|nom|nt|org|rec|store|tm|www",rs:"ac|co|edu|gov|in|org",sb:"com|edu|gov|net|org",sc:"com|edu|gov|net|org",sh:"co|com|edu|gov|net|nom|org",sl:"com|edu|gov|net|org",st:"co|com|consulado|edu|embaixada|gov|mil|net|org|principe|saotome|store",sv:"com|edu|gob|org|red",sz:"ac|co|org",tr:"av|bbs|bel|biz|com|dr|edu|gen|gov|info|k12|name|net|org|pol|tel|tsk|tv|web",tt:"aero|biz|cat|co|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel",tw:"club|com|ebiz|edu|game|gov|idv|mil|net|org",mu:"ac|co|com|gov|net|or|org",mz:"ac|co|edu|gov|org",na:"co|com",nz:"ac|co|cri|geek|gen|govt|health|iwi|maori|mil|net|org|parliament|school",pa:"abo|ac|com|edu|gob|ing|med|net|nom|org|sld",pt:"com|edu|gov|int|net|nome|org|publ",py:"com|edu|gov|mil|net|org",qa:"com|edu|gov|mil|net|org",re:"asso|com|nom",ru:"ac|adygeya|altai|amur|arkhangelsk|astrakhan|bashkiria|belgorod|bir|bryansk|buryatia|cbg|chel|chelyabinsk|chita|chukotka|chuvashia|com|dagestan|e-burg|edu|gov|grozny|int|irkutsk|ivanovo|izhevsk|jar|joshkar-ola|kalmykia|kaluga|kamchatka|karelia|kazan|kchr|kemerovo|khabarovsk|khakassia|khv|kirov|koenig|komi|kostroma|kranoyarsk|kuban|kurgan|kursk|lipetsk|magadan|mari|mari-el|marine|mil|mordovia|mosreg|msk|murmansk|nalchik|net|nnov|nov|novosibirsk|nsk|omsk|orenburg|org|oryol|penza|perm|pp|pskov|ptz|rnd|ryazan|sakhalin|samara|saratov|simbirsk|smolensk|spb|stavropol|stv|surgut|tambov|tatarstan|tom|tomsk|tsaritsyn|tsk|tula|tuva|tver|tyumen|udm|udmurtia|ulan-ude|vladikavkaz|vladimir|vladivostok|volgograd|vologda|voronezh|vrn|vyatka|yakutia|yamal|yekaterinburg|yuzhno-sakhalinsk",rw:"ac|co|com|edu|gouv|gov|int|mil|net",sa:"com|edu|gov|med|net|org|pub|sch",sd:"com|edu|gov|info|med|net|org|tv",se:"a|ac|b|bd|c|d|e|f|g|h|i|k|l|m|n|o|org|p|parti|pp|press|r|s|t|tm|u|w|x|y|z",sg:"com|edu|gov|idn|net|org|per",sn:"art|com|edu|gouv|org|perso|univ",sy:"com|edu|gov|mil|net|news|org",th:"ac|co|go|in|mi|net|or",tj:"ac|biz|co|com|edu|go|gov|info|int|mil|name|net|nic|org|test|web",tn:"agrinet|com|defense|edunet|ens|fin|gov|ind|info|intl|mincom|nat|net|org|perso|rnrt|rns|rnu|tourism",tz:"ac|co|go|ne|or",ua:"biz|cherkassy|chernigov|chernovtsy|ck|cn|co|com|crimea|cv|dn|dnepropetrovsk|donetsk|dp|edu|gov|if|in|ivano-frankivsk|kh|kharkov|kherson|khmelnitskiy|kiev|kirovograd|km|kr|ks|kv|lg|lugansk|lutsk|lviv|me|mk|net|nikolaev|od|odessa|org|pl|poltava|pp|rovno|rv|sebastopol|sumy|te|ternopil|uzhgorod|vinnica|vn|zaporizhzhe|zhitomir|zp|zt",ug:"ac|co|go|ne|or|org|sc",uk:"ac|bl|british-library|co|cym|gov|govt|icnet|jet|lea|ltd|me|mil|mod|national-library-scotland|nel|net|nhs|nic|nls|org|orgn|parliament|plc|police|sch|scot|soc",us:"dni|fed|isa|kids|nsn",uy:"com|edu|gub|mil|net|org",ve:"co|com|edu|gob|info|mil|net|org|web",vi:"co|com|k12|net|org",vn:"ac|biz|com|edu|gov|health|info|int|name|net|org|pro",ye:"co|com|gov|ltd|me|net|org|plc",yu:"ac|co|edu|gov|org",za:"ac|agric|alt|bourse|city|co|cybernet|db|edu|gov|grondar|iaccess|imt|inca|landesign|law|mil|net|ngo|nis|nom|olivetti|org|pix|school|tm|web",zm:"ac|co|com|edu|gov|net|org|sch"},has_expression:null,is_expression:null,has:function(a){return!!a.match(b.has_expression)},is:function(a){return!!a.match(b.is_expression)},get:function(a){var c=a.match(b.has_expression);return c&&c[1]||null},init:function(){var c="";for(var d in b.list)if(a.call(b.list,d)){var e="("+b.list[d]+")."+d;c+="|("+e+")"}b.has_expression=new RegExp("\\.("+c.substr(1)+")$","i"),b.is_expression=new RegExp("^("+c.substr(1)+")$","i")}};return b.init(),b}),function(a,b){"object"==typeof exports?module.exports=b(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define("URI",["SecondLevelDomains"],b):a.URI=b(a.punycode,a.IPv6,a.SecondLevelDomains)}(this,function(a){"use strict";function b(a,c){return this instanceof b?(void 0===a&&(a="undefined"!=typeof location?location.href+"":""),this.href(a),void 0!==c?this.absoluteTo(c):this):new b(a,c)}function c(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function d(a){return String(Object.prototype.toString.call(a)).slice(8,-1)}function e(a){return"Array"===d(a)}function f(a,b){var c,d,f={};if(e(b))for(c=0,d=b.length;c<d;c++)f[b[c]]=!0;else f[b]=!0;for(c=0,d=a.length;c<d;c++)void 0!==f[a[c]]&&(a.splice(c,1),d--,c--);return a}function g(a,b){var c,f;if(e(b)){for(c=0,f=b.length;c<f;c++)if(!g(a,b[c]))return!1;return!0}var h=d(b);for(c=0,f=a.length;c<f;c++)if("RegExp"===h){if("string"==typeof a[c]&&a[c].match(b))return!0}else if(a[c]===b)return!0;return!1}function h(a,b){if(!e(a)||!e(b))return!1;if(a.length!==b.length)return!1;a.sort(),b.sort();for(var c=0,d=a.length;c<d;c++)if(a[c]!==b[c])return!1;return!0}function i(a){return encodeURIComponent(a).replace(/[!'()*]/g,escape).replace(/\*/g,"%2A")}var j=b.prototype,k=Object.prototype.hasOwnProperty;b._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:b.duplicateQueryParameters}},b.duplicateQueryParameters=!1,b.protocol_expression=/^[a-z][a-z0-9-+-]*$/i,b.idn_expression=/[^a-z0-9\.-]/i,b.punycode_expression=/(xn--)/i,b.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,b.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,b.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,b.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},b.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,b.encode=i,b.decode=decodeURIComponent,b.iso8859=function(){b.encode=escape,b.decode=unescape},b.unicode=function(){b.encode=i,b.decode=decodeURIComponent},b.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},b.encodeQuery=function(a){return b.encode(a+"").replace(/%20/g,"+")},b.decodeQuery=function(a){return b.decode((a+"").replace(/\+/g,"%20"))},b.recodePath=function(a){for(var c=(a+"").split("/"),d=0,e=c.length;d<e;d++)c[d]=b.encodePathSegment(b.decode(c[d]));return c.join("/")},b.decodePath=function(a){for(var c=(a+"").split("/"),d=0,e=c.length;d<e;d++)c[d]=b.decodePathSegment(c[d]);return c.join("/")};var l,m={encode:"encode",decode:"decode"},n=function(a,c){return function(d){return b[c](d+"").replace(b.characters[a][c].expression,function(d){return b.characters[a][c].map[d]})}};for(l in m)b[l+"PathSegment"]=n("pathname",m[l]);b.encodeReserved=n("reserved","encode"),b.parse=function(a,c){var d;return c||(c={}),d=a.indexOf("#"),d>-1&&(c.fragment=a.substring(d+1)||null,a=a.substring(0,d)),d=a.indexOf("?"),d>-1&&(c.query=a.substring(d+1)||null,a=a.substring(0,d)),"//"===a.substring(0,2)?(c.protocol="",a=a.substring(2),a=b.parseAuthority(a,c)):(d=a.indexOf(":"))>-1&&(c.protocol=a.substring(0,d),c.protocol&&!c.protocol.match(b.protocol_expression)?c.protocol=void 0:"file"===c.protocol?a=a.substring(d+3):"//"===a.substring(d+1,d+3)?(a=a.substring(d+3),a=b.parseAuthority(a,c)):(a=a.substring(d+1),c.urn=!0)),c.path=a,c},b.parseHost=function(a,b){var c,d,e=a.indexOf("/");return-1===e&&(e=a.length),"["===a.charAt(0)?(c=a.indexOf("]"),b.hostname=a.substring(1,c)||null,b.port=a.substring(c+2,e)||null):a.indexOf(":")!==a.lastIndexOf(":")?(b.hostname=a.substring(0,e)||null,b.port=null):(d=a.substring(0,e).split(":"),b.hostname=d[0]||null,b.port=d[1]||null),b.hostname&&"/"!==a.substring(e).charAt(0)&&(e++,a="/"+a),a.substring(e)||"/"},b.parseAuthority=function(a,c){return a=b.parseUserinfo(a,c),b.parseHost(a,c)},b.parseUserinfo=function(a,c){var d,e=a.indexOf("@"),f=a.indexOf("/");return e>-1&&(-1===f||e<f)?(d=a.substring(0,e).split(":"),c.username=d[0]?b.decode(d[0]):null,d.shift(),c.password=d[0]?b.decode(d.join(":")):null,a=a.substring(e+1)):(c.username=null,c.password=null),a},b.parseQuery=function(a){if(!a)return{};if(!(a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var c,d,e,f={},g=a.split("&"),h=g.length,i=0;i<h;i++)c=g[i].split("="),d=b.decodeQuery(c.shift()),e=c.length?b.decodeQuery(c.join("=")):null,f[d]?("string"==typeof f[d]&&(f[d]=[f[d]]),f[d].push(e)):f[d]=e;return f},b.build=function(a){var c="";return a.protocol&&(c+=a.protocol+":"),a.urn||!c&&!a.hostname||(c+="//"),c+=b.buildAuthority(a)||"","string"==typeof a.path&&("/"!==a.path.charAt(0)&&"string"==typeof a.hostname&&(c+="/"),c+=a.path),"string"==typeof a.query&&a.query&&(c+="?"+a.query),"string"==typeof a.fragment&&a.fragment&&(c+="#"+a.fragment),c},b.buildHost=function(a){var c="";return a.hostname?(b.ip6_expression.test(a.hostname)?a.port?c+="["+a.hostname+"]:"+a.port:c+=a.hostname:(c+=a.hostname,a.port&&(c+=":"+a.port)),c):""},b.buildAuthority=function(a){return b.buildUserinfo(a)+b.buildHost(a)},b.buildUserinfo=function(a){var c="";return a.username&&(c+=b.encode(a.username),a.password&&(c+=":"+b.encode(a.password)),c+="@"),c},b.buildQuery=function(a,c){var d,f,g,h,i="";for(f in a)if(k.call(a,f)&&f)if(e(a[f]))for(d={},g=0,h=a[f].length;g<h;g++)void 0!==a[f][g]&&void 0===d[a[f][g]+""]&&(i+="&"+b.buildQueryParameter(f,a[f][g]),!0!==c&&(d[a[f][g]+""]=!0));else void 0!==a[f]&&(i+="&"+b.buildQueryParameter(f,a[f]));return i.substring(1)},b.buildQueryParameter=function(a,c){return b.encodeQuery(a)+(null!==c?"="+b.encodeQuery(c):"")},b.addQuery=function(a,c,d){if("object"==typeof c)for(var f in c)k.call(c,f)&&b.addQuery(a,f,c[f]);else{if("string"!=typeof c)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===a[c])return void(a[c]=d);"string"==typeof a[c]&&(a[c]=[a[c]]),e(d)||(d=[d]),a[c]=a[c].concat(d)}},b.removeQuery=function(a,c,d){var g,h,i;if(e(c))for(g=0,h=c.length;g<h;g++)a[c[g]]=void 0;else if("object"==typeof c)for(i in c)k.call(c,i)&&b.removeQuery(a,i,c[i]);else{if("string"!=typeof c)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");void 0!==d?a[c]===d?a[c]=void 0:e(a[c])&&(a[c]=f(a[c],d)):a[c]=void 0}},b.hasQuery=function(a,c,f,i){if("object"==typeof c){for(var j in c)if(k.call(c,j)&&!b.hasQuery(a,j,c[j]))return!1;return!0}if("string"!=typeof c)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(d(f)){case"Undefined":return c in a;case"Boolean":return f===Boolean(e(a[c])?a[c].length:a[c]);case"Function":return!!f(a[c],c,a);case"Array":if(!e(a[c]))return!1;return(i?g:h)(a[c],f);case"RegExp":return e(a[c])?!!i&&g(a[c],f):Boolean(a[c]&&a[c].match(f));case"Number":f=String(f);case"String":return e(a[c])?!!i&&g(a[c],f):a[c]===f;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},b.commonPath=function(a,b){var c,d=Math.min(a.length,b.length);for(c=0;c<d;c++)if(a.charAt(c)!==b.charAt(c)){c--;break}return c<1?a.charAt(0)===b.charAt(0)&&"/"===a.charAt(0)?"/":"":("/"!==a.charAt(c)&&(c=a.substring(0,c).lastIndexOf("/")),a.substring(0,c+1))},b.withinString=function(a,c){return a.replace(b.find_uri_expression,c)},b.ensureValidHostname=function(a){if(a.match(b.invalid_hostname_characters)){if(!punycode)throw new TypeError("Hostname '"+a+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(punycode.toASCII(a).match(b.invalid_hostname_characters))throw new TypeError("Hostname '"+a+"' contains characters other than [A-Z0-9.-]")}},j.build=function(a){return!0===a?this._deferred_build=!0:(void 0===a||this._deferred_build)&&(this._string=b.build(this._parts),this._deferred_build=!1),this},j.clone=function(){return new b(this)},j.valueOf=j.toString=function(){return this.build(!1)._string},m={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},n=function(a){return function(b,c){return void 0===b?this._parts[a]||"":(this._parts[a]=b,this.build(!c),this)}};for(l in m)j[l]=n(m[l]);m={query:"?",fragment:"#"},n=function(a,b){return function(c,d){return void 0===c?this._parts[a]||"":(null!==c&&(c+="",c.charAt(0)===b&&(c=c.substring(1))),this._parts[a]=c,this.build(!d),this)}};for(l in m)j[l]=n(l,m[l]);m={search:["?","query"],hash:["#","fragment"]},n=function(a,b){return function(c,d){var e=this[a](c,d);return"string"==typeof e&&e.length?b+e:e}};for(l in m)j[l]=n(m[l][1],m[l][0]);j.pathname=function(a,c){if(void 0===a||!0===a){var d=this._parts.path||(this._parts.urn?"":"/");return a?b.decodePath(d):d}return this._parts.path=a?b.recodePath(a):"/",this.build(!c),this},j.path=j.pathname,j.href=function(a,c){var d;if(void 0===a)return this.toString();this._string="",this._parts=b._parts();var e=a instanceof b,f="object"==typeof a&&(a.hostname||a.path);if(!e&&f&&void 0!==a.pathname&&(a=a.toString()),"string"==typeof a)this._parts=b.parse(a,this._parts);else{if(!e&&!f)throw new TypeError("invalid input");var g=e?a._parts:a;for(d in g)k.call(this._parts,d)&&(this._parts[d]=g[d])}return this.build(!c),this},j.is=function(c){var d=!1,e=!1,f=!1,g=!1,h=!1,i=!1,j=!1,k=!this._parts.urn;switch(this._parts.hostname&&(k=!1,e=b.ip4_expression.test(this._parts.hostname),f=b.ip6_expression.test(this._parts.hostname),d=e||f,g=!d,h=g&&a&&a.has(this._parts.hostname),i=g&&b.idn_expression.test(this._parts.hostname),j=g&&b.punycode_expression.test(this._parts.hostname)),c.toLowerCase()){case"relative":return k;case"absolute":return!k;case"domain":case"name":return g;case"sld":return h;case"ip":return d;case"ip4":case"ipv4":case"inet4":return e;case"ip6":case"ipv6":case"inet6":return f;case"idn":return i;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return j}return null};var o=j.protocol,p=j.port,q=j.hostname;j.protocol=function(a,b){if(void 0!==a&&a&&(a=a.replace(/:(\/\/)?$/,""),a.match(/[^a-zA-z0-9\.+-]/)))throw new TypeError("Protocol '"+a+"' contains characters other than [A-Z0-9.+-]");return o.call(this,a,b)},j.scheme=j.protocol,j.port=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a&&(0===a&&(a=null),a&&(a+="",":"===a.charAt(0)&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError("Port '"+a+"' contains characters other than [0-9]");return p.call(this,a,b)},j.hostname=function(a,c){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a){var d={};b.parseHost(a,d),a=d.hostname}return q.call(this,a,c)},j.host=function(a,c){return this._parts.urn?void 0===a?"":this:void 0===a?this._parts.hostname?b.buildHost(this._parts):"":(b.parseHost(a,this._parts),this.build(!c),this)},j.authority=function(a,c){return this._parts.urn?void 0===a?"":this:void 0===a?this._parts.hostname?b.buildAuthority(this._parts):"":(b.parseAuthority(a,this._parts),this.build(!c),this)},j.userinfo=function(a,c){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.username)return"";var d=b.buildUserinfo(this._parts);return d.substring(0,d.length-1)}return"@"!==a[a.length-1]&&(a+="@"),b.parseUserinfo(a,this._parts),this.build(!c),this},j.resource=function(a,c){var d;return void 0===a?this.path()+this.search()+this.hash():(d=b.parse(a),this._parts.path=d.path,this._parts.query=d.query,this._parts.fragment=d.fragment,this.build(!c),this)},j.subdomain=function(a,d){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var e=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,e)||""}var f=this._parts.hostname.length-this.domain().length,g=this._parts.hostname.substring(0,f),h=new RegExp("^"+c(g));return a&&"."!==a.charAt(a.length-1)&&(a+="."),a&&b.ensureValidHostname(a),this._parts.hostname=this._parts.hostname.replace(h,a),this.build(!d),this},j.domain=function(a,d){if(this._parts.urn)return void 0===a?"":this;if("boolean"==typeof a&&(d=a,a=void 0),void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var e=this._parts.hostname.match(/\./g);if(e&&e.length<2)return this._parts.hostname;var f=this._parts.hostname.length-this.tld(d).length-1;return f=this._parts.hostname.lastIndexOf(".",f-1)+1,this._parts.hostname.substring(f)||""}if(!a)throw new TypeError("cannot set domain empty");if(b.ensureValidHostname(a),!this._parts.hostname||this.is("IP"))this._parts.hostname=a;else{var g=new RegExp(c(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(g,a)}return this.build(!d),this},j.tld=function(b,d){if(this._parts.urn)return void 0===b?"":this;if("boolean"==typeof b&&(d=b,b=void 0),void 0===b){if(!this._parts.hostname||this.is("IP"))return"";var e=this._parts.hostname.lastIndexOf("."),f=this._parts.hostname.substring(e+1);return!0!==d&&a&&a.list[f.toLowerCase()]?a.get(this._parts.hostname)||f:f}var g;if(!b)throw new TypeError("cannot set TLD empty");if(b.match(/[^a-zA-Z0-9-]/)){if(!a||!a.is(b))throw new TypeError("TLD '"+b+"' contains characters other than [A-Z0-9]");g=new RegExp(c(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(g,b)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");g=new RegExp(c(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(g,b)}return this.build(!d),this},j.directory=function(a,d){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var e=this._parts.path.length-this.filename().length-1,f=this._parts.path.substring(0,e)||(this._parts.hostname?"/":"");return a?b.decodePath(f):f}var g=this._parts.path.length-this.filename().length,h=this._parts.path.substring(0,g),i=new RegExp("^"+c(h));return this.is("relative")||(a||(a="/"),"/"!==a.charAt(0)&&(a="/"+a)),a&&"/"!==a.charAt(a.length-1)&&(a+="/"),a=b.recodePath(a),this._parts.path=this._parts.path.replace(i,a),this.build(!d),this},j.filename=function(a,d){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var e=this._parts.path.lastIndexOf("/"),f=this._parts.path.substring(e+1);return a?b.decodePathSegment(f):f}var g=!1;"/"===a.charAt(0)&&(a=a.substring(1)),a.match(/\.?\//)&&(g=!0);var h=new RegExp(c(this.filename())+"$");return a=b.recodePath(a),this._parts.path=this._parts.path.replace(h,a),g?this.normalizePath(d):this.build(!d),this},j.suffix=function(a,d){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var e,f,g=this.filename(),h=g.lastIndexOf(".");return-1===h?"":(e=g.substring(h+1),f=/^[a-z0-9%]+$/i.test(e)?e:"",a?b.decodePathSegment(f):f)}"."===a.charAt(0)&&(a=a.substring(1));var i,j=this.suffix();if(j)i=a?new RegExp(c(j)+"$"):new RegExp(c("."+j)+"$");else{if(!a)return this;this._parts.path+="."+b.recodePath(a)}return i&&(a=b.recodePath(a),this._parts.path=this._parts.path.replace(i,a)),this.build(!d),this},j.segment=function(a,b,c){var d=this._parts.urn?":":"/",f=this.path(),g="/"===f.substring(0,1),h=f.split(d);if("number"!=typeof a&&(c=b,b=a,a=void 0),void 0!==a&&"number"!=typeof a)throw new Error("Bad segment '"+a+"', must be 0-based integer");return g&&h.shift(),a<0&&(a=Math.max(h.length+a,0)),void 0===b?void 0===a?h:h[a]:(null===a||void 0===h[a]?e(b)?h=b:(b||"string"==typeof b&&b.length)&&(""===h[h.length-1]?h[h.length-1]=b:h.push(b)):b||"string"==typeof b&&b.length?h[a]=b:h.splice(a,1),g&&h.unshift(""),this.path(h.join(d),c))};var r=j.query;return j.query=function(a,c){if(!0===a)return b.parseQuery(this._parts.query);if("function"==typeof a){var d=b.parseQuery(this._parts.query),e=a.call(this,d);return this._parts.query=b.buildQuery(e||d,this._parts.duplicateQueryParameters),this.build(!c),this}return void 0!==a&&"string"!=typeof a?(this._parts.query=b.buildQuery(a,this._parts.duplicateQueryParameters),this.build(!c),this):r.call(this,a,c)},j.setQuery=function(a,c,d){var e=b.parseQuery(this._parts.query);if("object"==typeof a)for(var f in a)k.call(a,f)&&(e[f]=a[f]);else{if("string"!=typeof a)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");e[a]=void 0!==c?c:null}return this._parts.query=b.buildQuery(e,this._parts.duplicateQueryParameters),"string"!=typeof a&&(d=c),this.build(!d),this},j.addQuery=function(a,c,d){var e=b.parseQuery(this._parts.query);return b.addQuery(e,a,void 0===c?null:c),this._parts.query=b.buildQuery(e,this._parts.duplicateQueryParameters),"string"!=typeof a&&(d=c),this.build(!d),this},j.removeQuery=function(a,c,d){var e=b.parseQuery(this._parts.query);return b.removeQuery(e,a,c),this._parts.query=b.buildQuery(e,this._parts.duplicateQueryParameters),"string"!=typeof a&&(d=c),this.build(!d),this},j.hasQuery=function(a,c,d){var e=b.parseQuery(this._parts.query);return b.hasQuery(e,a,c,d)},j.setSearch=j.setQuery,j.addSearch=j.addQuery,j.removeSearch=j.removeQuery,j.hasSearch=j.hasQuery,j.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},j.normalizeProtocol=function(a){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a)),this},j.normalizeHostname=function(a){return this._parts.hostname&&(this.is("IDN")&&punycode?this._parts.hostname=punycode.toASCII(this._parts.hostname):this.is("IPv6")&&IPv6&&(this._parts.hostname=IPv6.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!a)),this},j.normalizePort=function(a){return"string"==typeof this._parts.protocol&&this._parts.port===b.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!a)),this},j.normalizePath=function(a){if(this._parts.urn)return this;if(!this._parts.path||"/"===this._parts.path)return this;var c,d,e,f,g=this._parts.path;for("/"!==g.charAt(0)&&("."===g.charAt(0)&&(d=g.substring(0,g.indexOf("/"))),c=!0,g="/"+g),g=g.replace(/(\/(\.\/)+)|\/{2,}/g,"/");;){if(-1===(e=g.indexOf("/../")))break;if(0===e){g=g.substring(3);break}f=g.substring(0,e).lastIndexOf("/"),-1===f&&(f=e),g=g.substring(0,f)+g.substring(e+3)}return c&&this.is("relative")&&(g=d?d+g:g.substring(1)),g=b.recodePath(g),this._parts.path=g,this.build(!a),this},j.normalizePathname=j.normalizePath,j.normalizeQuery=function(a){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(b.parseQuery(this._parts.query)):this._parts.query=null,this.build(!a)),this},j.normalizeFragment=function(a){return this._parts.fragment||(this._parts.fragment=null,this.build(!a)),this},j.normalizeSearch=j.normalizeQuery,j.normalizeHash=j.normalizeFragment,j.iso8859=function(){var a=b.encode,c=b.decode;return b.encode=escape,b.decode=decodeURIComponent,this.normalize(),b.encode=a,b.decode=c,this},j.unicode=function(){var a=b.encode,c=b.decode;return b.encode=i,b.decode=unescape,this.normalize(),b.encode=a,b.decode=c,this},j.readable=function(){var a=this.clone();a.username("").password("").normalize();var c="";if(a._parts.protocol&&(c+=a._parts.protocol+"://"),a._parts.hostname&&(a.is("punycode")&&punycode?(c+=punycode.toUnicode(a._parts.hostname),a._parts.port&&(c+=":"+a._parts.port)):c+=a.host()),a._parts.hostname&&a._parts.path&&"/"!==a._parts.path.charAt(0)&&(c+="/"),c+=a.path(!0),a._parts.query){for(var d="",e=0,f=a._parts.query.split("&"),g=f.length;e<g;e++){var h=(f[e]||"").split("=");d+="&"+b.decodeQuery(h[0]).replace(/&/g,"%26"),void 0!==h[1]&&(d+="="+b.decodeQuery(h[1]).replace(/&/g,"%26"))}c+="?"+d.substring(1)}return c+=a.hash()},j.absoluteTo=function(a){var c,d,e,f=this.clone(),g=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierachical components");if(this._parts.hostname)return f;for(a instanceof b||(a=new b(a)),d=0,e;e=g[d];d++)f._parts[e]=a._parts[e];for(g=["query","path"],d=0,e;e=g[d];d++)!f._parts[e]&&a._parts[e]&&(f._parts[e]=a._parts[e]);return"/"!==f.path().charAt(0)&&(c=a.directory(),f._parts.path=(c?c+"/":"")+f._parts.path,f.normalizePath()),f.build(),f},j.relativeTo=function(a){var d,e,f,g,h=this.clone(),i=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierachical components");if(a instanceof b||(a=new b(a)),"/"!==this.path().charAt(0)||"/"!==a.path().charAt(0))throw new Error("Cannot calculate common path from non-relative URLs");if(!(d=b.commonPath(h.path(),a.path()))||"/"===d)return h;for(var j,k=0;j=i[k];k++)h._parts[j]=null;if(e=a.directory(),f=this.directory(),e===f)return h._parts.path="./"+h.filename(),h.build();if(e.substring(d.length),g=f.substring(d.length),e+"/"===d)return g&&(g+="/"),h._parts.path="./"+g+h.filename(),h.build();for(var l="../",m=new RegExp("^"+c(d)),n=e.replace(m,"/").match(/\//g).length-1;n--;)l+="../";return h._parts.path=h._parts.path.replace(m,l),h.build()},j.equals=function(a){var c,d,f,g=this.clone(),i=new b(a),j={},l={},m={};if(g.normalize(),i.normalize(),g.toString()===i.toString())return!0;if(c=g.query(),d=i.query(),g.query(""),i.query(""),g.toString()!==i.toString())return!1;if(c.length!==d.length)return!1;j=b.parseQuery(c),l=b.parseQuery(d);for(f in j)if(k.call(j,f)){if(e(j[f])){if(!h(j[f],l[f]))return!1}else if(j[f]!==l[f])return!1;m[f]=!0}for(f in l)if(k.call(l,f)&&!m[f])return!1;return!0},j.duplicateQueryParameters=function(a){return this._parts.duplicateQueryParameters=!!a,this},b}),define("cb/lib/dom/Node",[],function(){"use strict";return{ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10}}),function(a){"function"==typeof define&&define.amd?define("jquery.cookie",["jquery"],a):a(jQuery)}(function(a){function b(a){return a}function c(a){return decodeURIComponent(a.replace(e," "))}function d(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return f.json?JSON.parse(a):a}catch(a){}}var e=/\+/g,f=a.cookie=function(e,g,h){if(void 0!==g){if(h=a.extend({},f.defaults,h),"number"==typeof h.expires){var i=h.expires,j=h.expires=new Date;j.setDate(j.getDate()+i)}return g=f.json?JSON.stringify(g):String(g),document.cookie=[f.raw?e:encodeURIComponent(e),"=",f.raw?g:encodeURIComponent(g),h.expires?"; expires="+h.expires.toUTCString():"",h.path?"; path="+h.path:"",h.domain?"; domain="+h.domain:"",h.secure?"; secure":""].join("")}for(var k=f.raw?b:c,l=document.cookie.split("; "),m=e?void 0:{},n=0,o=l.length;n<o;n++){var p=l[n].split("="),q=k(p.shift()),r=k(p.join("="));if(e&&e===q){m=d(r);break}e||(m[q]=d(r))}return m};f.defaults={},a.removeCookie=function(b,c){return void 0!==a.cookie(b)&&(a.cookie(b,"",a.extend({},c,{expires:-1})),!0)}}),define("util",["jquery","underscore","cb/constants","URI","cb/lib/dom/Node","cb/lib/contexts","jquery.cookie"],function(a,b,c,d,e,f){"use strict";function g(){return O}function h(a){function b(){}return b.prototype=a,new b}function i(a){var b=new d(document.location.href);return d.parseQuery(a?b.fragment():b.query())}function j(a){return i()[a]}function k(a){return i(!0)[a]}function l(a,c,d){return b.each(d,function(d){a[d]=b.bind(c[d],c)}),a}function m(a,c,d){d=d||J,function e(){var f;try{f=a()}catch(a){f=!1}f?c(f):b.delay(e,d)}()}function n(a){var b=new d(a);return b.filename(""),b.href()}function o(){var a=document.querySelector("base");return a&&a.hasAttribute("href")?a.href:n(p())}function p(){return document.location.href}function q(a){return K.test(a)}function r(a){return a.replace(L,"")}function s(a,b,c){for(var d,e=a.length;e--;)d=a[e],c(d,e,a)||d.childNodes&&d.childNodes.length&&b(d.childNodes)}function t(a){return(a+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br/>$2")}function u(){return a("["+M+"]")}function v(a,b){var c;if(a.nodeType===e.ELEMENT_NODE&&(a.setAttribute(M,N),!b&&a.childNodes.length))for(c=a.firstChild;c;c=c.nextSibling)v(c)}function w(a){a.removeAttribute(M)}function x(a){if(!a.nodeType)throw new Error("Invalid argument type. Expected DOM Node.");return a.nodeType===e.ELEMENT_NODE?a.getAttribute(M)===N:a.parentNode&&x(a.parentNode)}function y(a){return"INPUT"===a.nodeName&&"hidden"===a.type}function z(a){for(;a.parentNode;){if(a.getAttribute&&a.getAttribute(M)===N)return a;a=a.parentNode}return null}function A(b,c,d){return a.cookie(b,c,a.extend({},d,P))}function B(b){return a.removeCookie(b,P)}function C(c,d,e){var f=a.Deferred(),g=a.ajax(a.extend({dataType:"jsonp",cache:!0,url:c},e));return g.done(function(a){b.extend(d,a),f.resolve(a)}),g.fail(function(){f.resolve({})}),f.promise()}function D(a,b){return a.replace(/\{([^{}]*)\}/g,function(a,c){var d=b[c];return"string"==typeof d||"number"==typeof d?d:a})}function E(a){return Q.test(a)&&"on"!==a.toLowerCase().slice(0,2)}function F(){return((new Date).getTime()+Math.random()+"").substr(-9)}function G(a){a=a||document,a.addEventListener("contextmenu",function(a){return a.preventDefault(),!1},!1)}function H(){window.addEventListener&&window.addEventListener("pageshow",function(a){a.persisted&&window.location.reload()})}function I(a){return a.nodeType===e.DOCUMENT_NODE?a:a.ownerDocument}var J=50,K=/[\w-]+\.[\w-]+\.\w+/,L=/[^.]*./,M=c.SERVICE_NODE_ATTR,N="true",O=function(){var a=new d(document.location.href);if(a.domain()!==a.tld())return a.domain()}(),P={path:"/",domain:O},Q=/^[:A-Za-z_][:A-Za-z0-9_.-]*$/;return{log:a.noop,noop:a.noop,derive:h,getUrlVars:i,getUrlVar:j,getHashVar:k,proxyMethods:l,injectAsync:m,isSubdomain:q,raiseDomainLevel:r,walkNodes:s,isSameWindow:f.isSameWindow,markServiceNode:v,unmarkServiceNode:w,getServiceNodes:u,isServiceNode:x,isHiddenInput:y,getServiceParent:z,setRootDomainCookie:A,removeRootDomainCookie:B,nl2br:t,fetchLocalization:C,supplant:D,getCookieDomain:g,getPageBaseUrl:o,getPageUrl:p,isValidAttribute:E,getRandomString:F,blockContextMenu:G,disableSafariBackForwardCache:H,getDocumentObject:I}}),define("cb/app/master/masterApi",[],function(){"use strict";function a(a){return{VERSION:"8.5.102.05",startSession:a.startSession,downgradeMode:a.downgradeMode,exitSession:a.exitSession,isBrowserSupported:a.isBrowserSupported,markServiceElement:a.markServiceElement,onInitialized:a.on.ready,onAgentJoined:a.on.agentJoined,onAgentNavigated:a.on.navigationInitiated,onModeChanged:a.on.modeChanged,onModeUpgradeRequested:a.on.modeUpgradeRequested,onNavigationFailed:a.on.navigationFailed,onMaskedElement:a.on.elementMasked,onIframe:a.on.iframeDetected,onSessionStarted:a.on.sessionStarted,onSessionEnded:a.on.disconnected}}function b(a){return{VERSION:"8.5.102.05",markServiceElement:a.markServiceElement,onMaskedElement:a.on.elementMasked,onIframe:a.on.iframeDetected}}return{CobrowseApi:a,ChildCobrowseApi:b}}),define("support",["jquery","underscore","util"],function(a,b,c){"use strict";var d,e,f,g,h,i,j;d=!0,e=document.createTextNode("");try{e.customProp=1}catch(a){c.log("Custom properties on text nodes are not supported ",a),d=!1}e=null,j=!!document.addEventListener,f=!0;try{Object.defineProperty(document.createElement("div"),"style",{configurable:!0})}catch(a){c.log("Node accessors are not configurable: ",a),f=!1}return g=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,h=document.styleSheets[0]&&b.isObject(document.styleSheets[0].media),i=function(){try{for(var b,d="i"+(new Date).getTime(),e=a('<div id="'+d+'"></div>'),f=a('<style type="text/css"></style>'),g=4095,h="";g--;)h+="#"+d+"{ color: rgb(255, 255, 255) }\n";return h+="#"+d+" { color: rgb(0, 0, 0) !important }\n",f.html(h).appendTo("head"),e.appendTo("body"),b="rgb(0, 0, 0)"===a(e).css("color"),f.remove(),e.remove(),b}catch(a){return c.log("Failed to check long stylesheets support: ",a),!1}}(),{textNodeCustomProps:d,w3cEvents:j,configurableNodeProperties:f,mutationObservers:!b.isUndefined(g),dom2Stylesheets:h,longStylesheets:i}}),define("cb/environment",["jquery","util","cb/lib/contexts","cb/constants","URI"],function(a,b,c,d,e){"use strict";function f(){var a;if(n)return b.log("returning cached slave top context"),n;for(a=window;!/slave.html$/.test(a.location.pathname);){if(b.log("current window is not top, going up; pathname: ",a.location.pathname),p(window.top,a))throw new Error("slave.html window is not found");a.Date(),a=a.parent}return b.log("got top window: ",a),n=a}function g(){return f().location.href.match(/.*\/cobrowse/)[0]}function h(){return p(f(),window)}function i(a,b){var d=a===r?f:c.getTopContext;return function(){return d()[b]}}function j(a,b){var d=a===r?f:c.getTopContext;return function(a){d()[b]=a}}function k(c,d){var e=a(c),f=e.attr(s);return f?b.log("IFRAME IS ALREADY INDEXED WITH ID ",f):(f=d(),e.attr(s,f)),Number(f)}function l(){var a=Number(window.frameElement.getAttribute(s));if(b.log("CONTEXT ID IS SET TO: ",a),!a)throw new Error("Unknown context id");return a}function m(){var a;try{a=new e(document.location.href).domain()}catch(a){b.log("WARN: UNABLE TO READ DOCUMENT DOMAIN")}if(!a)return void b.log("NOT SETTING DOCUMENT DOMAIN - NO VALID DOMAIN. IFRAMES SYNCHRONIZATION MAY BE LIMITED");document.domain=a,b.log("DOCUMENT DOMAIN SET TO: ",a)}var n,o,p=b.isSameWindow,q=d.userRoles.MASTER,r=d.userRoles.SLAVE,s=d.IFRAME_INDEX_PROP,t=d.MASTER_GLOBAL_NAME,u=d.SLAVE_GLOBAL_NAME;return o=function(){var b=a("script[data-gcb-url]").attr("data-gcb-url");return b=new e(b),b.is("absolute")||(b=b.absoluteTo(document.location.href)),b=b.toString().replace(/\/$/,""),function(){return b}}(),{setDocumentDomain:m,master:{getTopContext:c.getTopContext,isTopmostContext:c.isTopContext,getBaseUrl:o,provideTopmostApi:i(q,t),registerTopmostApi:j(q,t),indexIframeIfNotYet:k},slave:{getBaseUrl:g,getTopContext:f,isVirtualMonitorContext:h,provideTopmostApi:i(r,u),registerTopmostApi:j(r,u),extractContextId:l}}}),function(a){function b(a,b,c,d,e){this._listener=b,this._isOnce=c,this.context=d,this._signal=a,this._priority=e||0}function c(a,b){if("function"!=typeof a)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",b))}function d(){this._bindings=[],this._prevParams=null;var a=this;this.dispatch=function(){d.prototype.dispatch.apply(a,arguments)}}b.prototype={active:!0,params:null,execute:function(a){var b,c;return this.active&&this._listener&&(c=this.params?this.params.concat(a):a,b=this._listener.apply(this.context,c),this._isOnce&&this.detach()),b},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},d.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(a,c,d,e){var f,g=this._indexOfListener(a,d);if(-1!==g){if(f=this._bindings[g],f.isOnce()!==c)throw new Error("You cannot add"+(c?"":"Once")+"() then add"+(c?"Once":"")+"() the same listener without removing the relationship first.")}else f=new b(this,a,c,d,e),this._addBinding(f);return this.memorize&&this._prevParams&&f.execute(this._prevParams),f},_addBinding:function(a){var b=this._bindings.length;do{--b}while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);this._bindings.splice(b+1,0,a)},_indexOfListener:function(a,b){for(var c,d=this._bindings.length;d--;)if(c=this._bindings[d],c._listener===a&&c.context===b)return d;return-1},has:function(a,b){return-1!==this._indexOfListener(a,b)},add:function(a,b,d){return c(a,"add"),this._registerListener(a,!1,b,d)},addOnce:function(a,b,d){return c(a,"addOnce"),this._registerListener(a,!0,b,d)},remove:function(a,b){c(a,"remove");var d=this._indexOfListener(a,b);return-1!==d&&(this._bindings[d]._destroy(),this._bindings.splice(d,1)),a},removeAll:function(){for(var a=this._bindings.length;a--;)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(a){if(this.active){var b,c=Array.prototype.slice.call(arguments),d=this._bindings.length;if(this.memorize&&(this._prevParams=c),d){b=this._bindings.slice(),this._shouldPropagate=!0;do{d--}while(b[d]&&this._shouldPropagate&&!1!==b[d].execute(c))}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var e=d;e.Signal=d,"function"==typeof define&&define.amd?define("signals",[],function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:a.signals=e}(this),define("cb/transport/clients/contextClient",["underscore","../../constants"],function(a,b){"use strict";function c(b,c){function e(a,d,e){d.contextId=c,b.publish(a,d,e)}function f(){return c}function g(a){return d.SERVICE_CONTEXT+"/"+c+a}var h=this;a.extend(h,{publish:e,createContextChannel:g,getContextId:f,addListeners:b.addListeners})}var d=b.channels;return c}),define("cb/transport/nodesPacker",["underscore","util","cb/constants"],function(a,b,c){"use strict";function d(){function d(b){return a.map(b,function(b){return a.isNumber(b)?b:f(b)})}function e(b){return a.map(b,function(b){return a.isNumber(b)?b:g(b)})}function f(c){var e={};return a.each(c,function(c,f){var g=i[f];a.isString(g)?e[g]=f===k?d(c):c:b.log("ERROR! TRANSPORT KEY FOR DOM MESSAGE KEY: ",f," - NOT FOUND.")}),e}function g(c){var d={};return a.each(c,function(c,f){var g=j[f];a.isString(g)?d[g]=g===k?e(c):c:b.log("ERROR! DOM MESSAGE KEY FOR TRANSPORT KEY: ",f," - NOT FOUND.")}),d}var h=this,i=c.DOM_MESSAGE_KEYS_TO_TRANSPORT_KEYS_MAP,j=a.invert(c.DOM_MESSAGE_KEYS_TO_TRANSPORT_KEYS_MAP),k=c.DOM_MESSAGE_CHILD_NODES_KEY;a.extend(h,{packNodesArray:d,unpackNodesArray:e,packNode:f,unpackNode:g})}return d}),define("cb/transport/domInitializeMessagePacker",["underscore"],function(a){"use strict";function b(b){function c(c){var d={};return a.each(c,function(a,c){"dom"!==c?d[c]=a:(d.dom=[],d.dom[0]=a[0],d.dom[1]=b.packNodesArray(a[1]))}),d}function d(c){var d={};return a.each(c,function(a,c){"dom"!==c?d[c]=a:(d.dom=[],d.dom[0]=a[0],d.dom[1]=b.unpackNodesArray(a[1]))}),d}var e=this;a.extend(e,{packDomMessage:c,unpackDomMessage:d})}return b}),define("cb/transport/domChangeMessagePacker",["underscore"],function(a){"use strict";function b(b){function c(c){var d={};return a.each(c,function(c,e){"args"!==e?d[e]=c:d.args=a.map(c,b.packNodesArray)}),d}function d(c){var d={};return a.each(c,function(c,e){"args"!==e?d[e]=c:d.args=a.map(c,b.unpackNodesArray)}),d}var e=this;a.extend(e,{packDomMessage:c,unpackDomMessage:d})}return b}),define("cb/transport/clients/masterDomClient",["jquery","underscore","signals","util","cb/constants","cb/transport/nodesPacker","cb/transport/domInitializeMessagePacker","cb/transport/domChangeMessagePacker"],function(a,b,c,d,e,f,g,h){"use strict";function i(a){function i(a){d.log("TOPMOST CLIENT GOT MESSAGE FROM AGENT: ",a),o.slaveContextReady.dispatch([a.data.userId])}function k(a){var b=a.command;return b===p?t.packDomMessage(a):b===q||b===r?u.packDomMessage(a):(d.log("ERROR! UNKNOWN DOM MESSAGE TYPE: ",b," CANNOT PACK."),a)}function l(b){var c=k(b);a.publish(j.CONTEXT_DOM,c,function(a){!a.successful&&a.failure.cbTimeout&&o.deliveryTimeout.dispatch()})}var m=this,n="/service/context/"+a.getContextId()+"/ready",o={slaveContextReady:new c,deliveryTimeout:new c},p=e.DOM_MESSAGE_TYPE.INITIALIZE,q=e.DOM_MESSAGE_TYPE.APPLY_CHANGED,r=e.DOM_MESSAGE_TYPE.UPDATE_SIZE,s=new f,t=new g(s),u=new h(s),v={};v[n]=i,a.addListeners(v),b.extend(m,{on:o,publishDOM:l})}var j=e.channels;return i}),define("cb/transport/clients/scrollClient",["underscore","util","signals","cb/constants"],function(a,b,c,d){"use strict";function e(b){function d(a){i.scrollReceived.dispatch(a.data)}function e(a){b.publish(f.CONTEXT_SCROLL,a)}var g=this,h=b.createContextChannel("/scroll"),i={scrollReceived:new c},j={};j[h]=d,b.addListeners(j),a.extend(g,{on:i,publishScroll:e})}var f=d.channels;return e}),define("cb/transport/clients/mouseClient",["underscore","util","signals","cb/constants"],function(a,b,c,d){"use strict";function e(b){function d(a){i.mouseMessageReceived.dispatch(a.data)}function e(a){b.publish(f.CONTEXT_MOUSE,a)}var g=this,h=b.createContextChannel("/mouse"),i={mouseMessageReceived:new c},j={};j[h]=d,b.addListeners(j),a.extend(g,{on:i,publishMouseMessage:e})}var f=d.channels;return e}),define("cb/lib/messageOrderer",["underscore","signals","util"],function(a,b,c){"use strict";function d(){function b(a){g[a]||(g[a]={})}function c(a,b){return g[a]&&g[a][b]}function d(a,b){g[a][b]=null}function e(a,c,d){b(a),g[a][c]=d}var f=this,g={};a.extend(f,{getMessage:c,removeMessage:d,addMessage:e})}function e(){function e(a){if(!a.snapshotId||!a.changeId)throw c.log("Invalid message to enqueue: ",a),new Error("Trying to enqueue a message without necessary attributes")}function f(){return p+1}function g(){p=0}function h(a){var b=a.snapshotId,c=a.changeId;q.addMessage(b,c,a)}function i(){var a=f(),b=q.getMessage(o,a);b&&(j(b),q.removeMessage(o,p),i())}function j(a){p=a.changeId,n.dispatch(a)}function k(a){o=a,g(),i()}function l(a){e(a),a.snapshotId===o&&a.changeId===f()?(j(a),i()):h(a)}var m=this,n=new b,o=null,p=0,q=new d;a.extend(m,{setCurrentSnapshotId:k,enqueueMessage:l,on:{messageReleased:n}})}return e}),define("cb/transport/clients/inputClient",["underscore","util","signals","cb/constants","cb/lib/messageOrderer"],function(a,b,c,d,e){"use strict";function f(f){function h(a){return a.command===p.SNAPSHOT}function i(a){f.publish(g.CONTEXT_INPUT,a),b.log("PUBLISHED INPUT VALUE: ",a),h(a)&&n.setCurrentSnapshotId(a.snapshotId)}function j(a){var c=a.data;b.log("RECEIVED INPUT VALUE:",c),h(c)?(m.messageReceived.dispatch(c),n.setCurrentSnapshotId(c.snapshotId)):n.enqueueMessage(c)}var k=this,l=f.createContextChannel("/input"),m={messageReceived:new c},n=new e,o={},p=d.INPUT_MESSAGE_TYPES;o[l]=j,n.on.messageReleased.add(function(a){m.messageReceived.dispatch(a)}),f.addListeners(o),a.extend(k,{on:m,publishMessage:i})}var g=d.channels;return f}),define("cb/transport/clients/windowDialogClient",["underscore","util","signals","cb/constants"],function(a,b,c,d){"use strict";function e(d){function e(a){b.log("GOT WINDOW DIALOG START, ",a.data),m.dialogStartReceived.dispatch(a.data)}function g(a){b.log("GOT WINDOW DIALOG END, ",a.data),m.dialogEndReceived.dispatch(a.data)}function h(a){b.log("PUBLISH DIALOG START, ",a),d.publish(f.WINDOW_DIALOG_START,a)}function i(a){b.log("PUBLISH DIALOG END, ",a),d.publish(f.WINDOW_DIALOG_END,a)}var j=this,k="/service/context/"+d.getContextId()+"/window/dialog/start",l="/service/context/"+d.getContextId()+"/window/dialog/end",m={dialogStartReceived:new c,dialogEndReceived:new c},n={};n[k]=e,n[l]=g,d.addListeners(n),a.extend(j,{on:m,publishDialogStart:h,publishDialogEnd:i})}var f=d.channels;return e}),define("cb/transport/clients/coreCssClient",["underscore","signals"],function(a,b){"use strict";function c(c){function d(a){var b=a.data||{};g.gotProcessedCss.dispatch(b)}var e=this,f=c.createContextChannel("/css"),g={gotProcessedCss:new b},h={};h[f]=d,c.addListeners(h),a.extend(e,{on:g})}return c}),define("cb/transport/clients/masterCssClient",["underscore","signals","cb/constants","./coreCssClient"],function(a,b,c,d){"use strict";function e(b){function e(a){b.publish(h,a)}function f(a){a.command=j,b.publish(i,a)}var g=this,h=c.channels.CONTEXT_CSS,i=c.channels.CONTEXT_DOM,j=c.DOM_MESSAGE_TYPE.SET_CSS,k=new d(b);a.extend(g,k,{publishServerCss:e,publishBrowserCss:f})}return e}),define("cb/services/scroll/scrollBlocker",["underscore","util"],function(a,b){"use strict";function c(){function c(b){a.isNumber(k[b])?k[b]++:k[b]=1}function d(c){a.isNumber(k[c])&&k[c]>0?k[c]--:b.log("WARN! ATTEMPT TO RELEASE SCROLL BLOCKING ON ELEMENT WHEN IT IS NOT BLOCKED, NODE ID: ",c)}function e(){l++}function f(){l>0?l--:b.log("WARN! ATTEMPT TO RELEASE SCROLL BLOCKING ON WINDOW WHEN IT IS NOT BLOCKED")}function g(b){return a.isNumber(k[b])&&k[b]>0}function h(){return l>0}function i(){l=0,k={}}var j=this,k={},l=0;a.extend(j,{addBlocking:c,releaseBlocking:d,addBlockingForWindow:e,releaseBlockingForWindow:f,isBlocked:g,isWindowBlocked:h,reset:i})}return c}),define("cb/services/scroll/scrollStrategy",["underscore","cb/constants"],function(a,b){"use strict";function c(c,d){function e(a){c===b.userRoles.MASTER&&(a.targetUsersIds=d.users.pluck("userId"))}var f=this;a.extend(f,{addUserIdsToMessageIfNeeded:e})}return c}),define("cb/services/scroll/windowScrollStrategy",["underscore","cb/constants","util","cb/services/scroll/scrollStrategy"],function(a,b,c,d){"use strict";function e(e,f,g){function h(){var c={type:b.WINDOW_SCROLL};return a.extend(c,j())}function i(){var a;return e.isWindowBlocked()?null:(a=h(),o.addUserIdsToMessageIfNeeded(a),c.log("PUBLISHING SCROLL FOR WINDOW:",a.top,a.left),a)}function j(){return{top:window.pageYOffset,left:window.pageXOffset}}function k(a,b){c.log("APPLYING SCROLL FOR WINDOW:",a,b),window.scrollTo(b,a)}function l(a,b){k(a,b)}function m(a){e.addBlockingForWindow(),k(a.top,a.left),window.setTimeout(function(){e.releaseBlockingForWindow()},b.SCROLL_REACTIVATION_DELAY)}var n=this,o=new d(f,g);a.extend(n,{generateMessage:i,handleMessage:m,applyScrollNoBlocking:l,getWindowScroll:j})}return e}),define("cb/services/scroll/elementScrollStrategy",["underscore","cb/constants","util","cb/services/scroll/scrollStrategy"],function(a,b,c,d){"use strict";function e(e,f,g){function h(a,c){return{type:b.ELEMENT_SCROLL,nodeId:c,scrollTop:a.scrollTop,scrollLeft:a.scrollLeft}}function i(a){var b,d=n(a);return d?e.isBlocked(d)?null:(b=h(a,d),q.addUserIdsToMessageIfNeeded(b),c.log("PUBLISHING SCROLL FOR ELEMENT WITH ID",b.nodeId,":",b.scrollTop,b.scrollLeft),b):(c.log("WARN! ID IS NOT FOUND FOR NODE:",a,"CANNOT SEND SCROLL EVENT"),null)}function j(a,b){n=a,o=b}function k(a){var d=a.nodeId,f=o(d);if(!f)return void c.log("WARN! TARGET FOR SCROLL EVENT IS ABSENT, NODE ID:",d);e.addBlocking(d),l(f,a.scrollTop,a.scrollLeft),window.setTimeout(function(){e.releaseBlocking(d)},b.SCROLL_REACTIVATION_DELAY)}function l(a,b,d){c.log("APPLYING SCROLL FOR ELEMENT",a,":",b," ",d),a.scrollTop=b,a.scrollLeft=d}function m(a,b,d){var e=o(a);if(!e)return void c.log("WARN! TARGET FOR SCROLL EVENT IS ABSENT, NODE ID:",a);l(e,b,d)}var n,o,p=this,q=new d(f,g);a.extend(p,{generateMessage:i,handleMessage:k,applyScrollNoBlocking:m,updateNodeAndIdGetters:j})}return e}),define("cb/services/scroll/scrollService",["jquery","underscore","util","cb/constants","cb/services/scroll/scrollBlocker","cb/services/scroll/windowScrollStrategy","cb/services/scroll/elementScrollStrategy"],function(a,b,c,d,e,f,g){"use strict";function h(h,m,n,o){function p(){q(F)}function q(a){var b=r(a);null!==b&&m.publishScroll(b)}function r(a){return a===document?J.generateMessage():K.generateMessage(a)}function s(a){h===j&&x()||(F&&F!==a.target&&q(F),F=a.target,E())}function t(){return J.getWindowScroll()}function u(a,c){J.applyScrollNoBlocking(a.top,a.left),b.each(c,function(a){K.applyScrollNoBlocking(a.nodeId,a.scrollTop,a.scrollLeft)})}function v(a){w(a).handleMessage(a)}function w(a){return a.type===d.WINDOW_SCROLL?J:K}function x(){return H.pointer&&!l}function y(){x()&&(c.log((H.pointer?"DISABLING ":"ALLOWING ")+"SCROLLING"),a("html").attr("data-gcb-pointer-mode",H.pointer?"true":"false"))}function z(a){H=a,y()}function A(a,b){K.updateNodeAndIdGetters(a,b)}function B(a){if(c.log("ACTIVATING SCROLL SERVICE"),I.reset(),a.publish&&window.addEventListener("scroll",s,!0),a.listen&&m.on.scrollReceived.add(v),h===k&&!o)throw new Error("Session is needed for targeting, but is not provided");h===j&&(y(),n.on.modeChanged.add(z))}function C(a){window.setTimeout(function(){B(a)},d.SCROLL_REACTIVATION_DELAY)}function D(){window.removeEventListener("scroll",s,!0),m.on.scrollReceived.remove(v),n.on.modeChanged.remove(z)}var E,F,G=this,H=n.currentMode(),I=new e,J=new f(I,h,o),K=new g(I,h,o);E=b.throttle(p,i),b.extend(G,{getWindowScroll:t,applyScrollPositions:u,updateNodeAndIdGetters:A,activate:B,activateAfterPause:C,deactivate:D})}var i=70,j=d.userRoles.SLAVE,k=d.userRoles.MASTER,l=!0;return h}),define("cb/lib/dom/watcher",["jquery","underscore"],function(a,b){"use strict";function c(a){return a.nodeType===D?b.toArray(a.childNodes):[a]}function d(a){var b=a.parentNode;return null!=b?e(b,a):null}function e(a,b){var c=b.previousSibling,d=b.nextSibling;return E.createChildListRecord(a,[],[b],c,d)}function f(a){return b.isNumber(a.length)?a:[a]}function g(a,c,d){var e=F.call(arguments,3),f=c.length-1,g=function(){var h=e.concat(b.toArray(arguments));return f>=0?c[f--].apply(d,[g].concat(h)):b.isFunction(a)?a.apply(d,h):void 0};return g}function h(a,b,c){var d=function(){return g(b,d.wrappers,c||this,a).apply(r,arguments)};return d.wrappers=[],d}function i(a,c){if(b.isUndefined(c))return this[a];this[a]=c}function j(a,b,c){var d,e=Object.getOwnPropertyDescriptor(this,b);return e&&delete this[b],d=a(c),e&&Object.defineProperty(this,b,e),d}function k(a,c){b.isFunction(c.set)&&m(a,c.set),b.isFunction(c.get)&&n(a,c.get)}function l(a,c,d,e){var f=Object.getOwnPropertyDescriptor(a,c);if(!f||!b.isFunction(f.set)||!b.isArray(f.set.wrappers)){var g=b.bind(h,r,c,d,e);f={set:g(),get:g(),configurable:!0,enumerable:!1},Object.defineProperty(a,c,f)}return f}function m(a,b){a.set.wrappers.push(b)}function n(a,b){a.get.wrappers.push(b)}function o(a){return a.nodeType===B&&"object"===a.tagName.toLowerCase()&&"application/x-shockwave-flash"===a.type}function p(a){var c=F.call(arguments,1),d=function(a){for(var e=0;e<c.length;)c[e++](a);b.each(a.childNodes,d)};b.each(f(a),d)}function q(f,g){function h(a){var b,c=function(){return b||(b=S(a)),b};return c.isProxy=!0,c}function i(a){if(!o(a)){var b=a.nodeType;b!==B&&b!==C&&b!==D||(a.appendChild=q,a.insertBefore=r,a.removeChild=s,a.replaceChild=x),a.nodeType===B&&(a.setAttribute=K,a.setAttributeNS=L,!a.nodeName||"TABLE"!==a.nodeName&&"TBODY"!==a.nodeName||(a.insertRow=F),N(a,"class"),P(a),Q(a))}}function n(a){p(a,i)}function q(a){return J.call(this,a,null,u)}function r(a,b){return J.call(this,a,b,t)}function s(a){var b=e(this,a),c=w.call(this,a);return g(b),c}function x(a,b){var e=b.nextSibling;e===a&&(e=a.nextSibling);var f=d(a),h=b.previousSibling,i=c(a),j=E.createChildListRecord(this,i,[b],h,e),k=v.call(this,a,b);return n(i),f&&g(f),g(j),k}function F(a){var c=this,d=E.createChildListRecord(c,null,[],null,null),e=b.toArray(c.childNodes),f=A.call(c,a),h=b.difference(b.toArray(c.childNodes),e);return h.push(f),n(h),d.addedNodes=h,g(d),f}function J(a,b,e){var f=d(a),h=b?b.previousSibling:this.lastChild,i=c(a),j=E.createChildListRecord(this,i,[],h,b),k=e.call(this,a,b);return n(i),f&&g(f),g(j),k}function K(a,b){var c=this.getAttribute(a),d=E.createAttributeRecord(this,a,null,c);y.call(this,a,b),g(d)}function L(a,b,c){var d=this.getAttributeNS(a,b),e=E.createAttributeRecord(this,b,a,d);z.call(this,a,b,c),g(e)}function M(a){return function(b,c,d){var e=this.getAttribute(a),f=E.createAttributeRecord(this,a,null,e);b(d),g(f)}}function N(b,c){var d=a.propFix[c]||c;G(b,d,{set:M(c)})}function O(a){var b=Object.getOwnPropertyDescriptor(a,"style");return!!(b&&b.get&&b.get.isProxy)}function P(a){O(a)||Object.defineProperty(a,"style",{get:h(a),configurable:!0,enumerable:!1})}function Q(a){G(a,"innerHTML",{set:function(c,d,e){var f=b.clone(a.childNodes),h=E.createChildListRecord(a,[],f,null,null);c(e);var i=b.clone(a.childNodes);n(i),h.addedNodes=i,g(h)}})}var R=M("style"),S=function(){var a=function(a,c){if(b.isUndefined(c))return this.style[a];this.style[a]=c},c=function(a,b,c){return j.call(this,a,"style",c)},d={get:c,set:c};return function(b){for(var c,e={},f=0;f<I;f++)c=l(e,H[f],a,b),k(c,d),m(c,R);return e}}();this.disconnect=function(){},p(f,i)}var r=window,s=r.document,t=s.insertBefore,u=s.appendChild,v=s.replaceChild,w=s.removeChild,x=s.createElement("table"),y=x.setAttribute,z=x.setAttributeNS,A=x.insertRow,B=1,C=9,D=11,E={createChildListRecord:function(a,b,c,d,e){return{type:"childList",target:a,addedNodes:b,removedNodes:c,previousSibling:d,nextSibling:e,attributeName:null,attributeNamespace:null,oldValue:null}},createAttributeRecord:function(a,b,c,d){return{type:"attributes",target:a,attributeName:b,attributeNamespace:c,oldValue:d,addedNodes:[],removedNodes:[],previousSibling:null,nextSibling:null}}},F=Array.prototype.slice,G=function(){var a={get:j,set:j};return function(c,d,e){var f=l(c,d,i);k(f,a),b.isObject(e)&&k(f,e)}}(),H=["animation","animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction","backfaceVisibility","background","backgroundAttachment","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPosition","backgroundRepeat","backgroundSize","border","borderBottom","borderBottomColor","borderBottomLeftRadius","borderBottomRightRadius","borderBottomStyle","borderBottomWidth","borderCollapse","borderColor","borderImage","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderLeft","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRadius","borderRight","borderRightColor","borderRightStyle","borderRightWidth","borderSpacing","borderStyle","borderTop","borderTopColor","borderTopLeftRadius","borderTopRightRadius","borderTopStyle","borderTopWidth","borderWidth","bottom","boxShadow","captionSide","clear","clip","clipPath","clipRule","color","colorInterpolation","colorInterpolationFilters","content","counterIncrement","counterReset","cssFloat","cssText","cursor","direction","display","dominantBaseline","emptyCells","fill","fillOpacity","fillRule","filter","floodColor","floodOpacity","font","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","height","imageRendering","imeMode","left","letterSpacing","lightingColor","lineHeight","listStyle","listStyleImage","listStylePosition","listStyleType","margin","marginBottom","marginLeft","marginRight","marginTop","marker","markerEnd","markerMid","markerOffset","markerStart","marks","mask","maxHeight","maxWidth","minHeight","minWidth","opacity","orphans","outline","outlineColor","outlineOffset","outlineStyle","outlineWidth","overflow","overflowX","overflowY","padding","paddingBottom","paddingLeft","paddingRight","paddingTop","page","pageBreakAfter","pageBreakBefore","pageBreakInside","parentRule","perspective","perspectiveOrigin","pointerEvents","position","quotes","resize","right","shapeRendering","size","stopColor","stopOpacity","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","tableLayout","textAlign","textAnchor","textDecoration","textIndent","textOverflow","textRendering","textShadow","textTransform","top","transform","transformOrigin","transformStyle","transition","transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction","unicodeBidi","vectorEffect","verticalAlign","visibility","whiteSpace","widows","width","wordBreak","wordSpacing","wordWrap","zIndex","zoom"],I=H.length;return q}),define("cb/lib/dom/mutationObserverPolyfill",["jquery","underscore","./watcher","util","support","./Node"],function(a,b,c,d,e,f){"use strict";function g(a,b){this.observer=a,this.options=b}function h(a){return this===a.observer}function i(b){return a(b).data(q)||[]}function j(a,b){r(a,b(i(a)))}function k(a,b){j(a,function(a){return a.push(b),a})}function l(a,c){j(a,function(a){var d=b.indexOf(a,c);return d>=0&&a.splice(d,1),a})}function m(a,b,c){k(a,new g(b,c))}function n(a,c){j(a,function(a){return b.reject(a,h,c)})}function o(a){function c(){e=b.defer(d)}function d(){a(),e&&c()}var e;this.scheduleIfAbsent=function(){e||c()},this.cancel=function(){e&&(clearTimeout(e),e=0)}}var p=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(!b.isUndefined(p))return p;var q="_mutation_observers_",r=function(){function b(b,c){a(b).data(q,c)}return e.textNodeCustomProps?b:function(a,c){a.nodeType!==f.TEXT_NODE&&b(a,c)}}(),s=function(){function a(a){if(!0!==a.childList&&!0!==a.attributes&&!0!==a.characterData)throw new SyntaxError('At least one of "childList", "attributes" or "characterData" options must be true');if(!0===a.attributeOldValue&&!0!==a.attributes)throw new SyntaxError("attributeOldValue option is set while attributes option is NOT set");if(!b.isEmpty(a.attributeFilter)&&!0!==a.attributes)throw new SyntaxError("attributeFilter option is specified while attributes option is NOT set");if(!0===a.characterDataOldValue&&!0!==a.characterData)throw new SyntaxError("characterDataOldValue option is set while characterData option is NOT set")}function c(a){d.proxyMethods(this,a,["observe","disconnect","takeRecords"])}function e(d,e){var g,j=f++,k=[],l=[];this.getAPI=function(){return g},this.getCallback=function(){return e},this.getId=function(){return j},this.queueRecord=function(a){l.push(a)},this.replaceLastRecord=function(a){l[l.length-1]=a},this.observe=function(c,e){e=e||{},a(e);var f=b.find(i(c),h,this);f?f.options=e:(m(c,this,e),k.push(c)),d.registerObserver(this)},this.disconnect=function(){b.each(k,function(a){n(a,this)},this),k=[],l=[],d.unregisterObserver(this)},this.takeRecords=function(){var a=l;return l=[],a},g=new c(this)}var f=1;return e}(),t=function(){function a(a,b){g.call(this,b.observer,b.options),this.node=a}function d(){function c(a){b.each(a.transientROs,function(a){l(a.node,a)}),a.transientROs=[]}function d(){var a=f.slice(0),e=!1;b.each(a,function(a){var b=a.takeRecords(),d=a.getAPI();c(a),b.length>0&&(e=!0,a.getCallback().call(d,b,d))}),e&&d()}var f=[],g=new o(d);new e(this),this.registerObserver=function(a){b.indexOf(f,a)<0&&(a.transientROs=[],f.push(a)),g.scheduleIfAbsent()},this.unregisterObserver=function(a){var d=b.indexOf(f,a);d>=0&&(c(a),f.splice(d,1),0===f.length&&g.cancel())},this.registerAsTransientObserver=function(c,d){if(b.indexOf(f,d.observer)>=0){var e=new a(c,d);k(c,e),d.observer.transientROs.push(e)}}}var e=function(){function a(a){function e(c){var e=c.target;f(e,d(c),!1);var g=c.removedNodes;g.length&&b.each(g,function(b){f(e,function(c){a.registerAsTransientObserver(b,c)},!0)})}var g=new c(document,e);this.disconnect=function(){g&&(g.disconnect(),g=null)}}function d(a){var c,d={};switch(a.type){case"childList":return function(b){var c,f;!0===b.options.childList&&(c=b.observer,f=c.getId(),d[f]||(d[f]=!0,e(a,c)))};case"attributes":return c=b.clone(a),c.oldValue=null,function(f){var g,h,i,j,k=f.options,l=k.attributeFilter;!0===k.attributes&&(!l||b.contains(l,a.attributeName)&&null===a.attributeNamespace)&&(g=f.observer,h=g.getId(),i=d[h],j=k.attributeOldValue,i?j&&i.withoutOldValue&&(i.withoutOldValue=!1,f.observer.replaceLastRecord(a)):(d[h]={withoutOldValue:!j},e(j?a:c,g)))};default:return function(){}}}function e(a,b){b.queueRecord(a)}function f(a,b,c){function d(a){!0===a.options.subtree&&b(a)}var e;for(c?e=a:(g(a,b),e=a.parentNode);e;e=e.parentNode)g(e,d)}function g(a,c){b.each(i(a),c)}return a}();return d}(),u=function(){function a(a){return d=new t,e.createMutationObserver=c,c(a)}function c(a){return new s(d,a).getAPI()}var d,e={};return b.extend(e,{createMutationObserver:a})}();return function(a){return u.createMutationObserver(a)}}),define("cb/lib/dom/ieNodeMap",[],function(){"use strict";function a(){this.map={}}var b=Object.prototype.hasOwnProperty,c=1;return a.prototype={set:function(a,d){var e,f,g=this.map;for(f in g)if(b.call(g,f)&&g[f].k===a){e=f;break}e||(e=c++),g[e]={k:a,v:d}},get:function(a){var c,d=this.map;for(c in d)if(b.call(d,c)&&d[c].k===a)return d[c].v},has:function(a){var c,d=this.map;for(c in d)if(b.call(d,c)&&d[c].k===a)return!0;return!1},delete:function(a){var c,d=this.map;for(c in d)b.call(d,c)&&d[c].k===a&&delete d[c]},keys:function(){var a,c=this.map,d=[];for(a in c)b.call(c,a)&&d.push(c[a].k);return d}},a}),define("mutation_summary",["cb/lib/dom/mutationObserverPolyfill","underscore","support","cb/lib/dom/ieNodeMap"],function(a,b,c,d){"use strict";function e(a){return!a[s]&&(a[s]=t++,!0)}function f(){this.map_={}}function g(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function h(a,b,c){this.rootNode=a,this.elementFilter=b,this.calcReordered=c}function i(a){function c(){f&&(g&&(f.qualifiers.push(g),g=void 0),i.push(f)),f={qualifiers:[]}}function d(){g&&f.qualifiers.push(g),g={}}function e(a){return'"'+a.replace(/"/,'\\"')+'"'}for(var f,g,h,i=[],j=/\s/,k="Invalid or unsupported selector syntax.",l=1,m=2,n=3,o=4,p=5,q=6,r=7,s=8,t=9,u=10,v=11,w=12,x=13,y=14,z=l,C=0;C<a.length;){var D=a[C++];switch(z){case l:if(D.match(A)){c(),f.tagName=D,z=m;break}if("*"==D){c(),f.tagName="*",z=n;break}if("."==D){c(),d(),f.tagName="*",g.class=!0,z=o;break}if("#"==D){c(),d(),f.tagName="*",g.id=!0,z=o;break}if("["==D){c(),d(),f.tagName="*",g.attrName="",z=q;break}if(D.match(j))break;throw Error(k);case m:if(D.match(B)){f.tagName+=D;break}if("."==D){d(),g.class=!0,z=o;break}if("#"==D){d(),g.id=!0,z=o;break}if("["==D){d(),g.attrName="",z=q;break}if(D.match(j)){z=y;break}if(","==D){z=l;break}throw Error(k);case n:if("."==D){d(),g.class=!0,z=o;break}if("#"==D){d(),g.id=!0,z=o;break}if("["==D){d(),g.attrName="",z=q;break}if(D.match(j)){z=y;break}if(","==D){z=l;break}throw Error(k);case o:if(D.match(A)){g.attrValue=D,z=p;break}throw Error(k);case p:if(D.match(B)){g.attrValue+=D;break}if("."==D){d(),g.class=!0,z=o;break}if("#"==D){d(),g.id=!0,z=o;break}if("["==D){d(),z=q;break}if(D.match(j)){z=y;break}if(","==D){z=l;break}throw Error(k);case q:if(D.match(A)){g.attrName=D,z=r;break}if(D.match(j))break;throw Error(k);case r:if(D.match(B)){g.attrName+=D;break}if(D.match(j)){z=s;break}if("~"==D){g.contains=!0,z=t;break}if("="==D){g.attrValue="",z=v;break}if("]"==D){z=n;break}throw Error(k);case s:if("~"==D){g.contains=!0,z=t;break}if("="==D){g.attrValue="",z=v;break}if("]"==D){z=n;break}if(D.match(j))break;throw Error(k);case t:if("="==D){g.attrValue="",z=v;break}throw Error(k);case u:if("]"==D){z=n;break}if(D.match(j))break;throw Error(k);case v:if(D.match(j))break;if('"'==D||"'"==D){h=D,z=x;break}g.attrValue+=D,z=w;break;case w:if(D.match(j)){z=u;break}if("]"==D){z=n;break}if("'"==D||'"'==D)throw Error(k);g.attrValue+=D;break;case x:if(D==h){z=u;break}g.attrValue+=D;break;case y:if(D.match(j))break;if(","==D){z=l;break}throw Error(k)}}switch(z){case l:case m:case n:case p:case y:c();break;default:throw Error(k)}if(!i.length)throw Error(k);return b.each(i,function(a){var c=a.tagName.toUpperCase();a.tagName!=c&&(a.caseInsensitiveTagName=c);var d=a.tagName;b.each(a.qualifiers,function(a){if(a.class)d+="."+a.attrValue;else if(a.id)d+="#"+a.attrValue;else{var b=a.attrName.toLowerCase();a.attrName!=b&&(a.caseInsensitiveAttrName=b),a.contains?d+="["+a.attrName+"~="+e(a.attrValue)+"]":(d+="["+a.attrName,a.hasOwnProperty("attrValue")&&(d+="="+e(a.attrValue)),d+="]")}}),a.selectorString=d}),i}function j(a){if("string"!=typeof a)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(!(a=a.trim()))throw Error("Invalid request opion. attribute must be a non-zero length string.");if(!a.match(C))throw Error("Invalid request option. invalid attribute name: "+a);return a}function k(a){if(!a.trim().length)throw Error("Invalid request option: elementAttributes must contain at least one attribute.");for(var c={},d={},e=a.split(/\s+/),f=0;f<e.length;f++){var g=e[f];if(g){var g=j(g);if(c.hasOwnProperty(g.toLowerCase()))throw Error("Invalid request option: observing multiple case varitations of the same attribute is not supported.");d[g]=!0,c[g.toLowerCase()]=!0}}return b.keys(d)}function l(a){var c={callback:!0,queries:!0,rootNode:!0,observeOwnChanges:!0},d={};for(var e in a)if(!(e in c))throw Error("Invalid option: "+e);if("function"!=typeof a.callback)throw Error("Invalid options: callback is required and must be a function");if(d.callback=a.callback,d.rootNode=a.rootNode||document,d.observeOwnChanges=a.observeOwnChanges,!a.queries||!a.queries.length)throw Error("Invalid options: queries must contain at least one query request object.");d.queries=[];for(var f=0;f<a.queries.length;f++){var g=a.queries[f];if(g.all){if(b.keys(g).length>1)throw Error("Invalid request option. all has no options.");d.queries.push({all:!0})}else if(g.hasOwnProperty("attribute")){var h={attribute:j(g.attribute)};if(h.elementFilter=i("*["+h.attribute+"]"),b.keys(g).length>1)throw Error("Invalid request option. attribute has no options.");d.queries.push(h)}else if(g.hasOwnProperty("element")){var l=b.keys(g).length,h={element:g.element,elementFilter:i(g.element)};if(g.hasOwnProperty("elementAttributes")&&(h.elementAttributes=k(g.elementAttributes),l--),l>1)throw Error("Invalid request option. element only allows elementAttributes option.");d.queries.push(h)}else{if(!g.characterData)throw Error("Invalid request option. Unknown query request.");if(b.keys(g).length>1)throw Error("Invalid request option. characterData has no options.");d.queries.push({characterData:!0})}}return d}function m(a){var c={};return b.each(a,function(a){b.each(a.qualifiers,function(a){a.class?c.class=!0:a.id?c.id=!0:c[a.attrName]=!0})}),b.keys(c)}function n(a){function c(a){if(!e.attributes||d){if(e.attributes=!0,e.attributeOldValue=!0,!a)return void(d=void 0);d=d||{},b.each(a,function(a){d[a]=!0,d[a.toLowerCase()]=!0})}}var d,e={childList:!0,subtree:!0};return b.each(a,function(a){if(a.characterData)return e.characterData=!0,void(e.characterDataOldValue=!0);if(a.all)return c(),e.characterData=!0,void(e.characterDataOldValue=!0);if(a.attribute)return void c([a.attribute.trim()]);a.elementFilter&&b.some(a.elementFilter,function(a){return a.className})&&c(["class"]);var d=m(a.elementFilter).concat(a.elementAttributes||[]);d.length&&c(d)}),d&&(e.attributeFilter=b.keys(d)),e}function o(a,c,d){a.elementFilter=d.elementFilter,a.filterCharacterData=d.characterData;var e={target:c,type:"summary",added:[],removed:[]};if(e.getOldParentNode=b.bind(a.getOldParentNode,a),(d.all||d.element)&&(e.reparented=[]),d.all&&(e.reordered=[]),a.getChanged(e),d.all||d.attribute||d.elementAttributes){var f=d.attribute?[d.attribute]:d.elementAttributes,g=a.getAttributesChanged(f);d.attribute?(e.valueChanged=[],g[d.attribute]&&(e.valueChanged=g[d.attribute]),e.getOldAttribute=function(b){return a.getOldAttribute(b,d.attribute)}):(e.attributeChanged=g,d.elementAttributes&&b.each(d.elementAttributes,function(a){e.attributeChanged.hasOwnProperty(a)||(e.attributeChanged[a]=[])}),e.getOldAttribute=b.bind(a.getOldAttribute,a))}if(d.all||d.characterData){var h=a.getCharacterDataChanged();e.getOldCharacterData=b.bind(a.getOldCharacterData,a),d.characterData?e.valueChanged=h:e.characterDataChanged=h}return e.reordered&&(e.getOldPreviousSibling=b.bind(a.getOldPreviousSibling,a)),e}function p(c){function d(){b.each(t,function(a){a&&a.recordPreviousState()})}function e(a){b.each(t,function(b,c){b&&b.validate(a[c])})}function f(a){if(!a||!a.length)return[];var c=new h(m,r,s);return c.processMutations(a),b.map(j.queries,function(a){return o(c,m,a)})}function g(a){return b.some(a,function(a){var c=["added","removed","reordered","reparented","valueChanged","characterDataChanged"];if(b.some(c,function(b){return a[b]&&a[b].length}))return!0;if(a.attributeChanged){if(b.some(b.keys(a.attributeChanged),function(b){return a.attributeChanged[b].length}))return!0}return!1})}var i=!1,j=l(c),k=n(j.queries),m=j.rootNode,q=j.callback,r=Array.prototype.concat.apply([],b.map(j.queries,function(a){return a.elementFilter?a.elementFilter:[]}));r.length||(r=void 0);var s=b.some(j.queries,function(a){return a.all}),t=[];p.createQueryValidator&&(t=b.map(j.queries,function(a){return p.createQueryValidator(m,a)}));var u=new a(function(a){j.observeOwnChanges||u.disconnect();var b=f(a);e(b),j.observeOwnChanges&&d(),g(b)&&q(b),j.observeOwnChanges||(d(),u.observe(m,k))});this.reconnect=function(){if(i)throw Error("Already connected");u.observe(m,k),i=!0,d()},this.disconnect=function(){if(!i)throw Error("Not connected");var a;"function"==typeof u.takeRecords?a=u.takeRecords():console.log("Warning: MutationObserver.takeRecords not implemented. Current changes cannot be reported."),u.disconnect(),i=!1;var b=f(a);if(g(b))return b},this.reconnect()}var q="matchesSelector";try{var r=document.documentElement;r.webkitMatchesSelector&&(q="webkitMatchesSelector"),r.mozMatchesSelector&&(q="mozMatchesSelector")}catch(a){}var s="__cb_mutation_summary_node_id__",t=1;f.prototype={set:function(a,b){e(a),this.map_[a[s]]={k:a,v:b}},get:function(a){if(!e(a)){var b=this.map_[a[s]];return b?b.v:void 0}},has:function(a){return!e(a)&&a[s]in this.map_},delete:function(a){e(a)||delete this.map_[a[s]]},keys:function(){var a=[];for(var b in this.map_)a.push(this.map_[b].k);return a}},c.textNodeCustomProps||(f=d);var u=0,v=1,w=2,x=3,y=4,z=5;h.prototype={getChange:function(a){var b=this.changeMap.get(a);return b||(b={target:a},this.changeMap.set(a,b)),1===a.nodeType&&(b.matchCaseInsensitive=!0),b},getParentChange:function(a){var b=this.getChange(a);return b.childList||(b.childList=!0,b.oldParentNode=null),b},handleChildList:function(a){this.childListChanges=!0,b.each(a.removedNodes,function(b){var c=this.getParentChange(b);c.added||c.oldParentNode?c.added=!1:c.oldParentNode=a.target},this),b.each(a.addedNodes,function(a){this.getParentChange(a).added=!0},this)},handleAttributes:function(a){this.attributesChanges=!0;var b=this.getChange(a.target);b.attributes||(b.attributes=!0,b.attributeOldValues={});var c=b.attributeOldValues;g(c,a.attributeName)||(c[a.attributeName]=a.oldValue)},handleCharacterData:function(a){this.characterDataChanges=!0;var b=this.getChange(a.target);b.characterData||(b.characterData=!0,b.characterDataOldValue=a.oldValue)},processMutations:function(a){function c(a,b){if(!k.has(a)){k.set(a,!0);var f=l.changeMap.get(a),m=b;if((f&&f.childList||void 0==m)&&(m=i(a)),m!=u){if(h(a),m==v)d.push(a);else if(m==x)e.push(a);else if(m==w){var n=w;f&&f.childList&&(f.oldParentNode!==a.parentNode?n=y:l.calcReordered&&j(a)&&(n=z)),g.set(a,n)}if(m!=w)for(var o=a.firstChild;o;o=o.nextSibling)c(o,m)}}}this.mutations=a,this.changeMap=new f,b.each(this.mutations,function(a){switch(a.type){case"childList":this.handleChildList(a);break;case"attributes":this.handleAttributes(a);break;case"characterData":this.handleCharacterData(a)}},this);var d=this.entered=[],e=this.exited=[],g=this.stayedIn=new f;if(this.childListChanges||this.attributesChanges){var h=b.bind(this.matchabilityChange,this),i=b.bind(this.reachabilityChange,this),j=b.bind(this.wasReordered,this),k=new f,l=this;b.each(this.changeMap.keys(),function(a){c(a)})}},getChanged:function(a){var c=b.bind(this.matchabilityChange,this);b.each(this.entered,function(b){var d=c(b);d!=v&&d!=w||a.added.push(b)}),b.each(this.stayedIn.keys(),function(b){var d=c(b);if(d==v)a.added.push(b);else if(d==x)a.removed.push(b);else if(d==w&&(a.reparented||a.reordered)){var e=this.stayedIn.get(b);a.reparented&&e==y?a.reparented.push(b):a.reordered&&e==z&&a.reordered.push(b)}},this),b.each(this.exited,function(b){var d=c(b);d!=x&&d!=w||a.removed.push(b)})},getOldParentNode:function(a){var b=this.changeMap.get(a);if(b&&b.childList)return b.oldParentNode?b.oldParentNode:null;var c=this.reachabilityChange(a);if(c==u||c==v)throw Error("getOldParentNode requested on invalid node.");return a.parentNode},getOldPreviousSibling:function(a){var b=this.childlistChanges.get(a.parentNode);if(!b||!this.wasReordered(a))throw Error("getOldPreviousSibling requested on invalid node.");return b.oldPreviousSibling.get(a)},getOldAttribute:function(a,b){var c=this.changeMap.get(a);if(!c||!c.attributes)throw Error("getOldAttribute requested on invalid node.");if(c.matchCaseInsensitive&&(b=b.toLowerCase()),!g(c.attributeOldValues,b))throw Error("getOldAttribute requested for unchanged attribute name.");return c.attributeOldValues[b]},getAttributesChanged:function(a){if(!this.attributesChanges)return{};var c,d;a&&(c={},d={},b.each(a,function(a){c[a]=!0;var b=a.toLowerCase();a!=b&&(d[b]=a)}));for(var e={},f=this.changeMap.keys(),g=0;g<f.length;g++){var h=f[g],i=this.changeMap.get(h);if(i.attributes&&(w==this.reachabilityChange(h)&&w==this.matchabilityChange(h))){var j=h,k=i.attributeOldValues;b.each(b.keys(k),function(a){var b=a;i.matchCaseInsensitive&&d&&d[a]&&(b=d[a]),c&&!c[b]||j.getAttribute(a)!=k[a]&&(e[b]||(e[b]=[]),e[b].push(j))})}}return e},getOldCharacterData:function(a){var b=this.changeMap.get(a);if(!b||!b.characterData)throw Error("getOldCharacterData requested on invalid node.");return b.characterDataOldValue},getCharacterDataChanged:function(){if(!this.characterDataChanges)return[];for(var a=this.changeMap.keys(),b=[],c=0;c<a.length;c++){var d=a[c];if(w==this.reachabilityChange(d)&&w==this.matchabilityChange(d)){var e=this.changeMap.get(d);e.characterData&&d.textContent!=e.characterDataOldValue&&b.push(d)}}return b},reachabilityChange:function(a){function b(a){var b=g.get(a);if(b&&b.childList){if(b.oldParentNode)return b.oldParentNode;if(b.added)return null}return a.parentNode}function c(a){if(a===e)return!0;if(!a)return!1;var b=h.get(a);return void 0===b&&(b=c(a.parentNode),h.set(a,b)),b}function d(a){if(a===e)return!0;if(!a)return!1;var c=i.get(a);return void 0===c&&(c=d(b(a)),i.set(a,c)),c}this.reachableCache=this.reachableCache||new f,this.wasReachableCache=this.wasReachableCache||new f;var e=this.rootNode,g=this.changeMap,h=this.reachableCache,i=this.wasReachableCache;return c(a)?d(a)?w:v:d(a)?x:u},checkWasMatching:function(a,c,d){var e=this.changeMap.get(a);if(!e||!e.attributeOldValues)return d;var f=c.tagName;if(e.matchCaseInsensitive&&"*"!=f&&g(c,"caseInsensitiveTagName")&&(f=c.caseInsensitiveTagName),"*"!=f&&f!=a.tagName)return!1;var h=e.attributeOldValues;if(!b.some(c.qualifiers,function(a){return a.class?g(h,"class"):a.id?g(h,"id"):e.matchCaseInsensitive&&g(a,"caseInsensitiveAttrName")?g(h,a.caseInsensitiveAttrName):g(h,a.attrName)}))return d;for(var i=0;i<c.qualifiers.length;i++){var j,k=c.qualifiers[i];j=k.class?"class":k.id?"id":e.matchCaseInsensitive&&g(k,"caseInsensitiveAttrName")?k.caseInsensitiveAttrName:k.attrName;var l=!!k.class||k.contains,m=g(h,j)?h[j]:a.getAttribute(j);if(null==m)return!1;if(k.hasOwnProperty("attrValue")){if(!l&&k.attrValue!==m)return!1;if(!b.some(m.split(" "),function(a){return a==k.attrValue}))return!1}}return!0},matchabilityChange:function(a){function c(a){this.matchCache||(this.matchCache={}),this.matchCache[a.selectorString]||(this.matchCache[a.selectorString]=new f);var b=this.matchCache[a.selectorString],c=b.get(d);if(void 0!==c)return c;var e=d[q](a.selectorString),g=this.checkWasMatching(d,a,e);return c=e?g?w:v:g?x:u,b.set(d,c),c}if(this.filterCharacterData)switch(a.nodeType){case Node.COMMENT_NODE:case Node.TEXT_NODE:return w;default:return u}if(!this.elementFilter)return w;if(a.nodeType!==Node.ELEMENT_NODE)return u;for(var d=a,e=b.map(this.elementFilter,c,this),g=u,h=0;g!=w&&h<e.length;){switch(e[h]){case w:g=w;break;case v:g=g==x?w:v;break;case x:g=g==v?w:x}h++}return g},processChildlistChanges:function(){function a(a){var b=c.get(a);return b||(b={added:new f,removed:new f,maybeMoved:new f,oldPrevious:new f},c.set(a,b)),b}if(!this.childlistChanges){var c=this.childlistChanges=new f,d=b.bind(this.reachabilityChange,this);b.each(this.mutations,function(c){function e(a,b){!a||f.oldPrevious.has(a)||f.added.has(a)||f.maybeMoved.has(a)||b&&(f.added.has(b)||f.maybeMoved.has(b))||f.oldPrevious.set(a,b)}if("childList"==c.type&&d(c.target)==w){var f=a(c.target),g=c.previousSibling;b.each(c.removedNodes,function(a){e(a,g),f.added.has(a)?f.added.delete(a):(f.removed.set(a,!0),f.maybeMoved.delete(a,!0)),g=a}),e(c.nextSibling,g),b.each(c.addedNodes,function(a){f.removed.has(a)?(f.removed.delete(a),f.maybeMoved.set(a,!0)):f.added.set(a,!0)})}})}},wasReordered:function(a){function c(a){for(;a=a.previousSibling;)if(j.has(a))return!1;return!0}function d(a){if(!a)return!1;if(!h.maybeMoved.has(a))return!1;var b=i.get(a);return void 0!==b?b:(j.has(a)?b=c(a):(j.set(a,!0),b=g(a)!==e(a)),j.has(a)?(j.delete(a),i.set(a,b)):b=i.get(a),b)}function e(a){var b=k.get(a);if(void 0!==b)return b;for(b=h.oldPrevious.get(a);b&&(h.removed.has(b)||d(b));)b=e(b);return void 0===b&&(b=a.previousSibling),k.set(a,b),b}function g(a){if(l.has(a))return l.get(a);for(var b=a.previousSibling;b&&(h.added.has(b)||d(b));)b=b.previousSibling;return l.set(a,b),b}if(!this.childListChanges)return!1;this.processChildlistChanges();var h=this.childlistChanges.get(a.parentNode);if(h.moved)return h.moved.get(a);var i=h.moved=new f,j=new f,k=h.oldPreviousSibling=new f,l=new f;return b.each(h.maybeMoved.keys(),d),h.moved.get(a)}};var A=/[a-zA-Z_]+/,B=/[a-zA-Z0-9_\-]+/,C=/^([a-zA-Z:_]+[a-zA-Z0-9_\-:\.]*)$/;return p.NodeMap=f,p}),define("cb/lib/dom/domSerializers/baseNodeSerializer",["underscore"],function(a){"use strict";function b(b){function c(a){return{nodeType:a.nodeType,id:b(a)}}var d=this;a.extend(d,{serializeNode:c})}return b}),define("cb/lib/dom/domSerializers/documentTypeNodeSerializer",["underscore","./baseNodeSerializer"],function(a,b){"use strict";function c(c){function d(b){var c=f.serializeNode(b);return a.extend(c,{name:b.name,publicId:b.publicId,systemId:b.systemId})}var e=this,f=new b(c);a.extend(e,{serializeNode:d})}return c}),define("cb/lib/dom/domSerializers/textAndCommentNodeSerializer",["underscore","./baseNodeSerializer"],function(a,b){"use strict";function c(c){function d(b){var c=f.serializeNode(b);return a.extend(c,{textContent:b.textContent||b.nodeValue})}var e=this,f=new b(c);a.extend(e,{serializeNode:d})}return c}),define("cb/lib/dom/domSerializers/serializationUtils",["jquery"],function(a){"use strict";function b(a){return"class"===a?"k":a}function c(a){return!(!a||!a.tagName)&&("SVG"===a.tagName.toUpperCase()||c(a.parentNode))}function d(a){var b=a.tagName.toUpperCase();return"IFRAME"===b||"IMG"===b}function e(b){return{width:a(b).css("width"),height:a(b).css("height")}}return{getAttrNameToSend:b,isSvgNode:c,isImplicitlySized:d,getDimensions:e}}),define("cb/lib/dom/domSerializers/basicElementNodeSerializer",["underscore","cb/lib/dom/domSerializers/serializationUtils","cb/lib/dom/domSerializers/baseNodeSerializer"],function(a,b,c){"use strict";function d(d){function e(a){var c,d,e;if(!a.tagName)return null;for(c=g.serializeNode(a),c.tagName=a.tagName,c.attributes={},e=0;e<a.attributes.length;e++)d=a.attributes.item(e),c.attributes[b.getAttrNameToSend(d.name)]=d.value;return a.value&&!c.attributes.value&&(c.attributes.value=a.value),c}var f=this,g=new c(d);a.extend(f,{serializeNode:e})}return d}),define("cb/lib/dom/domSerializers/svgElementNodeSerializer",["underscore","cb/lib/dom/domSerializers/basicElementNodeSerializer"],function(a,b){"use strict";function c(c){function d(a){var b=f.serializeNode(a);return null===b?null:(b.svg=1,b)}var e=this,f=new b(c);a.extend(e,{serializeNode:d})}return c}),define("cb/lib/dom/domSerializers/sizedNodeSerializer",["underscore","cb/lib/dom/domSerializers/basicElementNodeSerializer","cb/lib/dom/domSerializers/serializationUtils"],function(a,b,c){"use strict";function d(d){function e(b){var d=g.serializeNode(b);return null===d?null:(a.extend(d,c.getDimensions(b)),d)}var f=this,g=new b(d);a.extend(f,{serializeNode:e})}return d}),define("cb/lib/dom/domSerializers/compositeElementNodeSerializer",["underscore","./serializationUtils","./baseNodeSerializer","./basicElementNodeSerializer","./svgElementNodeSerializer","./sizedNodeSerializer"],function(a,b,c,d,e,f){"use strict";function g(c){function g(a){return b.isSvgNode(a)?k:b.isImplicitlySized(a)||"SELECT"===a.nodeName?l:j}function h(a){return g(a).serializeNode(a)}var i=this,j=new d(c),k=new e(c),l=new f(c);a.extend(i,{serializeNode:h})}return g}),define("cb/lib/dom/domSerializers/compositeNodeSerializer",["underscore","cb/lib/dom/domSerializers/documentTypeNodeSerializer","cb/lib/dom/domSerializers/textAndCommentNodeSerializer","cb/lib/dom/domSerializers/compositeElementNodeSerializer","cb/lib/dom/domSerializers/baseNodeSerializer","cb/lib/dom/Node"],function(a,b,c,d,e,f){"use strict";function g(g){function h(a){return l[a]||k}function i(a){return h(a.nodeType).serializeNode(a)}var j=this,k=new e(g),l={};l[f.DOCUMENT_TYPE_NODE]=new b(g),l[f.TEXT_NODE]=new c(g),l[f.COMMENT_NODE]=new c(g),l[f.ELEMENT_NODE]=new d(g),a.extend(j,{serializeNode:i})}return g}),define("cb/lib/dom/nodeRegistry",["underscore"],function(a){"use strict";function b(){function b(a,b){f[a]=b}function c(a){delete f[a]}function d(a){return f[a]}var e=this,f={};a.extend(e,{add:b,remove:c,get:d})}return b}),define("cb/lib/dom/nodeAutoRegistry",["underscore","mutation_summary","./nodeRegistry"],function(a,b,c){"use strict";function d(){function d(a){var b=k++;l.set(a,b),m.add(b,a)}function e(a){var b=f(a);l.delete(a),m.remove(b)}function f(a){return l.get(a)||null}function g(a){return null!==f(a)}function h(a){return m.get(a)||null}function i(a){return g(a)||d(a),f(a)}var j=this,k=1,l=new b.NodeMap,m=new c;a.extend(j,{add:d,remove:e,get:h,getIdOfKnownNode:f,isKnown:g,provideId:i})}return d}),define("cb/lib/dom/domTreeScrollPositionsObserver",["underscore"],function(a){"use strict";function b(b){function c(){}function d(){}function e(a){var c=a.scrollTop,d=a.scrollLeft;(c||d)&&h.push({nodeId:b(a),scrollTop:c,scrollLeft:d})}function f(){return h}var g=this,h=[];a.extend(g,{levelUp:c,levelDown:d,nextNode:e,getScrollPositions:f})}return b}),define("cb/lib/dom/domTreeSerializationObserver",["underscore"],function(a){"use strict";function b(b){function c(){var a=f(),b=a[a.length-1];null!==b&&(b.childNodes=j),j=a}function d(){e(),j=[]}function e(){k.push(j)}function f(){return k.pop()}function g(a){j.push(b.serializeNode(a))}function h(){return j}var i=this,j=[],k=[];a.extend(i,{levelUp:c,levelDown:d,nextNode:g,getSerializedData:h})}return b}),define("cb/lib/dom/domTreeIterator",["underscore","cb/lib/dom/Node"],function(a,b){"use strict";function c(){function c(a){j.push(a)}function d(){a.each(j,function(a){a.levelUp()})}function e(){a.each(j,function(a){a.levelDown()})}function f(b){a.each(j,function(a){a.nextNode(b)})}function g(a){var b;for(b=a.firstChild;b;b=b.nextSibling)f(b),h(b)&&(e(),g(b),d())}function h(a){return a.nodeType===b.ELEMENT_NODE&&a.childNodes.length}var i=this,j=[];a.extend(i,{iterateThroughChildNodes:g,addObserver:c})}return c}),define("cb/lib/dom/treeMirrorClient",["underscore","util","signals","mutation_summary","./Node","cb/lib/dom/domSerializers/compositeNodeSerializer","cb/lib/dom/domSerializers/serializationUtils","cb/lib/dom/nodeAutoRegistry","cb/lib/dom/domTreeScrollPositionsObserver","cb/lib/dom/domTreeSerializationObserver","cb/lib/dom/domTreeIterator"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(b){return a.isNumber(b)?b:b.id?b.id:a.isNumber(b.node)?b.node:!!a.isNumber(b.node.id)&&b.node.id}function m(d,e,g){a.bindAll(this);var i=this;this.target=d,this.nodeAutoRegistry=new h,this.nodesIdProviderFunction=function(a){return i.nodeAutoRegistry.provideId(a)},this.nodesSerializer=new f(this.nodesIdProviderFunction),this.testingQueries=e,this.preprocessAddedNodes=g||b.noop,this.on={},this.on.domChanged=new c,this.on.nodesAdded=new c,this.on.dimensionsChanged=new c}return m.prototype={initialize:function(){this.startListeningToDomChanges(),this.startListeningToDimensionsChanges()},startListeningToDomChanges:function(){var a=this.target,b=this,c=[{all:!0}];this.testingQueries&&(c=c.concat(this.testingQueries)),this.mutationSummary=new d({rootNode:a,callback:function(a){b.processDomMutations(a)},queries:c})},getTargetBody:function(){return b.getDocumentObject(this.target).body},startListeningToDimensionsChanges:function(){this.getTargetBody().addEventListener("load",this.loadListener,!0)},loadListener:function(a){var b=a.target;g.isImplicitlySized(b)&&this.nodeAutoRegistry.isKnown(b)&&this.processChangedDimensions(b)},stopListeningToDimensionsChanges:function(){this.getTargetBody().removeEventListener("load",this.loadListener,!0)},processChangedDimensions:function(a){var b=this.serializeDimensions(a);this.on.dimensionsChanged.dispatch([b])},serializeDimensions:function(b){return a.extend({node:this.getPlainSerializationData(b)},g.getDimensions(b))},takeSnapshot:function(a){var b,c,d,e;b=this.nodeAutoRegistry.provideId(this.target),c=new i(this.nodesIdProviderFunction),d=new j(this.nodesSerializer),e=new k,e.addObserver(c),e.addObserver(d),e.iterateThroughChildNodes(this.target),a(b,d.getSerializedData(),c.getScrollPositions())},disconnect:function(){this.mutationSummary&&(this.mutationSummary.disconnect(),this.mutationSummary=void 0),this.stopListeningToDimensionsChanges()},getRealNode:function(a){var b=l(a);return this.nodeAutoRegistry.get(b)},getNodeId:function(a){return a?this.nodeAutoRegistry.getIdOfKnownNode(a):null},getPlainSerializationData:function(a){return null===a?null:this.nodeAutoRegistry.isKnown(a)?this.nodeAutoRegistry.getIdOfKnownNode(a):this.nodesSerializer.serializeNode(a)},serializeAddedAndMoved:function(b){var c,e;return c=new d.NodeMap,a.each(b,function(a){var b=a.parentNode,e=c.get(b);e||(e=new d.NodeMap,c.set(b,e)),e.set(a,!0)}),e=[],a.each(c.keys(),function(a){for(var b,d=c.get(a),f=d.keys();f.length;){for(b=f[0];b.previousSibling&&d.has(b.previousSibling);)b=b.previousSibling;for(;b&&d.has(b);)e.push({node:this.getPlainSerializationData(b),previousSibling:this.getPlainSerializationData(b.previousSibling),parentNode:this.getPlainSerializationData(b.parentNode)}),d.delete(b),b=b.nextSibling;f=d.keys()}},this),e},serializeAttributeChanges:function(b){var c=new d.NodeMap;return a.each(a.keys(b),function(d){a.each(b[d],function(a){var b=c.get(a);b||(b={node:this.getPlainSerializationData(a),attributes:{}},c.set(a,b)),b.attributes[g.getAttrNameToSend(d)]=a.getAttribute(d)},this)},this),a.map(c.keys(),function(a){return c.get(a)})},serializeCharacterDataChange:function(a){var b=a,c=a.parentNode;return!this.nodeAutoRegistry.isKnown(a)&&c&&"textContent"in c&&(b=a.parentNode),{node:this.getPlainSerializationData(b),textContent:a.textContent}},processDomMutations:function(b){var c,d,e,f,g=this,h=b[0],i=h.added.concat(h.reparented).concat(h.reordered);this.preprocessAddedNodes(i),c=a.map(h.removed,function(a){return g.getPlainSerializationData(a)}),d=this.serializeAddedAndMoved(i),e=this.serializeAttributeChanges(h.attributeChanged),f=a.map(h.characterDataChanged,this.serializeCharacterDataChange,this),i.length&&this.on.nodesAdded.dispatch(i),this.on.domChanged.dispatch(c,d,e,f),a.each(h.removed,this.nodeAutoRegistry.remove,this.nodeAutoRegistry)}},m}),define("cb/lib/jquery.service-nodes",["jquery","util"],function(a,b){"use strict";a.fn.cbMarkNode=function(a){var c=a&&a.noChildren;return this.each(function(){b.markServiceNode(this,c)})},a.fn.cbUnmarkNode=function(){return this.each(function(){b.unmarkServiceNode(this)})},a.fn.cbTestNode=function(){if(this.length>1)throw new Error("Only one node at a time can be tested");return this[0]&&b.isServiceNode(this[0])}}),define("cb/services/masterDomService",["jquery","underscore","cb/lib/dom/treeMirrorClient","util","cb/lib/dom/Node","signals","cb/constants","cb/lib/jquery.service-nodes"],function(a,b,c,d,e,f,g){"use strict";function h(a,h,i,j,k,l,m,n){function o(){return O}function p(a,b){var c=!O.length;d.log("NEW SLAVES READY:",a," READY SLAVES: ",O),c&&x(),s(a),G(a,b,c)}function q(a){return p(a,!0)}function r(){d.log("DOM MESSAGE DELIVERY FAILURE BY TIMEOUT"),P.deliveryTimeout.dispatch()}function s(a){O=b.uniq(O.concat(a))}function t(a){a.forEach(function(a){v(a),w(a)})}function u(){var a=d.getServiceNodes();d.log("FOUND "+a.length+' "SERVICE" NODES'),a.each(function(){d.markServiceNode(this)})}function v(a){var b;d.isServiceNode(a)||(b=d.getServiceParent(a))&&(d.log('RE-APPLYING "SERVICENESS" ON ',b),d.markServiceNode(b))}function w(a){a.tagName&&"IFRAME"===a.tagName&&P.iframeAdded.dispatch(a)}function x(){d.log("FIRST SLAVE IS READY, INITIALIZING MIRRORING"),M=new c(document,null,t),M.on.domChanged.add(A),M.on.dimensionsChanged.add(B),i.updateNodeAndIdGetters(M.getNodeId,M.getRealNode),i.activate({publish:!0,listen:!0}),m.activate({onNodesAdded:M.on.nodesAdded,nodeGetter:M.getRealNode}),M.initialize(),P.beforeMirroringActivated.dispatch(),L=b.bind(z,M),k.activate({nodeGetter:M.getRealNode,nodeIdGetter:M.getNodeId,targetUsersGetter:o}),j.activate({nodeFilter:m.checkNode,onNodesAdded:M.on.nodesAdded,publishCheckboxes:!0,nodeGetter:M.getRealNode,nodeIdGetter:M.getNodeId,targetUsersGetter:o,valueFilter:m.get$NodeValue}),n.activate()}function y(a,b){var c=a.nodeType;return b=b||{},c!==e.COMMENT_NODE&&((c!==e.ELEMENT_NODE&&c!==e.TEXT_NODE||!d.isServiceNode(a))&&(!d.isHiddenInput(a)&&(c===e.TEXT_NODE?!a.parentNode||y(a.parentNode,b):"LINK"===a.nodeName&&"stylesheet"===a.rel||"STYLE"===a.nodeName?!b.initial||l.isDefaultSyncEnabled():"SCRIPT"!==a.nodeName)))}function z(a,b){var c=this.getRealNode(a);return!!c&&y(c,b)}function A(a,c,d,e){a=D(a),d=D(d),c=D(c),C(c),I(c),I(d),m.maskSerializedNodes(c),m.maskSerializedNodes(e),b.isEmpty(a)&&b.isEmpty(c)&&b.isEmpty(d)&&b.isEmpty(e)||(Q+=1,h.publishDOM({command:g.DOM_MESSAGE_TYPE.APPLY_CHANGED,snapshotId:K,changeId:Q,targetUsersIds:O,args:[a,c,d,e]}))}function B(a){h.publishDOM({command:g.DOM_MESSAGE_TYPE.UPDATE_SIZE,targetUsersIds:O,args:[a]})}function C(a){b.each(a,function(a){var b;if(a.previousSibling){for(b=M.getRealNode(a.previousSibling);!y(b)&&b.previousSibling;)b=b.previousSibling;a.previousSibling=b?M.getNodeId(b):null}})}function D(a){return b.filter(a,L)}function E(){d.log("ACTIVATING DOM SERVICE"),h.on.slaveContextReady.add(q),h.on.deliveryTimeout.add(r),u()}function F(){d.log("DEACTIVATING DOM SERVICE"),O=[],h.on.slaveContextReady.remove(q),h.on.deliveryTimeout.remove(r),i.deactivate(),j.deactivate(),l.deactivate(),k.deactivate(),n.deactivate(),M&&(M.disconnect(),M=null)}function G(b,c,e){d.log("TAKING SNAPSHOT"),M.takeSnapshot(function(f,k,n){d.log("SNAPSHOT TAKEN, PROCESSING IT"),H(k),I(k),m.maskSerializedNodes(k),K=d.getRandomString(),Q=0,d.log("PUBLISHING INITIALIZATION SNAPSHOT ",K),d.log("BASE IS "+d.getPageBaseUrl()),h.publishDOM({command:g.DOM_MESSAGE_TYPE.INITIALIZE,snapshotId:K,inReplyToReady:c,targetUsersIds:b,base:d.getPageBaseUrl(),dom:[f,k],windowScroll:i.getWindowScroll(),elementsScrollPositions:n,noCssExpected:l.isOnlyDefaultSyncEnabled()}),l.publishCSS({targetUsersIds:e?b.concat(a):b,initial:!0}),j.setSnapshotId(K),j.publishCurrentValues(b)})}function H(a){d.walkNodes(a,H,function(a,b,c){return!L(a,{initial:!0})&&(c.splice(b,1),!0)})}function I(a){d.walkNodes(a,I,J)}function J(a){var c=a.node||a,e=c.attributes;e&&b.each(e,function(a,b){d.isValidAttribute(b)||delete e[b]})}var K,L,M,N=this,O=[],P={iframeAdded:new f,deliveryTimeout:new f,beforeMirroringActivated:new f},Q=0;b.extend(N,{on:P,activate:E,deactivate:F,initializeSlaves:p})}return h}),define("cb/services/ModeService",["underscore","signals","cb/constants"],function(a,b,c){"use strict";function d(a){return{pointer:a===c.modes.POINTER,write:a===c.modes.WRITE}}function e(e){function f(){return g||(g=d(e.get("mode"))),g}var g,h=this,i={modeChanged:new b};e.on("change:mode",function(a,b){if(b&&a.previous("mode")){if(!a.get("writeModeAllowed")&&b===c.modes.WRITE)throw a.set("mode",c.modes.POINTER),new Error("Switching to Write mode is not allowed");g=d(b),i.modeChanged.dispatch(g)}}),a.extend(h,{on:i,currentMode:f})}return e}),define("cb/lib/touchClickEvent",["jquery","util"],function(a,b){"use strict";function c(a){var c=0;try{c=a.touches?a.touches[0].clientX:a.clientX}catch(c){b.log("WARN! UNABLE TO EXTRACT X COORD OF EVENT ",a)}return c}function d(a){var c=0;try{c=a.touches?a.touches[0].clientY:a.clientY}catch(c){b.log("WARN! UNABLE TO EXTRACT Y COORD OF EVENT ",a)}return c}function e(a){return a.type===o&&(a.clientX=c(a),a.clientY=d(a)),a}function f(a){a[p]=!0,setTimeout(function(){g(a)},500)}function g(a){a&&a[p]&&delete a[p]}function h(a){return a[p]}function i(a){m(e(a)),f(a.target)}function j(a){h(a.target)||m(e(a))}function k(a,b){m=a,document.addEventListener(n,j,b),document.addEventListener(o,i,b)}function l(a){document.removeEventListener(n,j,a),document.removeEventListener(o,i,a),m=null}var m,n="click",o="touchstart",p="__gcbJustTouched__";return{setListener:k,removeAllListeners:l}}),define("cb/services/mouseService",["jquery","underscore","util","signals","cb/lib/dom/Node","cb/lib/touchClickEvent","cb/constants"],function(a,b,c,d,e,f,g){"use strict";function h(g,h,s,t,u,v,w){function x(a,b,c,d){var e,f=c||0,g=d||0;return e=document.createEvent("MouseEvents"),e.initMouseEvent(a,!0,!0,document.defaultView,0,0,0,f,g,!1,!1,!1,!1,0,b),e.gcbTriggered=!0,e}function y(a){return a.nodeId?ja(a.nodeId)||(c.log("WARN! TARGET FOR MOUSE EVENT IS ABSENT, NODE ID:",a.nodeId,JSON.stringify(a)),null):(c.log("WARN! NO INFORMATION ABOUT TARGET FOR MOUSE EVENT IN MESSAGE:",JSON.stringify(a)),null)}function z(a,b){return!!u.currentMode().write||a===o&&"SELECT"!==b.nodeName}function A(b,c,d){var f;d&&(d===c||a.contains(c,d))||(pa.foreignMouseEvent.dispatch({type:b,target:c,relatedTarget:d,gcbTriggered:!0}),(f=c.parentNode)&&f.nodeType===e.ELEMENT_NODE&&A(b,f,d))}function B(a){var b=a.eventType;switch(b){case o:t.delegateMouseMessage(a);break;case p:a.isClicked=!0,t.delegateMouseMessage(a);break;case k:case l:C(a);break;default:c.log("UNEXPECTED OR UNKNOWN MOUSE SERVICE EVENT TYPE FOR SLAVE SIDE: ",b)}}function C(a){var b,c=a.relatedTargetNodeId?ja(a.relatedTargetNodeId):null;null!==(b=y(a))&&A(a.eventType,b,c)}function D(a){var b=a.eventType;switch(b){case q:case r:E(a);break;case o:F(a);break;case k:G(a);break;case l:H(a);break;case p:I(a);break;default:c.log("UNEXPECTED OR UNKNOWN MOUSE SERVICE EVENT TYPE FOR MASTER SIDE: ",b)}}function E(a){var b,c;(b=y(a))&&w.eventsHandling.enableMouseDownUp&&z(a.eventType,b)&&("SELECT"===b.nodeName&&a.eventType===q||(c=x(a.eventType,null),b.dispatchEvent(c)))}function F(a){var b,c;t.delegateMouseMessage(a),b=qa,z(o,b)&&(c=x(o,null,a.x,a.y),b.dispatchEvent(c))}function G(a){var b,c,d=a.relatedTargetNodeId?ja(a.relatedTargetNodeId):null,e=a.eventType;null!==(b=y(a))&&(A(e,b,d),z(e,b)&&(c=x(m,d),b.dispatchEvent(c),w.eventsHandling.enableAdditionalMouseEnterLeave&&(c=x(k,d),b.dispatchEvent(c)),qa=b))}function H(a){var b,c,d=a.relatedTargetNodeId?ja(a.relatedTargetNodeId):null,e=a.eventType;null!==(b=y(a))&&(A(e,b,d),z(e,b)&&(c=x(n,d),b.dispatchEvent(c),w.eventsHandling.enableAdditionalMouseEnterLeave&&(c=x(l,d),b.dispatchEvent(c))))}function I(a){var b,d,e,f=null;if(a.isClicked=!0,t.delegateMouseMessage(a),(b=y(a))&&z(p,b)){if(v.isNodeRestricted(b))return void c.log('NODE IS "DOM RESTRICTED", NOT REPLAYING CLICK',b);c.log("REPLAYING CLICK",a),e=x(r,f,a.x,a.y),b.dispatchEvent(e),A(l,b,null),d=x(p,f,a.x,a.y),b.dispatchEvent(d),A(k,b,null)}}function J(a){var b=t.retrieveOffset(window);return{x:a.clientX+b.left,y:a.clientY+b.top}}function K(a,b){return a&&b&&a.type===b.type&&a.target===b.target&&a.relatedTarget===b.relatedTarget}function L(a){if(!a.originalEvent.gcbTriggered){var b,c,d,e;if(b={type:a.type,target:a.target,relatedTarget:a.relatedTarget},K(la,b))return;e={eventType:a.type},c=ia(a.target),d=ia(a.relatedTarget),c&&(e.nodeId=c),d&&(e.relatedTargetNodeId=d),la=b,h.publishMouseMessage(e)}}function M(){c.log("ACTIVATING HOVER EVENTS PUBLISHING"),a(document).on(k+" "+l,"*",L)}function N(){c.log("ACTIVATING MOUSEDOWN EVENTS PUBLISHING"),document.addEventListener(q,O),document.addEventListener(r,O)}function O(a){var b;b={eventType:a.type,nodeId:ia(a.target)},h.publishMouseMessage(b)}function P(a){return a.clientX===ra.x&&a.clientY===ra.y||(ra.x=a.clientX,ra.y=a.clientY,!1)}function Q(){c.log("ACTIVATING MOUSE MOVE PUBLISHING"),na.bind(o+oa,b.throttle(function(a){var b;a.originalEvent.gcbTriggered||P(a)||(b=J(a),b.eventType=o,h.publishMouseMessage(b))},s))}function R(a){a.preventDefault?a.preventDefault():a.stop(),a.returnValue=!1,a.stopPropagation()}function S(a){var b;if(a.gcbTriggered)return!1;g===j&&R(a),b=J(a),b.nodeId=ia(a.target),b.eventType=p,h.publishMouseMessage(b)}function T(a){var b=a.type&&a.type.toLowerCase();return"INPUT"===a.nodeName&&"radio"===b}function U(b){u.currentMode().pointer&&(c.log("POINTER MODE: PREVENTING INTERACTION ",b),R(b),a(b.target).blur())}function V(b){var d=b.target;T(d)&&(c.log("REMEMBERING CHECKED RADIO WITH NAME "+d.name),ka=a('[name="'+d.name+'"]:checked')[0])}function W(){ka&&(c.log("RESTORING CHECKED RADIO WITH NAME "+ka.name),ka.checked=!0,ka=null)}function X(){c.log("ACTIVATING SLAVE RADIO BUTTONS LISTENERS"),document.addEventListener?document.addEventListener(q,V,!0):document.attachEvent&&a(document).bind(q+oa,V),a(document).on("change"+oa,":radio",W)}function Y(){c.log("DEACTIVATING SLAVE RADIO BUTTONS LISTENERS"),ca(document,q,V),a(document).off("change"+oa)}function Z(){c.log("ACTIVATING SLAVE MODE LISTENER"),document.addEventListener?(document.addEventListener("focus",U,!1),document.addEventListener(q,U,!1)):document.attachEvent&&(a(document).bind("focus"+oa,U),a(document).bind(q+oa,U))}function $(){c.log("DEACTIVATING SLAVE MODE LISTENER"),ca(document,"focus",U),ca(document,q,U)}function _(){X(),Z()}function aa(){Y(),$()}function ba(){c.log("ACTIVATING MOUSE CLICK PUBLISHING"),f.setListener(S,g===i)}function ca(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!0),a.detachEvent&&a.detachEvent("on"+b,c)}function da(){na.unbind(oa),f.removeAllListeners(g===i),a(document).off(k+" "+l,"*",L)}function ea(){document.removeEventListener(q,O),document.removeEventListener(r,O)}function fa(a){c.log("ACTIVATING MOUSE SERVICE WITH OPTIONS",a),c.log("MOUSE SYNC INTERVAL IS ",s),ha=a,ia=ha.nodeIdGetter,ja=ha.nodeGetter,Q(),ba(),M(),g===j&&N(),g===j&&_(),h.on.mouseMessageReceived.add(g===i?D:B)}function ga(){c.log("DEACTIVATING MOUSE SERVICE"),da(),g===j&&ea(),h.on.mouseMessageReceived.remove(g===i?D:B),g===j&&aa(),t.hideAllCursors()}var ha,ia,ja,ka,la,ma=this,na=a(window.document),oa=".gcbMouse",pa={foreignMouseEvent:new d},qa=document.body,ra={x:0,y:0};b.extend(ma,{on:pa,activate:fa,deactivate:ga})}var i=g.userRoles.MASTER,j=g.userRoles.SLAVE,k="mouseenter",l="mouseleave",m="mouseover",n="mouseout",o="mousemove",p="click",q="mousedown",r="mouseup";return h}),define("jquery.txtinput",["jquery"],function(a){!function(a,b){var c=".inputEvent ",d="bound.inputEvent",e="value.inputEvent",f=["input","textInput","propertychange","paste","cut","keydown","drop",""].join(c),g=["focusin","dragstart",""].join(c),h={TEXTAREA:b,INPUT:b},i={paste:b,cut:b,keydown:b,drop:b,textInput:b};a.event.special.txtinput={setup:function(){function b(b){var d=b.target;c&&(window.clearTimeout(c),c=null),m||(b.type in i&&!c?c=window.setTimeout(function(){d.value!==a.data(d,e)&&(a(d).trigger("txtinput",[b.originalEvent]),a.data(d,e,d.value))},0):"propertychange"===b.type?"value"===b.originalEvent.propertyName&&(a(d).trigger("txtinput",[b.originalEvent]),a.data(d,e,d.value),m=!0,window.setTimeout(function(){m=!1},0)):(a(d).trigger("txtinput",[b.originalEvent]),a.data(d,e,d.value),m=!0,window.setTimeout(function(){m=!1},0)))}var c,j=0,k=this,l=a(this),m=!1;k.tagName in h?(j=a.data(k,d)||0,j||l.bind(f,b),a.data(k,d,++j),a.data(k,e,k.value)):l.bind(g,function(c){var g=c.target;g.tagName in h&&!a.data(g,d)&&(a(g).bind(f,b),a.data(g,d,++j),a.data(g,e,g.value))})},teardown:function(){var b=a(this);b.unbind(g),b.find("input, textarea").andSelf().each(function(){a.data(this,d,(a.data(this,d)||1)-1)||b.unbind(f)})}},a.fn.input=function(a){return a?this.bind("txtinput",a):this.trigger("txtinput")}}(a)}),define("cb/services/commonInputService",["jquery","underscore","util","jquery.txtinput"],function(a,b,c){"use strict";function d(){function d(a){var b=a.type&&a.type.toLowerCase();return"INPUT"===a.nodeName&&("checkbox"===b||"radio"===b)}function e(a){return"SELECT"===a.nodeName}function f(a){return"OPTION"===a.nodeName}function g(a){var c=a.nodeName.toLowerCase(),d=a.type;return"textarea"===c||"input"===c&&(!d||!b.contains(o,d))}function h(a){p.on("keydown.gcb",a)}function i(a){p.on("txtinput.gcb",a)}function j(a){p.on("change.gcb",a)}function k(){p.off("txtinput.gcb"),p.off("change.gcb"),p.off("keydown.gcb")}function l(b){return d(b)?b.checked:f(b)?b.selected:a(b).val()}function m(b,e){var g=a(b);c.log("APPLYING NODE VALUE",e),d(b)?g.prop("checked",e):f(b)?b.selected=e:g.val(e)}var n=this,o=["button","checkbox","file","hidden","image","radio","reset","submit"],p=a(window);b.extend(n,{getElementValue:l,applyNodeValue:m,addOnKeyDownHandler:h,addOnInputHandler:i,addOnChangeHandler:j,unbindAllEventHandlers:k,isTextual:g,isCheckboxOrRadio:d,isSelect:e,isOption:f})}return d}),define("cb/lib/inputEventEnumerator",["underscore"],function(a){"use strict";function b(){function b(a){g=a,h=0}function c(){return d(),g}function d(){if(!g)throw new Error("Snapshot ID is not defined")}function e(){return d(),h+=1,{snapshotId:g,changeId:h}}var f=this,g=null,h=0;a.extend(f,{getEventNumber:e,setCurrentSnapshotId:b,getCurrentSnapshotId:c})}return b}),define("cb/services/masterInputService",["jquery","underscore","util","cb/services/commonInputService","cb/constants","cb/lib/inputEventEnumerator"],function(a,b,c,d,e,f){"use strict";function g(e,g,j,k){function l(b){var c=m(b);return R.isCheckboxOrRadio(b)||R.isOption(b)?c:N?N(a(b)):c}function m(a){return R.getElementValue(a)}function n(b){a.data(b,U,m(b))}function o(b){return a.data(b,U)}function p(a){if(n(a),c.isServiceNode(a))return void c.log("SERVICE NODE: SKIPPING INPUT EVENT",a);v(a)}function q(a){n(a);var d=function(){if(T){var e=m(a),f=o(a);e!==f&&(c.log("GOT VALUE CHANGE: ",f," => ",e," ON ",a),p(a)),b.delay(d,h)}};b.delay(d,h)}function r(a){for(var b,d=0,e=a.length;d<e;d++)b=a[d],!s(b)||c.isServiceNode(b)||c.isHiddenInput(b)||(c.log("NEW INPUT ELEMENT ADDED, GONNA MONITOR"),p(b),q(b))}function s(a){return"TEXTAREA"===a.nodeName||"INPUT"===a.nodeName||"OPTION"===a.nodeName}function t(){c.log("ACTIVATING INPUT PUBLISHING"),R.addOnInputHandler(function(a,d){d&&d.gcbTriggered||c.isHiddenInput(a.target)||(c.log("TXTINPUT EVENT WITH ORIG TYPE: ",d.type," ON NODE: ",d.target),b.defer(function(){p(a.target)}))}),a("input, textarea, select option").each(function(){c.isHiddenInput(this)||q(this)}),P&&P.add(r),R.addOnChangeHandler(function(a){var b=a.target;(R.isSelect(b)||R.isCheckboxOrRadio(b))&&p(b)})}function u(){R.unbindAllEventHandlers()}function v(a){var d,f=y(a);if(b.isNull(f))return void c.log("NOT SENDING ELEMENT VALUE ",a);d=S.getEventNumber(),b.extend(f,d),f.targetUsersIds=M(),f.command=i.VALUE,e.publishMessage(f)}function w(a){S.setCurrentSnapshotId(a)}function x(b){var d=[],f={targetUsersIds:b,snapshotId:S.getCurrentSnapshotId()};a(":input").each(function(){var a=this;c.isServiceNode(a)||c.isHiddenInput(a)||d.push(y(a))}),f.nodes=d,f.command=i.SNAPSHOT,c.log("PUBLISHING CURRENT INPUT VALUES: ",f),e.publishMessage(f)}function y(a){var d=l(a),e=K(a);return b.isNull(e)?(c.log("WARN! CANNOT SERIALIZE NODE ",a),null):{node:e,value:d}}function z(a,b,c){R.isTextual(a)&&(A(a,"keydown",c),A(a,"keypress",c)),R.applyNodeValue(a,b),n(a),R.isTextual(a)&&A(a,"keyup",c),A(a,"change")}function A(c,d,e){var f;f=document.createEvent("Events"),f.initEvent(d,!0,!0),b.isUndefined(e)||a.extend(f,e),f.gcbTriggered=!0,c.dispatchEvent(f)}function B(a){var b=L(a.node);return b?O&&O(b)?null:j&&j.isNodeRestricted(b)?null:b:(c.log("!!! NODE NOT FOUND",a),null)}function C(a){var b=B(a);null!==b&&z(b,a.value,a.kbEventDetails)}function D(a){var b=B(a);null!==b&&E(a.event)&&A(b,a.event)}function E(a){return("focus"===a||"blur"===a)&&k.eventsHandling.enableFocusBlur}function F(){c.log("ACTIVATING INPUT LISTENING"),e.on.messageReceived.add(H)}function G(){e.on.messageReceived.remove(H)}function H(a){var b=a.command;if(g.currentMode().pointer)return void c.log("WARNING! GOT INPUT EVENTS IN POINTER MODE. SKIPPING.");b===i.VALUE?C(a):b===i.EVENT?D(a):c.log("UNEXPECTED OR UNKNOWN INPUT SERVICE MESSAGE TYPE: ",b)}function I(a){c.log("ACTIVATING INPUT SERVICE"),K=a.nodeIdGetter,L=a.nodeGetter,M=a.targetUsersGetter,P=a.onNodesAdded,N=a.valueFilter,O=a.nodeFilter,t(),F(),T=!0}function J(){T&&(c.log("DEACTIVATING INPUT SERVICE"),u(),G(),T=!1)}var K,L,M,N,O,P,Q=this,R=new d,S=new f,T=!1,U="_gcbLastSentValue_";b.extend(Q,{activate:I,deactivate:J,setSnapshotId:w,publishCurrentValues:x})}var h=500,i=e.INPUT_MESSAGE_TYPES;return g}),define("cb/services/restrictions/dataMaskingService",["jquery","underscore","util","cb/lib/dom/Node","signals","cb/constants","cb/lib/jquery.service-nodes"],function(a,b,c,d,e,f){"use strict";function g(g,i){function j(){var b=g.join(",");(i.root?a(b,i.root):a(b)).each(function(){k([this]),z.elementMarked.dispatch(this)})}function k(a){c.walkNodes(a,k,l)}function l(a){a.nodeType!==d.TEXT_NODE&&(a[h]=!0)}function m(a){return a.nodeType===d.TEXT_NODE&&a.parentNode&&m(a.parentNode)||!0===a[h]}function n(a){var b=m(a[0]),c=a.val();return b?c&&v(c):c}function o(a){x=a.onNodesAdded,w=a.nodeGetter,c.log("ACTIVATING DATA MASKING FOR ELEMENTS ",g),j(),x.add(p)}function p(a){var b,d;for(b=0;b<a.length;b++)if(d=a[b],!c.isServiceNode(d)&&"SCRIPT"!==d.nodeName){j();break}}function q(a){c.walkNodes(a,q,r)}function r(a){var b;(b=w(a))&&m(b)&&s(a)}function s(b){var e,f;return b.textContent?void(a.trim(b.textContent).length&&(b.textContent=v(b.textContent))):b.node?void s(b.node):(e=b.nodeType,void(e===d.ELEMENT_NODE?(f=b.tagName,b.attributes["data-masked"]=!0,b.attributes.readonly=!0,"INPUT"===f?t(b):"OPTION"===f&&u(b)):c.log("Unable to mask! Unrecognized node structure: ",b)))}function t(a){var b=a.attributes&&a.attributes.value,c=a.attributes&&a.attributes.placeholder;b&&(a.attributes.value=v(b)),c&&(a.attributes.placeholder=v(c))}function u(a){var b=a.attributes,c=b&&b.value,d=b&&b.label;c&&(b.value=v(c)),d&&(b.label=v(d))}function v(a){return a.replace(/[^\s]/g,"*")}var w,x,y=this,z={elementMarked:new e};i||(i={}),i[f.UNMASK_PWD_OPTION]||g.push('input[type="password"]'),b.extend(y,{on:z,activate:o,maskSerializedNodes:q,get$NodeValue:n,checkNode:m})}var h="_gcbDataMasked_";return g}),define("cb/services/restrictions/domRestrictionsService",["jquery","underscore","json","../../constants","util"],function(a,b,c,d,e){"use strict";function f(c){function d(a){if("regexp"===a.type||b.isUndefined(a.type)){return new RegExp(a.pattern).test(document.URL)}return e.log("URI template type : "+a.type+" is not supported"),!1}function f(a){b.each(a,function(a,c){"uriTemplate"!==c&&(k[c]||(k[c]=[]),k[c]=b.union(k[c],a))})}function g(a){var c;return a.domRestrictions&&a.domRestrictions.restrictionsSet?(c=b.union([],a.domRestrictions.restrictionsSet),b.each(c,function(a){b.each(a,function(c,d){c.element?a[d]=b.union([],c.element):"uriTemplate"!==d&&(a[d]=b.toArray(a[d]))})}),c):[]}function h(a){var c=g(a);b.each(c,function(a){d(a.uriTemplate)&&f(a)})}function i(b,c){var d,e,f=k[c];if(!f)return!1;for(d=f.length;d--;)if(e=f[d],"true"!==e.skip&&(a(b).is(e.selector)||a(b).parents(e.selector).length))return!0;return!1}function j(){var a={domControl:[],domHiding:[],dataMasking:[]};return b.each(k,function(c,d){a[d]=b(c).chain().where({skip:void 0}).pluck("selector").value()}),a}var k={};e.log("INITIALIZING DOM RESTRICTION SERVICE WITH CONFIG: ",c),h(c),b.extend(this,{getConfig:j,checkNodeRestriction:i})}return f}),define("cb/services/restrictions/domControlService",["jquery","underscore","../../constants","util"],function(a,b,c,d){"use strict";function e(a){function c(a){return!!a[g]}function e(a){a[g]=!0}function f(b){var f;return d.log("CHECK DOM CONTROL RESTRICTIONS FOR NODE",b),!!c(b)||(f=a.checkNodeRestriction(b,"domControl"),f&&e(b),f)}var g="_gcbDomControlDisabled_";b.extend(this,{isNodeRestricted:f})}return e}),define("cb/services/windowDialogService",["jquery","underscore","util","cb/constants","cb/environment"],function(a,b,c,d,e){"use strict";function f(d,f,h){function i(a,c,d){window[a]=function(){return t[a]=window[a],function(){var e,f=b.toArray(arguments);return c(a,f),e=t[a].apply(window,f),d(a,f,e),e}}()}function j(a){t[a]&&(window[a]=t[a])}function k(a,b){var c={type:"start",name:a,args:b.map(String)};f.publishDialogStart(c)}function l(a,b,c){var d={type:"end",name:a,args:b,result:null!=c&&c};f.publishDialogEnd(d)}function m(a){c.log("_dialogCallback result:",a)}function n(a){var b=a.args[0]?a.args[0]:"",d=a.args[1]?a.args[1]:"";switch(c.log("DIALOG SERVICE _onDialogStartReceived",a),a.name){case"alert":h.alert(b,m);break;case"confirm":h.confirm(b,m);break;case"prompt":h.prompt(b,d,m);break;default:c.log("Unexpected dialog type in message ",a)}}function o(b,c){u._animateClick(b,a(e[d].getTopContext()).find(c)),h.showMessage(b,"info"),h.destroyDialogs()}function p(b){c.log("DIALOG SERVICE _onDialogEndReceived",b),"alert"===b.name?o("Alert dialog was closed.",".gcb-dialog-buttons button:contains(Ok)"):"prompt"===b.name?"string"==typeof b.result?(a(e[d].getTopContext()).find(".gcb-dialog-prompt input:text").val(b.result),o('Prompt dialog "'+b.args[0]+'" was finished with result: "'+b.result+'"',".gcb-dialog-buttons button:contains(Ok)")):o('Prompt dialog "'+b.args[0]+'" was canceled ',".gcb-cancel"):b.result?o('Confirm dialog "'+b.args[0]+'" was confirmed',".gcb-dialog-buttons button:contains(Ok)"):o('Confirm dialog "'+b.args[0]+'" was canceled',".gcb-cancel")}function q(){c.log("ACTIVATE WINDOW DIALOG SERVICE"),i("alert",k,l),i("prompt",k,l),i("confirm",k,l),f.on.dialogStartReceived.add(n),f.on.dialogEndReceived.add(p)}function r(){c.log("DEACTIVATE WINDOW DIALOG SERVICE"),j("alert"),j("prompt"),j("confirm"),f.on.dialogStartReceived.remove(n),f.on.dialogEndReceived.remove(p)}var s=this,t={},u=h?h.getVirtualMouseManager():{};d=g[d],c.log("Initializing window dialog service for "+d),b.extend(s,{activate:q,deactivate:r,destroyDialogs:function(){try{h.destroyDialogs()}catch(a){c.log("NO CURRENT DIALOGS")}}})}var g={};return g[d.userRoles.SLAVE]="slave",g[d.userRoles.MASTER]="master",f}),define("cb/lib/iframeMatcher",["underscore","URI","util"],function(a,b,c){"use strict";function d(d){function e(c){var e,g,h=new b(c);if(a.contains(d,"*"))return!0;for(e=0;e<d.length;e++)if(g=d[e],f(h,g))return!0;return!1}function f(a,c){return new b(a).host()===new b(c).host()}function g(a,c){return h(a,new b(c).host())}function h(a,d){var e;return c.isSubdomain(d)&&(d=c.raiseDomainLevel(d)),e=new RegExp(d+"$"),e.test(new b(a).host())}function i(a){return!new b(a).is("absolute")}function j(a){var b,c;return!a.hasAttribute("srcdoc")&&(!a.hasAttribute("src")||(b=a.getAttribute("src"),c=document.location.href,k(b,c)||e(b)))}function k(a,b){return i(a)||f(a,b)||g(a,b)}function l(a){return!e(a)}if(!a.isArray(d))throw new Error("Misconfiguration: wrong allowedThirdPartyDomains format");c.log("ALLOWED DOMAINS FOR IFRAMES: ",d),a.extend(this,{isAllowed:j,isFirstParty:k,isSrcDisallowed:l})}return d}),define("cb/app/master/masterCore",["jquery","underscore","cb/environment","signals","util","cb/constants","cb/transport/clients/contextClient","cb/transport/clients/masterDomClient","cb/transport/clients/scrollClient","cb/transport/clients/mouseClient","cb/transport/clients/inputClient","cb/transport/clients/windowDialogClient","cb/transport/clients/masterCssClient","cb/services/scroll/scrollService","cb/services/masterDomService","cb/services/ModeService","cb/services/mouseService","cb/services/masterInputService","cb/services/restrictions/dataMaskingService","cb/services/restrictions/domRestrictionsService","cb/services/restrictions/domControlService","cb/services/windowDialogService","cb/lib/iframeMatcher"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){"use strict";function x(x,z,A,B){function C(a){e.log("MASTER CORE: CONNECTED; CONTEXT: ",A),a.newSession&&(e.log("MASTER CORE: NEW SESSION, CLEARING CACHED CONFIG"),x.clearSessionConfigCache()),e.log("MASTER CORE: GETTING SESSION CONFIG"),x.getSessionConfig(function(d){var g,h,i,j,k,l=new p(x.getSession());if(e.log("MASTER CORE: GOT SESSION CONFIG; CONTEXT: ",A),!d)return x.getSessionClient().disconnect(f.sessionEndTriggers.ERROR),void b.defer(function(){throw new Error("Session configuration error. Unable to start Co-browse")});M=new w(a.allowedThirdPartyDomains),K=new t(d),L=new u(K),h=new n(y,T,l,O),g=new r(V,l,L,b.pick(B,f.EVENTS_HANDLING_OPTIONS)),j=new s(K.getConfig().dataMasking,b.pick(B,f.UNMASK_PWD_OPTION)),j.on.elementMarked.add(P.elementMasked.dispatch),i=new q(y,U,x.getMouseSyncInterval(),x.getVirtualMouseManager(),l,L,b.pick(B,f.EVENTS_HANDLING_OPTIONS)),k=new v(y,W),J=new o(O.get("userId"),S,h,g,i,z,j,k),J.on.beforeMirroringActivated.add(function(){H()}),J.on.iframeAdded.add(function(a){var b=c.master.indexIframeIfNotYet(a,x.getNextContextId);e.log("NEW IFRAME DETECTED, CONTEXT ID SET TO ",b),D(a)}),J.on.deliveryTimeout.add(function(){e.log("TIMEOUT FOR DOM MESSAGE IS UNACCEPTABLE. TERMINATING THE SESSION"),x.getSessionClient().disconnect(f.sessionEndTriggers.TIMEOUT)}),P.pickedUpSlaves.add(function(a){J.initializeSlaves(a,!1)}),J.activate(),z.activate({foreignMouseEvent:i.on.foreignMouseEvent,cssClient:X}),F()})}function D(a){P.iframeDetected.dispatch(a,E(a))}function E(a){return{isAllowed:M.isAllowed(a)}}function F(){O.users.length&&(e.log("SUCCESSFULLY EXTRACTED CONNECTED SLAVE ID: ",O.users.toJSON()),P.pickedUpSlaves.dispatch(O.users.pluck("userId")))}function G(){e.log("EXITED SESSION"),J&&J.deactivate()}function H(){e.log("INDEXING IFRAMES"),a("iframe").each(function(){c.master.indexIframeIfNotYet(this,x.getNextContextId),D(this)})}function I(){e.log("MASTER CORE INIT, CONTEXT: ",A),Q.on.connected.add(C),Q.on.disconnected.add(G)}var J,K,L,M,N=this,O=x.getSession(),P={pickedUpSlaves:new d,elementMasked:new d,iframeDetected:new d},Q=x.getSessionClient(),R=new g(Q.getCoreClient(),A),S=new h(R),T=new i(R),U=new j(R),V=new k(R),W=new l(R),X=new m(R);I(),b.extend(N,{on:P})}var y=f.userRoles.MASTER;return x}),this.org=this.org||{},org.cometd={},org.cometd.JSON={},org.cometd.JSON.toJSON=org.cometd.JSON.fromJSON=function(a){throw"Abstract"},org.cometd.Utils={},org.cometd.Utils.isString=function(a){return void 0!==a&&null!==a&&("string"==typeof a||a instanceof String)},org.cometd.Utils.isArray=function(a){return void 0!==a&&null!==a&&a instanceof Array},org.cometd.Utils.inArray=function(a,b){for(var c=0;c<b.length;++c)if(a===b[c])return c;return-1},org.cometd.Utils.setTimeout=function(a,b,c){return window.setTimeout(function(){try{b()}catch(c){a._debug("Exception invoking timed function",b,c)}},c)},org.cometd.Utils.clearTimeout=function(a){window.clearTimeout(a)},org.cometd.TransportRegistry=function(){var a=[],b={};this.getTransportTypes=function(){return a.slice(0)},this.findTransportTypes=function(c,d,e){for(var f=[],g=0;g<a.length;++g){var h=a[g];!0===b[h].accept(c,d,e)&&f.push(h)}return f},this.negotiateTransport=function(c,d,e,f){for(var g=0;g<a.length;++g)for(var h=a[g],i=0;i<c.length;++i)if(h===c[i]){var j=b[h];if(!0===j.accept(d,e,f))return j}return null},this.add=function(c,d,e){for(var f=!1,g=0;g<a.length;++g)if(a[g]===c){f=!0;break}return f||("number"!=typeof e?a.push(c):a.splice(e,0,c),b[c]=d),!f},this.find=function(c){for(var d=0;d<a.length;++d)if(a[d]===c)return b[c];return null},this.remove=function(c){for(var d=0;d<a.length;++d)if(a[d]===c){a.splice(d,1);var e=b[c];return delete b[c],e}return null},this.clear=function(){a=[],b={}},this.reset=function(){for(var c=0;c<a.length;++c)b[a[c]].reset()}},org.cometd.Transport=function(){var a,b;this.registered=function(c,d){a=c,b=d},this.unregistered=function(){a=null,b=null},this._debug=function(){b._debug.apply(b,arguments)},this._mixin=function(){return b._mixin.apply(b,arguments)},this.getConfiguration=function(){return b.getConfiguration()},this.getAdvice=function(){return b.getAdvice()},this.setTimeout=function(a,c){return org.cometd.Utils.setTimeout(b,a,c)},this.clearTimeout=function(a){org.cometd.Utils.clearTimeout(a)},this.convertToMessages=function(a){if(org.cometd.Utils.isString(a))try{return org.cometd.JSON.fromJSON(a)}catch(b){throw this._debug("Could not convert to JSON the following string",'"'+a+'"'),b}if(org.cometd.Utils.isArray(a))return a;if(void 0===a||null===a)return[];if(a instanceof Object)return[a];throw"Conversion Error "+a+", typeof "+typeof a},this.accept=function(a,b,c){throw"Abstract"},this.getType=function(){return a},this.send=function(a,b){throw"Abstract"},this.reset=function(){this._debug("Transport",a,"reset")},this.abort=function(){this._debug("Transport",a,"aborted")},this.toString=function(){return this.getType()}},org.cometd.Transport.derive=function(a){function b(){}return b.prototype=a,new b},org.cometd.RequestTransport=function(){function a(a){for(;l.length>0;){var b=l[0],c=b[0],d=b[1];if(c.url!==a.url||c.sync!==a.sync)break;l.shift(),a.messages=a.messages.concat(c.messages),this._debug("Coalesced",c.messages.length,"messages from request",d.id)}}function b(a,b){if(this.transportSend(a,b),b.expired=!1,!a.sync){var c=this.getConfiguration().maxNetworkDelay,d=c;!0===b.metaConnect&&(d+=this.getAdvice().timeout),this._debug("Transport",this.getType(),"waiting at most",d,"ms for the response, maxNetworkDelay",c);var e=this;b.timeout=this.setTimeout(function(){b.expired=!0;var c="Request "+b.id+" of transport "+e.getType()+" exceeded "+d+" ms max network delay",f={reason:c},g=b.xhr;f.httpCode=e.xhrStatus(g),e.abortXHR(g),e._debug(c),e.complete(b,!1,b.metaConnect),a.onFailure(g,a.messages,f)},d)}}function c(a){var c=++i,d={id:c,metaConnect:!1};k.length<this.getConfiguration().maxConnections-1?(k.push(d),b.call(this,a,d)):(this._debug("Transport",this.getType(),"queueing request",c,"envelope",a),l.push([a,d]))}function d(a){var b=a.id;if(this._debug("Transport",this.getType(),"metaConnect complete, request",b),null!==j&&j.id!==b)throw"Longpoll request mismatch, completing request "+b;j=null}function e(b,d){var e=org.cometd.Utils.inArray(b,k);if(e>=0&&k.splice(e,1),l.length>0){var f=l.shift(),g=f[0],h=f[1];if(this._debug("Transport dequeued request",h.id),d)this.getConfiguration().autoBatch&&a.call(this,g),c.call(this,g),this._debug("Transport completed request",b.id,g);else{var i=this;this.setTimeout(function(){i.complete(h,!1,h.metaConnect);var a={reason:"Previous request failed"},b=h.xhr;a.httpCode=i.xhrStatus(b),g.onFailure(b,g.messages,a)},0)}}}function f(a){if(null!==j)throw"Concurrent metaConnect requests not allowed, request id="+j.id+" not yet completed";var c=++i;this._debug("Transport",this.getType(),"metaConnect send, request",c,"envelope",a);var d={id:c,metaConnect:!0};b.call(this,a,d),j=d}var g=new org.cometd.Transport,h=org.cometd.Transport.derive(g),i=0,j=null,k=[],l=[];return h.complete=function(a,b,c){c?d.call(this,a):e.call(this,a,b)},h.transportSend=function(a,b){throw"Abstract"},h.transportSuccess=function(a,b,c){b.expired||(this.clearTimeout(b.timeout),this.complete(b,!0,b.metaConnect),c&&c.length>0?a.onSuccess(c):a.onFailure(b.xhr,a.messages,{httpCode:204}))},h.transportFailure=function(a,b,c){b.expired||(this.clearTimeout(b.timeout),this.complete(b,!1,b.metaConnect),a.onFailure(b.xhr,a.messages,c))},h.send=function(a,b){b?f.call(this,a):c.call(this,a)},h.abort=function(){g.abort();for(var a=0;a<k.length;++a){var b=k[a];this._debug("Aborting request",b),this.abortXHR(b.xhr)}j&&(this._debug("Aborting metaConnect request",j),this.abortXHR(j.xhr)),this.reset()},h.reset=function(){g.reset(),j=null,k=[],l=[]},h.abortXHR=function(a){if(a)try{a.abort()}catch(a){this._debug(a)}},h.xhrStatus=function(a){if(a)try{return a.status}catch(a){this._debug(a)}return-1},h},org.cometd.LongPollingTransport=function(){var a=new org.cometd.RequestTransport,b=org.cometd.Transport.derive(a),c=!0;return b.accept=function(a,b,d){return c||!b},b.xhrSend=function(a){throw"Abstract"},b.transportSend=function(a,b){this._debug("Transport",this.getType(),"sending request",b.id,"envelope",a);var d=this;try{var e=!0;b.xhr=this.xhrSend({transport:this,url:a.url,sync:a.sync,headers:this.getConfiguration().requestHeaders,body:org.cometd.JSON.toJSON(a.messages),onSuccess:function(e){d._debug("Transport",d.getType(),"received response",e);var f=!1;try{var g=d.convertToMessages(e);0===g.length?(c=!1,d.transportFailure(a,b,{httpCode:204})):(f=!0,d.transportSuccess(a,b,g))}catch(e){if(d._debug(e),!f){c=!1;var h={exception:e};h.httpCode=d.xhrStatus(b.xhr),d.transportFailure(a,b,h)}}},onError:function(f,g){c=!1;var h={reason:f,exception:g};h.httpCode=d.xhrStatus(b.xhr),e?d.setTimeout(function(){d.transportFailure(a,b,h)},0):d.transportFailure(a,b,h)}}),e=!1}catch(e){c=!1,this.setTimeout(function(){d.transportFailure(a,b,{exception:e})},0)}},b.reset=function(){a.reset(),c=!0},b},org.cometd.CallbackPollingTransport=function(){var a=new org.cometd.RequestTransport,b=org.cometd.Transport.derive(a),c=2e3;return b.accept=function(a,b,c){return!0},b.jsonpSend=function(a){throw"Abstract"},b.transportSend=function(a,b){for(var d=this,e=0,f=a.messages.length,g=[];f>0;){var h=org.cometd.JSON.toJSON(a.messages.slice(e,e+f));if(a.url.length+encodeURI(h).length>c){if(1===f)return void this.setTimeout(function(){d.transportFailure(a,b,{reason:"Bayeux message too big, max is "+c})},0);--f}else g.push(f),e+=f,f=a.messages.length-e}var i=a;if(g.length>1){var j=0,k=g[0];this._debug("Transport",this.getType(),"split",a.messages.length,"messages into",g.join(" + ")),i=this._mixin(!1,{},a),i.messages=a.messages.slice(j,k),i.onSuccess=a.onSuccess,i.onFailure=a.onFailure;for(var l=1;l<g.length;++l){var m=this._mixin(!1,{},a);j=k,k+=g[l],m.messages=a.messages.slice(j,k),m.onSuccess=a.onSuccess,m.onFailure=a.onFailure,this.send(m,b.metaConnect)}}this._debug("Transport",this.getType(),"sending request",b.id,"envelope",i);try{var n=!0;this.jsonpSend({transport:this,url:i.url,sync:i.sync,headers:this.getConfiguration().requestHeaders,body:org.cometd.JSON.toJSON(i.messages),onSuccess:function(a){var c=!1;try{var e=d.convertToMessages(a);0===e.length?d.transportFailure(i,b,{httpCode:204}):(c=!0,d.transportSuccess(i,b,e))}catch(a){d._debug(a),c||d.transportFailure(i,b,{exception:a})}},onError:function(a,c){var e={reason:a,exception:c};n?d.setTimeout(function(){d.transportFailure(i,b,e)},0):d.transportFailure(i,b,e)}}),n=!1}catch(a){this.setTimeout(function(){d.transportFailure(i,b,{exception:a})},0)}},b},org.cometd.WebSocketTransport=function(){function a(){if(!l){l=!0;var a=d.getURL().replace(/^http/,"ws");this._debug("Transport",this.getType(),"connecting to URL",a);try{var b=d.getConfiguration().protocol,c=b?new org.cometd.WebSocket(a,b):new org.cometd.WebSocket(a)}catch(a){throw g=!1,this._debug("Exception while creating WebSocket object",a),a}i=!1!==d.getConfiguration().stickyReconnect;var e=this,f=null,h=d.getConfiguration().connectTimeout;h>0&&(f=this.setTimeout(function(){f=null,e._debug("Transport",e.getType(),"timed out while connecting to URL",a,":",h,"ms");var b={code:1e3,reason:"Connect Timeout"};e.webSocketClose(c,b.code,b.reason),e.onClose(c,b)},h));var j=function(){e._debug("WebSocket opened",c),l=!1,f&&(e.clearTimeout(f),f=null),m?(d._warn("Closing Extra WebSocket Connections",c,m),e.webSocketClose(c,1e3,"Extra Connection")):e.onOpen(c)},k=function(a){a=a||{code:1e3},e._debug("WebSocket closing",c,a),l=!1,f&&(e.clearTimeout(f),f=null),null!==m&&c!==m?e._debug("Closed Extra WebSocket Connection",c):e.onClose(c,a)},n=function(a){e._debug("WebSocket message",a,c),c!==m&&d._warn("Extra WebSocket Connections",c,m),e.onMessage(c,a)};c.onopen=j,c.onclose=k,c.onerror=function(){k({code:1002,reason:"Error"})},c.onmessage=n,this._debug("Transport",this.getType(),"configured callbacks on",c)}}function b(a,b,c){var d=org.cometd.JSON.toJSON(b.messages);a.send(d),this._debug("Transport",this.getType(),"sent",b,"metaConnect =",c);var e=this.getConfiguration().maxNetworkDelay,f=e;c&&(f+=this.getAdvice().timeout,n=!0);for(var g=this,h=[],i=0;i<b.messages.length;++i)!function(){var c=b.messages[i];c.id&&(h.push(c.id),k[c.id]=this.setTimeout(function(){g._debug("Transport",g.getType(),"timing out message",c.id,"after",f,"on",a);var b={code:1e3,reason:"Message Timeout"};g.webSocketClose(a,b.code,b.reason),g.onClose(a,b)},f))}();this._debug("Transport",this.getType(),"waiting at most",f,"ms for messages",h,"maxNetworkDelay",e,", timeouts:",k)}function c(c,d,e){try{null===c?a.call(this):b.call(this,c,d,e)}catch(a){this.setTimeout(function(){d.onFailure(c,d.messages,{exception:a})},0)}}var d,e=new org.cometd.Transport,f=org.cometd.Transport.derive(e),g=!0,h=!1,i=!0,j={},k={},l=!1,m=null,n=!1,o=null;return f.reset=function(){e.reset(),g=!0,h=!1,i=!0,j={},k={},l=!1,m=null,n=!1,o=null},f.onOpen=function(a){this._debug("Transport",this.getType(),"opened",a),m=a,h=!0,this._debug("Sending pending messages",j);for(var c in j){var d=j[c],e=d[0],f=d[1];o=e.onSuccess,b.call(this,a,e,f)}},f.onMessage=function(a,b){this._debug("Transport",this.getType(),"received websocket message",b,a);for(var c=!1,d=this.convertToMessages(b.data),e=[],f=0;f<d.length;++f){var g=d[f];if((/^\/meta\//.test(g.channel)||void 0!==g.successful)&&g.id){e.push(g.id);var h=k[g.id];h&&(this.clearTimeout(h),delete k[g.id],this._debug("Transport",this.getType(),"removed timeout for message",g.id,", timeouts",k))}"/meta/connect"===g.channel&&(n=!1),"/meta/disconnect"!==g.channel||n||(c=!0)}for(var i=!1,l=0;l<e.length;++l){var m=e[l];for(var p in j){var q=p.split(","),r=org.cometd.Utils.inArray(m,q);if(r>=0){i=!0,q.splice(r,1);var s=j[p][0],t=j[p][1];delete j[p],q.length>0&&(j[q.join(",")]=[s,t]);break}}}i&&this._debug("Transport",this.getType(),"removed envelope, envelopes",j),o.call(this,d),c&&this.webSocketClose(a,1e3,"Disconnect")},f.onClose=function(a,b){this._debug("Transport",this.getType(),"closed",a,b),g=i&&h;for(var c in k)this.clearTimeout(k[c]);k={};for(var d in j){var e=j[d][0];j[d][1]&&(n=!1),e.onFailure(a,e.messages,{websocketCode:b.code,reason:b.reason})}j={},m=null},f.registered=function(a,b){e.registered(a,b),d=b},f.accept=function(a,b,c){return g&&!!org.cometd.WebSocket&&!1!==d.websocketEnabled},f.send=function(a,b){this._debug("Transport",this.getType(),"sending",a,"metaConnect =",b);for(var d=[],e=0;e<a.messages.length;++e){var f=a.messages[e];f.id&&d.push(f.id)}j[d.join(",")]=[a,b],this._debug("Transport",this.getType(),"stored envelope, envelopes",j),c.call(this,m,a,b)},f.webSocketClose=function(a,b,c){try{a.close(b,c)}catch(a){this._debug(a)}},f.abort=function(){if(e.abort(),m){var a={code:1001,reason:"Abort"};this.webSocketClose(m,a.code,a.reason),this.onClose(m,a)}this.reset()},f},org.cometd.Cometd=function(a){function b(a,b){try{return a[b]}catch(a){return}}function c(a){return org.cometd.Utils.isString(a)}function d(a){return void 0!==a&&null!==a&&"function"==typeof a}function e(a,b){if(window.console){var c=window.console[a];d(c)&&c.apply(window.console,b)}}function f(a){fa._debug("Configuring cometd object with",a),c(a)&&(a={url:a}),a||(a={}),xa=fa._mixin(!1,xa,a);var b=fa.getURL();if(!b)throw"Missing required configuration parameter 'url' specifying the Bayeux server URL";var d=/(^https?:\/\/)?(((\[[^\]]+\])|([^:\/\?#]+))(:(\d+))?)?([^\?#]*)(.*)?/.exec(b),e=d[2],f=d[8],g=d[9];if(ha=fa._isCrossDomain(e),xa.appendMessageTypeToURL)if(void 0!==g&&g.length>0)fa._info("Appending message type to URI "+f+g+" is not supported, disabling 'appendMessageTypeToURL' configuration"),xa.appendMessageTypeToURL=!1;else{var h=f.split("/"),i=h.length-1;f.match(/\/$/)&&(i-=1),h[i].indexOf(".")>=0&&(fa._info("Appending message type to URI "+f+" is not supported, disabling 'appendMessageTypeToURL' configuration"),xa.appendMessageTypeToURL=!1)}}function g(a){if(a){var b=pa[a.channel];b&&b[a.id]&&(delete b[a.id],fa._debug("Removed",a.listener?"listener":"subscription",a))}}function h(a){a&&!a.listener&&g(a)}function i(){for(var a in pa){var b=pa[a];if(b)for(var c=0;c<b.length;++c)h(b[c])}}function j(a){ja!==a&&(fa._debug("Status",ja,"->",a),ja=a)}function k(){return"disconnecting"===ja||"disconnected"===ja}function l(){return++ka}function m(a,b,c,e,f){try{return b.call(a,e)}catch(a){fa._debug("Exception during execution of extension",c,a);var g=fa.onExtensionException;if(d(g)){fa._debug("Invoking extension exception callback",c,a);try{g.call(fa,a,c,f,e)}catch(a){fa._info("Exception during execution of exception callback in extension",c,a)}}return e}}function n(a){for(var b=0;b<sa.length&&(void 0!==a&&null!==a);++b){var c=xa.reverseIncomingExtensions?sa.length-1-b:b,e=sa[c],f=e.extension.incoming;if(d(f)){var g=m(e.extension,f,e.name,a,!1);a=void 0===g?a:g}}return a}function o(a){for(var b=0;b<sa.length&&(void 0!==a&&null!==a);++b){var c=sa[b],e=c.extension.outgoing;if(d(e)){var f=m(c.extension,e,c.name,a,!0);a=void 0===f?a:f}}return a}function p(a,b){var c=pa[a];if(c&&c.length>0)for(var e=0;e<c.length;++e){var f=c[e];if(f)try{f.callback.call(f.scope,b)}catch(a){fa._debug("Exception during notification",f,b,a);var g=fa.onListenerException;if(d(g)){fa._debug("Invoking listener exception callback",f,a);try{g.call(fa,a,f,f.listener,b)}catch(a){fa._info("Exception during execution of listener callback",f,a)}}}}}function q(a,b){p(a,b);for(var c=a.split("/"),d=c.length-1,e=d;e>0;--e){var f=c.slice(0,e).join("/")+"/*";e===d&&p(f,b),f+="*",p(f,b)}}function r(){null!==ra&&org.cometd.Utils.clearTimeout(ra),ra=null}function s(a){r();var b=ta.interval+qa;fa._debug("Function scheduled in",b,"ms, interval =",ta.interval,"backoff =",qa,a),ra=org.cometd.Utils.setTimeout(fa,a,b)}function t(a,b,c,e){for(var f=0;f<b.length;++f){var g=b[f],h=""+l();g.id=h,la&&(g.clientId=la);var i=void 0;d(g._callback)&&(i=g._callback,delete g._callback),g=o(g),void 0!==g&&null!==g?(g.id=h,b[f]=g,i&&(ua[h]=i)):b.splice(f--,1)}if(0!==b.length){var j=fa.getURL();xa.appendMessageTypeToURL&&(j.match(/\/$/)||(j+="/"),e&&(j+=e));var k={url:j,sync:a,messages:b,onSuccess:function(a){try{ya.call(fa,a)}catch(a){fa._debug("Exception during handling of messages",a)}},onFailure:function(a,b,c){try{c.connectionType=fa.getTransport().getType(),za.call(fa,a,b,c)}catch(a){fa._debug("Exception during handling of failure",a)}}};fa._debug("Send",k),ca.send(k,c)}}function u(a){ma>0||!0===oa?na.push(a):t(!1,[a],!1)}function v(){qa=0}function w(){qa<xa.maxBackoff&&(qa+=xa.backoffIncrement)}function x(){++ma}function y(){var a=na;na=[],a.length>0&&t(!1,a,!1)}function z(){if(--ma<0)throw"Calls to startBatch() and endBatch() are not paired";0!==ma||k()||oa||y()}function A(){if(!k()){var a={channel:"/meta/connect",connectionType:ca.getType()};wa||(a.advice={timeout:0}),j("connecting"),fa._debug("Connect sent",a),t(!1,[a],!0,"connect"),j("connected")}}function B(){j("connecting"),s(function(){A()})}function C(a){a&&(ta=fa._mixin(!1,{},xa.advice,a),fa._debug("New advice",ta))}function D(a){r(),a&&ca.abort(),la=null,j("disconnected"),ma=0,v(),ca=null,na.length>0&&(za.call(fa,void 0,na,{reason:"Disconnected"}),na=[])}function E(a,b,c){var e=fa.onTransportFailure;if(d(e)){fa._debug("Invoking transport failure callback",a,b,c);try{e.call(fa,a,b,c)}catch(a){fa._info("Exception during execution of transport failure callback",a)}}}function F(a,b){d(a)&&(b=a,a=void 0),la=null,i(),k()?(ia.reset(),C(xa.advice)):C(fa._mixin(!1,ta,{reconnect:"retry"})),ma=0,oa=!0,da=a,ea=b;var c="1.0",e=fa.getURL(),f=ia.findTransportTypes(c,ha,e),g={version:c,minimumVersion:c,channel:"/meta/handshake",supportedConnectionTypes:f,_callback:b,advice:{timeout:ta.timeout,interval:ta.interval}},h=fa._mixin(!1,{},da,g);if(!ca&&!(ca=ia.negotiateTransport(f,c,ha,e))){var l="Could not find initial transport among: "+ia.getTransportTypes();throw fa._warn(l),l}fa._debug("Initial transport is",ca.getType()),j("handshaking"),fa._debug("Handshake sent",h),t(!1,[h],!1,"handshake")}function G(){j("handshaking"),oa=!0,s(function(){F(da,ea)})}function H(a){var b=ua[a.id];d(b)&&(delete ua[a.id],b.call(fa,a))}function I(a){H(a),q("/meta/handshake",a),q("/meta/unsuccessful",a),k()||"none"===ta.reconnect?D(!1):(w(),G())}function J(a){if(a.successful){la=a.clientId;var b=fa.getURL(),c=ia.negotiateTransport(a.supportedConnectionTypes,a.version,ha,b);if(null===c){var d="Could not negotiate transport with server; client=["+ia.findTransportTypes(a.version,ha,b)+"], server=["+a.supportedConnectionTypes+"]",e=fa.getTransport();return E(e.getType(),null,{reason:d,connectionType:e.getType(),transport:e}),fa._warn(d),void D(!0)}ca!==c&&(fa._debug("Transport",ca.getType(),"->",c.getType()),ca=c),oa=!1,y(),a.reestablish=va,va=!0,H(a),q("/meta/handshake",a);var f=k()?"none":ta.reconnect;switch(f){case"retry":v(),B();break;case"none":D(!1);break;default:throw"Unrecognized advice action "+f}}else I(a)}function K(a){var b="1.0",c=fa.getURL(),d=fa.getTransport(),e=ia.findTransportTypes(b,ha,c),f=ia.negotiateTransport(e,b,ha,c);f?(fa._debug("Transport",d.getType(),"->",f.getType()),E(d.getType(),f.getType(),a.failure),I(a),ca=f):(E(d.getType(),null,a.failure),fa._warn("Could not negotiate transport; client=["+e+"]"),D(!0),I(a))}function L(a){q("/meta/connect",a),q("/meta/unsuccessful",a);var b=k()?"none":ta.reconnect;switch(b){case"retry":B(),w();break;case"handshake":ia.reset(),v(),G();break;case"none":D(!1);break;default:throw"Unrecognized advice action"+b}}function M(a){if(wa=a.successful){q("/meta/connect",a);var b=k()?"none":ta.reconnect;switch(b){case"retry":v(),B();break;case"none":D(!1);break;default:throw"Unrecognized advice action "+b}}else L(a)}function N(a){wa=!1,L(a)}function O(a){D(!0),H(a),q("/meta/disconnect",a),q("/meta/unsuccessful",a)}function P(a){a.successful?(D(!1),H(a),q("/meta/disconnect",a)):O(a)}function Q(a){O(a)}function R(a){var b=pa[a.subscription];if(b)for(var c=b.length-1;c>=0;--c){var d=b[c];if(d&&!d.listener){delete b[c],fa._debug("Removed failed subscription",d);break}}H(a),q("/meta/subscribe",a),q("/meta/unsuccessful",a)}function S(a){a.successful?(H(a),q("/meta/subscribe",a)):R(a)}function T(a){R(a)}function U(a){H(a),q("/meta/unsubscribe",a),q("/meta/unsuccessful",a)}function V(a){a.successful?(H(a),q("/meta/unsubscribe",a)):U(a)}function W(a){U(a)}function X(a){H(a),q("/meta/publish",a),q("/meta/unsuccessful",a)}function Y(a){void 0===a.successful?void 0!==a.data?q(a.channel,a):fa._warn("Unknown Bayeux Message",a):a.successful?(H(a),q("/meta/publish",a)):X(a)}function Z(a){X(a)}function $(a){if(void 0!==(a=n(a))&&null!==a){C(a.advice);switch(a.channel){case"/meta/handshake":J(a);break;case"/meta/connect":M(a);break;case"/meta/disconnect":P(a);break;case"/meta/subscribe":S(a);break;case"/meta/unsubscribe":V(a);break;default:Y(a)}}}function _(a){var b=pa[a];if(b)for(var c=0;c<b.length;++c)if(b[c])return!0;return!1}function aa(a,b){var e={scope:a,method:b};if(d(a))e.scope=void 0,e.method=a;else if(c(b)){if(!a)throw"Invalid scope "+a;if(e.method=a[b],!d(e.method))throw"Invalid callback "+b+" for scope "+a}else if(!d(b))throw"Invalid callback "+b;return e}function ba(a,b,c,d){var e=aa(b,c);fa._debug("Adding",d?"listener":"subscription","on",a,"with scope",e.scope,"and callback",e.method);var f={channel:a,scope:e.scope,callback:e.method,listener:d},g=pa[a];return g||(g=[],pa[a]=g),f.id=g.push(f)-1,fa._debug("Added",d?"listener":"subscription",f),f[0]=a,f[1]=f.id,f}var ca,da,ea,fa=this,ga=a||"default",ha=!1,ia=new org.cometd.TransportRegistry,ja="disconnected",ka=0,la=null,ma=0,na=[],oa=!1,pa={},qa=0,ra=null,sa=[],ta={},ua={},va=!1,wa=!1,xa={protocol:null,stickyReconnect:!0,connectTimeout:0,maxConnections:2,backoffIncrement:1e3,maxBackoff:6e4,logLevel:"info",reverseIncomingExtensions:!0,maxNetworkDelay:1e4,requestHeaders:{},appendMessageTypeToURL:!0,autoBatch:!1,advice:{timeout:6e4,interval:0,reconnect:"retry"}};this._mixin=function(a,c,d){for(var e=c||{},f=2;f<arguments.length;++f){var g=arguments[f];if(void 0!==g&&null!==g)for(var h in g){var i=b(g,h),j=b(e,h);if(i!==c&&void 0!==i)if(a&&"object"==typeof i&&null!==i)if(i instanceof Array)e[h]=this._mixin(a,j instanceof Array?j:[],i);else{var k="object"!=typeof j||j instanceof Array?{}:j;e[h]=this._mixin(a,k,i)}else e[h]=i}}return e},this._warn=function(){e("warn",arguments)},this._info=function(){"warn"!==xa.logLevel&&e("info",arguments)},this._debug=function(){"debug"===xa.logLevel&&e("debug",arguments)},this._isCrossDomain=function(a){return a&&a!==window.location.host};var ya,za;this.send=u,this.receive=$,ya=function(a){fa._debug("Received",a);for(var b=0;b<a.length;++b){$(a[b])}},za=function(a,b,c){fa._debug("handleFailure",a,b,c),c.transport=a;for(var d=0;d<b.length;++d){var e=b[d],f={id:e.id,successful:!1,channel:e.channel,failure:c};switch(c.message=e,e.channel){case"/meta/handshake":K(f);break;case"/meta/connect":N(f);break;case"/meta/disconnect":Q(f);break;case"/meta/subscribe":f.subscription=e.subscription,T(f);break;case"/meta/unsubscribe":f.subscription=e.subscription,W(f);break;default:Z(f)}}},this.registerTransport=function(a,b,c){var e=ia.add(a,b,c);return e&&(this._debug("Registered transport",a),d(b.registered)&&b.registered(a,this)),e},this.getTransportTypes=function(){return ia.getTransportTypes()},this.unregisterTransport=function(a){var b=ia.remove(a);return null!==b&&(this._debug("Unregistered transport",a),d(b.unregistered)&&b.unregistered()),b},this.unregisterTransports=function(){ia.clear()},this.findTransport=function(a){return ia.find(a)},this.configure=function(a){f.call(this,a)},this.init=function(a,b){this.configure(a),this.handshake(b)},this.handshake=function(a,b){j("disconnected"),va=!1,F(a,b)},this.disconnect=function(a,b,c){if(!k()){"boolean"!=typeof a&&(c=b,b=a,a=!1),d(b)&&(c=b,b=void 0);var e={channel:"/meta/disconnect",_callback:c},f=this._mixin(!1,{},b,e);j("disconnecting"),t(!0===a,[f],!1,"disconnect")}},this.startBatch=function(){x()},this.endBatch=function(){z()},this.batch=function(a,b){var c=aa(a,b);this.startBatch();try{c.method.call(c.scope),this.endBatch()}catch(a){throw this._info("Exception during execution of batch",a),this.endBatch(),a}},this.addListener=function(a,b,d){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!c(a))throw"Illegal argument type: channel must be a string";return ba(a,b,d,!0)},this.removeListener=function(a){if(!(a&&a.channel&&"id"in a))throw"Invalid argument: expected subscription, not "+a;g(a)},this.clearListeners=function(){pa={}},this.subscribe=function(a,b,e,f,g){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!c(a))throw"Illegal argument type: channel must be a string";if(k())throw"Illegal state: already disconnected";d(b)&&(g=f,f=e,e=b,b=void 0),d(f)&&(g=f,f=void 0);var h=!_(a),i=ba(a,b,e,!1);if(h){var j={channel:"/meta/subscribe",subscription:a,_callback:g};u(this._mixin(!1,{},f,j))}return i},this.unsubscribe=function(a,b,c){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(k())throw"Illegal state: already disconnected";d(b)&&(c=b,b=void 0),this.removeListener(a);var e=a.channel;if(!_(e)){var f={channel:"/meta/unsubscribe",subscription:e,_callback:c};u(this._mixin(!1,{},b,f))}},this.resubscribe=function(a,b){if(h(a),a)return this.subscribe(a.channel,a.scope,a.callback,b)},this.clearSubscriptions=function(){i()},this.publish=function(a,b,e,f){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(!c(a))throw"Illegal argument type: channel must be a string";if(/^\/meta\//.test(a))throw"Illegal argument: cannot publish to meta channels";if(k())throw"Illegal state: already disconnected";d(b)?(f=b,b=e={}):d(e)&&(f=e,e={});var g={channel:a,data:b,_callback:f};u(this._mixin(!1,{},e,g))},this.getStatus=function(){return ja},this.isDisconnected=k,this.setBackoffIncrement=function(a){xa.backoffIncrement=a},this.getBackoffIncrement=function(){return xa.backoffIncrement},this.getBackoffPeriod=function(){return qa},this.setLogLevel=function(a){xa.logLevel=a},this.registerExtension=function(a,b){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!c(a))throw"Illegal argument type: extension name must be a string";for(var e=!1,f=0;f<sa.length;++f){if(sa[f].name===a){e=!0;break}}return e?(this._info("Could not register extension with name",a,"since another extension with the same name already exists"),!1):(sa.push({name:a,extension:b}),this._debug("Registered extension",a),d(b.registered)&&b.registered(a,this),!0)},this.unregisterExtension=function(a){if(!c(a))throw"Illegal argument type: extension name must be a string";for(var b=!1,e=0;e<sa.length;++e){var f=sa[e];if(f.name===a){sa.splice(e,1),b=!0,this._debug("Unregistered extension",a);var g=f.extension;d(g.unregistered)&&g.unregistered();break}}return b},this.getExtension=function(a){for(var b=0;b<sa.length;++b){var c=sa[b];if(c.name===a)return c.extension}return null},this.getName=function(){return ga},this.getClientId=function(){return la},this.getURL=function(){if(ca&&"object"==typeof xa.urls){var a=xa.urls[ca.getType()];if(a)return a}return xa.url},this.getTransport=function(){return ca},this.getConfiguration=function(){return this._mixin(!0,{},xa)},this.getAdvice=function(){return this._mixin(!0,{},ta)},org.cometd.WebSocket=window.WebSocket,org.cometd.WebSocket||(org.cometd.WebSocket=window.MozWebSocket)},"function"==typeof define&&define.amd&&define("org/cometd",[],function(){return org.cometd}),function(){function a(a,b,c){function d(a,b){if(b)for(var c in b)"content-type"!==c.toLowerCase()&&a.setRequestHeader(c,b[c])}function e(){var c=new b.LongPollingTransport,e=b.Transport.derive(c);return e.xhrSend=function(b){return a.ajax({url:b.url,async:!0!==b.sync,type:"POST",contentType:"application/json;charset=UTF-8",data:b.body,xhrFields:{withCredentials:!0},beforeSend:function(a){return d(a,b.headers),!0},success:b.onSuccess,error:function(a,c,d){b.onError(c,d)}})},e}function f(){var c=new b.CallbackPollingTransport,e=b.Transport.derive(c);return e.jsonpSend=function(b){a.ajax({url:b.url,async:!0!==b.sync,type:"GET",dataType:"jsonp",jsonp:"jsonp",data:{message:b.body},beforeSend:function(a){return d(a,b.headers),!0},success:b.onSuccess,error:function(a,c,d){b.onError(c,d)}})},e}return b.JSON.toJSON=c.stringify,b.JSON.fromJSON=c.parse,a.Cometd=function(a){var c=new b.Cometd(a);return b.WebSocket&&c.registerTransport("websocket",new b.WebSocketTransport),c.registerTransport("long-polling",new e),c.registerTransport("callback-polling",new f),c},a.cometd=new a.Cometd,a.cometd}"function"==typeof define&&define.amd?define("jquery.cometd",["jquery","org/cometd","json"],a):a(jQuery,org.cometd,JSON)}(),define("cb/transport/PostMessageTransport",["jquery","underscore","json","util","org/cometd","jquery.cometd","cb/lib/jquery.service-nodes"],function(a,b,c,d){"use strict";function e(){function e(){var c=(new a.Cometd).findTransport("callback-polling");return c.transportSuccess=b.bind(r.transportSuccess,r),c.transportFailure=b.bind(r.transportFailure,r),c}function j(){return t.length?t.pop():o()}function k(a){var b=a.sender;f?t.push(b):(b.$iframe.remove(),b.$form.remove()),delete s[a.request.id]}function l(b,c,d){a("<input/>",{type:"hidden",name:c,value:d}).cbMarkNode().appendTo(b)}function m(a,e){var f,g=j(),h=g.$iframe,i=g.$form;p||(f=document.createElement("a"),f.href=a.url,p=v(f),d.log("Set postMessage origin to "+p)),i.empty(),i.attr("action",a.url),i.attr("target",h.prop("name")),b.each(a.messages,function(a){l(i,"message",c.stringify(a))}),l(i,"id",e.id),l(i,"targetOrigin",w),s[e.id]={envelope:a,request:e,sender:g},i.submit()}function n(a,b){var c=org.cometd.JSON.toJSON(a.messages);c.length<=h&&a.url.length+encodeURIComponent(c).length+i<=h?u.transportSend(a,b):m(a,b)}var o,p,q=new org.cometd.RequestTransport,r=org.cometd.Transport.derive(q),s={},t=[],u=e(),v=function(a){return a.protocol+"//"+a.hostname+(a.port?":"+a.port:"")},w=v(document.location);return a(window).on("message",function(a){if(a.originalEvent.origin!==p)return!0;var b,d=c.parse(a.originalEvent.data),e=d.id,f=d.messages,g=s[e],h=g.envelope,i=g.request,j=!1;r._debug("Transport",r.getType(),"received response",f);try{b=r.convertToMessages(f),0===b.length?r.transportFailure(h,i,"no response",null):(j=!0,r.transportSuccess(h,i,b))}catch(a){r._debug(a),j||r.transportFailure(h,i,"bad response",a)}finally{k(g)}}),r.accept=function(){return!0},o=function(){var b=0;return function(){return{$iframe:a("<iframe />",{name:"_cbIframe_"+ ++b,css:{display:"none"}}).cbMarkNode().appendTo(document.body),$form:a("<form />",{method:"POST","accept-charset":"utf-8",css:{display:"none"}}).cbMarkNode().appendTo(document.body)}}}(),r.transportSend=g?n:m,r.reset=function(){q.reset(),u.reset()},r}var f=Boolean(Number(d.getUrlVar("ifrPool"))),g=!Boolean(Number(d.getUrlVar("no-jsonp"))),h=2e3,i=100;return e}),define("cb/transport/cometdWrapper",["jquery","underscore","util","cb/transport/PostMessageTransport","jquery.cometd"],function(a,b,c,d,e){"use strict";function f(){return e.unregisterTransport("callback-polling"),e.registerTransport("postmessage-polling",new d),e}return f}),function(a,b){"undefined"!=typeof exports?b(a,exports,require("underscore")):"function"==typeof define&&define.amd?define("backbone",["underscore","jquery","exports"],function(c,d,e){a.Backbone=b(a,e,c,d)}):a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender)}(this,function(a,b,c,d){var e=a.Backbone,f=[],g=f.push,h=f.slice,i=f.splice;b.VERSION="0.9.10",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var j=/\s+/,k=function(a,b,c,d){if(!c)return!0;if("object"==typeof c)for(var e in c)a[b].apply(a,[e,c[e]].concat(d));else{if(!j.test(c))return!0;for(var f=c.split(j),g=0,h=f.length;g<h;g++)a[b].apply(a,[f[g]].concat(d))}},l=function(a,b){var c,d=-1,e=a.length;switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,b[0]);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,b[0],b[1]);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,b[0],b[1],b[2]);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},m=b.Events={on:function(a,b,c){return k(this,"on",a,[b,c])&&b?(this._events||(this._events={}),(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this}),this):this},once:function(a,b,d){if(!k(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d),this},off:function(a,b,d){var e,f,g,h,i,j,l,m;if(!this._events||!k(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events={},this;for(h=a?[a]:c.keys(this._events),i=0,j=h.length;i<j;i++)if(a=h[i],e=this._events[a]){if(g=[],b||d)for(l=0,m=e.length;l<m;l++)f=e[l],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&g.push(f);this._events[a]=g}return this},trigger:function(a){if(!this._events)return this;var b=h.call(arguments,1);if(!k(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&l(c,b),d&&l(d,arguments),this},listenTo:function(a,b,d){return(this._listeners||(this._listeners={}))[a._listenerId||(a._listenerId=c.uniqueId("l"))]=a,a.on(b,"object"==typeof b?this:d,this),this},stopListening:function(a,b,c){var d=this._listeners;if(d){if(a)a.off(b,"object"==typeof b?this:c,this),b||c||delete d[a._listenerId];else{"object"==typeof b&&(c=this);for(var e in d)d[e].off(b,c,this);this._listeners={}}return this}}};m.bind=m.on,m.unbind=m.off,c.extend(b,m);var n=b.Model=function(a,b){var d,e=a||{};this.cid=c.uniqueId("c"),this.attributes={},b&&b.collection&&(this.collection=b.collection),b&&b.parse&&(e=this.parse(e,b)||{}),(d=c.result(this,"defaults"))&&(e=c.defaults({},e,d)),this.set(e,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(n.prototype,m,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(null==a)return this;if("object"==typeof a?(f=a,d=b):(f={})[a]=b,d||(d={}),!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=!0);for(var m=0,n=h.length;m<n;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)for(;this._pending;)this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return!!this.hasChanged()&&c.clone(this.changed);var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success;return a.success=function(a,c,d){if(!a.set(a.parse(c,d),d))return!1;b&&b(a,c,d)},this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h,i=this.attributes;return null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,!!(!e||d&&d.wait||this.set(e,d))&&(d=c.extend({validate:!0},d),!!this._validate(e,d)&&(e&&d.wait&&(this.attributes=c.extend({},i,e)),void 0===d.parse&&(d.parse=!0),f=d.success,d.success=function(a,b,d){a.attributes=i;var g=a.parse(b,d);if(d.wait&&(g=c.extend(e||{},g)),c.isObject(g)&&!a.set(g,d))return!1;f&&f(a,b,d)},g=this.isNew()?"create":d.patch?"patch":"update","patch"===g&&(d.attrs=e),h=this.sync(g,this,d),e&&d.wait&&(this.attributes=i),h))},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(a,b,c){(c.wait||a.isNew())&&e(),d&&d(a,b,c)},this.isNew())return a.success(this,null,a),!1;var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||G();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return!this.validate||!this.validate(this.attributes,a)},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return!d||(this.trigger("invalid",this,d,b||{}),!1)}});var o=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this.models=[],this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))};c.extend(o.prototype,m,{model:n,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){a=c.isArray(a)?a.slice():[a],b||(b={});var d,e,f,h,j,k,l,m,n,o;for(l=[],m=b.at,n=this.comparator&&null==m&&0!=b.sort,o=c.isString(this.comparator)?this.comparator:null,d=0,e=a.length;d<e;d++)(f=this._prepareModel(h=a[d],b))?(j=this.get(f))?b.merge&&(j.set(h===f?f.attributes:h,b),n&&!k&&j.hasChanged(o)&&(k=!0)):(l.push(f),f.on("all",this._onModelEvent,this),this._byId[f.cid]=f,null!=f.id&&(this._byId[f.id]=f)):this.trigger("invalid",this,h,b);if(l.length&&(n&&(k=!0),this.length+=l.length,null!=m?i.apply(this.models,[m,0].concat(l)):g.apply(this.models,l)),k&&this.sort({silent:!0}),b.silent)return this;for(d=0,e=l.length;d<e;d++)(f=l[d]).trigger("add",f,this,b);return k&&this.trigger("sort",this,b),this},remove:function(a,b){a=c.isArray(a)?a.slice():[a],b||(b={});var d,e,f,g;for(d=0,e=a.length;d<e;d++)(g=this.get(a[d]))&&(delete this._byId[g.id],delete this._byId[g.cid],f=this.indexOf(g),this.models.splice(f,1),this.length--,b.silent||(b.index=f,g.trigger("remove",g,this,b)),this._removeReference(g));return this},push:function(a,b){return a=this._prepareModel(a,b),this.add(a,c.extend({at:this.length},b)),a},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return a=this._prepareModel(a,b),this.add(a,c.extend({at:0},b)),a},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){if(null!=a)return this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[a.id||a.cid||a[this._idAttr]||a]},at:function(a){return this.models[a]},where:function(a){return c.isEmpty(a)?[]:this.filter(function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},update:function(a,b){b=c.extend({add:!0,merge:!0,remove:!0},b),b.parse&&(a=this.parse(a,b));var d,e,f,g,h=[],i=[],j={};if(c.isArray(a)||(a=a?[a]:[]),b.add&&!b.remove)return this.add(a,b);for(e=0,f=a.length;e<f;e++)d=a[e],g=this.get(d),b.remove&&g&&(j[g.cid]=!0),(b.add&&!g||b.merge&&g)&&h.push(d);if(b.remove)for(e=0,f=this.models.length;e<f;e++)d=this.models[e],j[d.cid]||i.push(d);return i.length&&this.remove(i,b),h.length&&this.add(h,b),this},reset:function(a,b){b||(b={}),b.parse&&(a=this.parse(a,b));for(var d=0,e=this.models.length;d<e;d++)this._removeReference(this.models[d]);return b.previousModels=this.models.slice(),this._reset(),a&&this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),this},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success;return a.success=function(a,c,d){a[d.update?"update":"reset"](c,d),b&&b(a,c,d)},this.sync("read",this,a)},create:function(a,b){if(b=b?c.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;return b.success=function(a,b,c){c.wait&&d.add(a,c),e&&e(a,b,c)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models.length=0,this._byId={}},_prepareModel:function(a,b){if(a instanceof n)return a.collection||(a.collection=this),a;b||(b={}),b.collection=this;var c=new this.model(a,b);return!!c._validate(a,b)&&c},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))},sortedIndex:function(a,b,d){b||(b=this.comparator);var e=c.isFunction(b)?b:function(a){return a.get(b)};return c.sortedIndex(this.models,a,e,d)}});var p=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];c.each(p,function(a){o.prototype[a]=function(){var b=h.call(arguments);return b.unshift(this.models),c[a].apply(c,b)}});var q=["groupBy","countBy","sortBy"];c.each(q,function(a){o.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});var r=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},s=/\((.*?)\)/g,t=/(\(\?)?:\w+/g,u=/\*\w+/g,v=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(r.prototype,m,{initialize:function(){},route:function(a,d,e){return c.isRegExp(a)||(a=this._routeToRegExp(a)),e||(e=this[d]),b.history.route(a,c.bind(function(c){var f=this._extractParameters(a,c);e&&e.apply(this,f),this.trigger.apply(this,["route:"+d].concat(f)),this.trigger("route",d,f),b.history.trigger("route",this,d,f)},this)),this},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes)for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])},_routeToRegExp:function(a){return a=a.replace(v,"\\$&").replace(s,"(?:$1)?").replace(t,function(a,b){return b?a:"([^/]+)"}).replace(u,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}});var w=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},x=/^[#\/]|\s+$/g,y=/^\/+|\/+$/g,z=/msie [\w.]+/,A=/\/$/;w.started=!1,c.extend(w.prototype,m,{interval:50,getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(A,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(x,"")},start:function(a){if(w.started)throw new Error("Backbone.history has already been started");w.started=!0,this.options=c.extend({},{root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var d=this.getFragment(),e=document.documentMode,f=z.exec(navigator.userAgent.toLowerCase())&&(!e||e<=7);this.root=("/"+this.root+"/").replace(y,"/"),f&&this._wantsHashChange&&(this.iframe=b.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(d)),this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=d;var g=this.location,h=g.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!h?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&h&&g.hash&&(this.fragment=this.getHash().replace(x,""),this.history.replaceState({},document.title,this.root+this.fragment+g.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),w.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();if(b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe))),b===this.fragment)return!1;this.iframe&&this.navigate(b),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return c.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!w.started)return!1;if(b&&!0!==b||(b={trigger:b}),a=this.getFragment(a||""),this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new w;var B=b.View=function(a){this.cid=c.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},C=/^(\S+)\s*(.*)$/,D=["model","collection","el","id","attributes","className","tagName","events"];c.extend(B.prototype,m,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],!1!==c&&this.delegateEvents(),this},delegateEvents:function(a){if(a||(a=c.result(this,"events"))){this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[a[b]]),!d)throw new Error('Method "'+a[b]+'" does not exist');var e=b.match(C),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,""===g?this.$el.on(f,d):this.$el.on(f,g,d)}}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=c.extend({},c.result(this,"options"),a)),c.extend(this,c.pick(a,D)),this.options=a},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a.class=c.result(this,"className"));var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}}});var E={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};b.sync=function(a,d,e){var f=E[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||G()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){if(a.setRequestHeader("X-HTTP-Method-Override",f),h)return h.apply(this,arguments)}}"GET"===g.type||e.emulateJSON||(g.processData=!1);var i=e.success;e.success=function(a){i&&i(d,a,e),d.trigger("sync",d,a,e)};var j=e.error;e.error=function(a){j&&j(d,a,e),d.trigger("error",d,a,e)};var k=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,k,e),k},b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var F=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};n.extend=o.extend=r.extend=B.extend=w.extend=F;var G=function(){throw new Error('A "url" property or function must be specified')};return b}),define("cb/session",["jquery","underscore","backbone","json","util","cb/constants"],function(a,b,c,d,e,f){"use strict";var g,h,i,j=f.SESSION_COOKIE_NAME;return g=c.Model.extend({idAttribute:"userId"}),h=c.Collection.extend({model:g}),i=c.Model.extend({idAttribute:"sessionToken",defaults:{mode:f.modes.POINTER,writeModeAllowed:!0},initialize:function(){var a,c=this.getFromStorage();e.log("INITIALIZING SESSION, STORED: ",c),b.bindAll(this),this.users=new h,this.on("change",this.tearDownIfCleared),c&&(this.removeFromStorage(),a=c.users||[],delete c.users,this.set(c),e.log("SESSION RESTORED 1ST LEVEL PROPS",c)),a&&a.length&&(this.users.reset(a),e.log("SESSION RESTORED USERS",a))},tearDownIfCleared:function(b,c){c.unset&&(this.removeFromStorage(),a(window).off("unload.gcbSession beforeunload.gcbSession pagehide.gcbSession"))},removeFromStorage:function(){return e.log("REMOVING SESSION FROM STORAGE"),e.removeRootDomainCookie(j)},getFromStorage:function(){return a.cookie(j)&&d.parse(a.cookie(j))},store:function(){if(this.exists()){var b=this.serialize();e.setRootDomainCookie(j,d.stringify(b)),e.log("SAVED SESSION TO COOKIE: ",a.cookie(j))}},serialize:function(){var a=this.toJSON();return a.users=this.users.toJSON(),a},serializeForApi:function(){var a={token:this.get("sessionToken"),userToken:this.get("userToken"),mode:{pointer:this.get("mode")===f.modes.POINTER,write:this.get("mode")===f.modes.WRITE}};return a.agents=this.users.map(function(){return{}}),a},exists:function(){return this.get("sessionToken")&&this.get("userToken")},handleJoinRequest:function(a){var c=this,d=a.userToken,e=a.users;return!(!d||!e)&&(c.set(b.extend(this.defaults,{userToken:d,writeModeAllowed:!!a.writeModeAllowed,allowedThirdPartyDomains:a.allowedThirdPartyDomains||[]})),c.users.reset(e),a.userId&&c.set({userId:a.userId}),!0)},activate:function(){a(window).on("unload.gcbSession beforeunload.gcbSession pagehide.gcbSession",this.store)},set:function(){try{return c.Model.prototype.set.apply(this,arguments)}catch(a){e.log('EXCEPTION WHEN DOING "SET" ON SESSION: ',a.number,a)}}}),function(){var a;return{createInstance:function(){return a=new i},getInstance:function(){if(!a)throw new Error("Session instance is not created yet");return a}}}()}),function(){function a(a){return a.COOKIE||(a.COOKIE={},a.COOKIE.set=function(a,b,c){throw"Abstract"},a.COOKIE.get=function(a){throw"Abstract"}),a.ReloadExtension=function(b){function c(b){if(h&&null!==h.handshakeResponse){e(b),h.cookiePath=j;var c=a.JSON.toJSON(h);g("Reload extension saving cookie value",c),a.COOKIE.set(i,c,{"max-age":k,path:j,expires:new Date((new Date).getTime()+1e3*k)})}}function d(a){return h.url==a.url}function e(a){a&&("number"==typeof a.cookieMaxAge&&(k=a.cookieMaxAge),"string"==typeof a.cookieName&&(i=a.cookieName),"string"==typeof a.cookiePath&&(j=a.cookiePath))}var f,g,h=null,i="org.cometd.reload",j="/",k=5,l=!1;this.configure=e,this.registered=function(a,b){f=b,f.reload=c,g=f._debug},this.unregistered=function(){delete f.reload,f=null},this.outgoing=function(b){switch(b.channel){case"/meta/handshake":h={},h.url=f.getURL();var c=a.COOKIE.get(i);if(g("Reload extension found cookie value",c),c)try{var e=a.JSON.fromJSON(c);if(a.COOKIE.set(i,"",{"max-age":-1,path:e.cookiePath,expires:-1}),e.handshakeResponse&&d(e))return g("Reload extension restoring state",e),setTimeout(function(){g("Reload extension replaying handshake response",e.handshakeResponse),h.handshakeResponse=e.handshakeResponse,h.transportType=e.transportType,h.reloading=!0;var a=f._mixin(!0,{},h.handshakeResponse,{ext:{reload:!0}});a.supportedConnectionTypes=[h.transportType],f.receive(a),g("Reload extension replayed handshake response",a)},0),l||(l=!0,f.startBatch()),null;g("Reload extension could not restore state",e)}catch(a){g("Reload extension error while trying to restore cookie",a)}break;case"/meta/connect":h.transportType||(h.transportType=b.connectionType,g("Reload extension tracked transport type",h.transportType));break;case"/meta/disconnect":h=null}return b},this.incoming=function(a){if(a.successful)switch(a.channel){case"/meta/handshake":h.handshakeResponse||(h.handshakeResponse=a,g("Reload extension tracked handshake response",a));break;case"/meta/disconnect":h=null;break;case"/meta/connect":l&&(f.endBatch(),l=!1)}return a},e(b)}}"function"==typeof define&&define.amd?define("org/cometd/ReloadExtension",["org/cometd"],a):a(org.cometd)}(),define("jquery.cometd-reload",["jquery","org/cometd","org/cometd/ReloadExtension","util","jquery.cookie"],function(a,b,c,d){"use strict";return function(e){a.cookie&&(b.COOKIE.set=d.setRootDomainCookie,b.COOKIE.get=a.cookie);var f=new c(e),g=f.outgoing;return f.outgoing=function(a){return"/meta/disconnect"===a.channel&&(d.log("CLEANING RELOAD EXTENSION STATE ON DISCONNECT ATTEMPT",a),f.incoming({channel:a.channel,successful:!0})),g(a)},f}}),define("cb/transport/clients/coreSessionClient",["jquery","underscore","../cometdWrapper","signals","util","cb/constants","cb/session","support","jquery.cometd-reload"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(j){function n(a){e.log("COMETD URL IS SET TO: "+a),I=a}function o(){var d;return d=new c,d.configure(b.extend(Q,{url:I})),j.disableWebSockets&&(e.log("cobrowse: disabling websocket transport according to config"),d.unregisterTransport("websocket")),d.onListenerException=r,d.addListener(k.META_CONNECT,q),d.addListener(k.SESSION_DEACTIVATED,function(a){var b,c=a.data;e.log('GOT "SESSION DEACTIVATED" MESSAGE. DISCONNECTING. RECEIVED DATA FROM SERVER: ',c),G().disconnect(),c&&c.deactivationReason&&(b=c.deactivationReason),w({reason:p(b)})}),d.registerExtension("reload",new i),d.getExtension("reload").configure({cookieMaxAge:O,cookieName:f.RELOAD_EXTENSION_COOKIE_NAME}),e.log("ReloadExtension cookie lifetime is set to: "+O+" seconds"),a(window).on("unload.gcb beforeunload.gcb pagehide.gcb",function(){d.reload()}),d}function p(a){var b={};return b[m.NONE]=l.UNKNOWN_REASON,b[m.TIMEOUT_INACTIVE]=l.INACTIVITY_TIMEOUT,b[m.STOPPED_BY_USER]=l.EXTERNAL,b[m.DISCONNECTED_USER]=l.EXTERNAL,b[m.SESSIONS_OVER_LIMIT]=l.SESSIONS_OVER_LIMIT,b[a]||l.UNKNOWN_REASON}function q(a){var b,c=G();c.isDisconnected()&&(M=!1,e.log("CometD connection closed")),b=M,M=!0===a.successful,!b&&M?e.log("CometD connection established"):b&&!M&&e.log("CometD connection broken")}function r(a,b,c,d){e.log("COMETD LISTENER EXCEPTION: ",a,", HANDLE: ",b,", IS LISTENER: ",c,", MESSAGE: ",d),e.log(a.stack),L.caughtException.dispatch(a,b,c,d)}function s(a,c,d,e){var f={sessionToken:a,role:c};e&&(f.auth=e),h.longStylesheets||(f.chunkCss=!0),G().publish(k.SESSION_JOIN,f,function(a){var c=a.data||{};c.userToken&&t(c.userToken),b.defer(function(){d(c)})})}function t(a){F=a}function u(a){var c;G().batch(null,function(){b.each(a,function(a,b){c=G().addListener(b,a),"/meta/handshake"===b&&N.push(c)})})}function v(a){K.done(function(){u(a)})}function w(a){var c=a.reason;c||(e.log("Missing deactivation reason while handling disconnection, ending with UNKNOWN_REASON"),c=l.UNKNOWN_REASON),e.log("SESSION ENDED, MESSAGE: ",a),C(),b.defer(function(){J.clear();try{L.disconnected.dispatch({reason:c})}catch(a){e.log("EXCEPTION WHILE DISCONNECTING ",a.number,a)}})}function x(){G().disconnect(),w({reason:l.TIMEOUT})}function y(){return G().isDisconnected()}function z(a,b,c){var d,f;if(y())return void e.log("NOT PUBLISHING, ALREADY DISCONNECTED ",a,b);if(!F)throw new Error("Trying to publish authorized message without user token");b.userToken=F,c&&(d=window.setTimeout(function(){f=!0},Q.maxNetworkDelay)),G().publish(a,b,function(a){a.successful||(e.log("WARN: COULD NOT DELIVER MESSAGE ON CHANNEL "+a.channel+": ",a.failure&&a.failure.reason),f&&(e.log("TIMEOUT FOR THIS MESSAGE HAS EXPIRED, MARKING AS TIMED OUT"),a.failure.cbTimeout=!0)),window.clearTimeout(d),c&&c(a)})}function A(a,b,c){G().publish(a,b,c)}function B(){G().handshake({})}function C(){b.each(N,function(a){G().removeListener(a)}),N=[]}function D(a){y()?(e.log("ALREADY DISCONNECTED, QUITTING"),w({reason:a||l.SELF})):(e.log("SENDING EXIT COMMAND"),G().publish(k.SESSION_EXIT,{userToken:F},function(){e.log("EXIT COMMAND EXECUTED. DISCONNECTING NOW"),G().disconnect(),w({reason:a||l.SELF})}))}function E(){return{addListeners:v,publish:H.publishAuthorized}}var F,G,H=this,I=j.cometdUrl,J=g.getInstance(),K=a.Deferred(),L={connected:new d,disconnected:new d,caughtException:new d},M=!1,N=[],O=j.maxOfflineDuration,P=j.cometdConfig||{},Q={url:I,logLevel:P.logLevel||f.cometDLogLevel.WARN,maxNetworkDelay:P.maxNetworkDelay||f.COMETD_MAX_NETWORK_DELAY,connectTimeout:P.connectTimeout,maxConnections:6,autoBatch:!0};G=function(){var a;return function(){return a||(a=o()),a}}(),L.connected.memorize=!0,L.connected.add(K.resolve),b.extend(H,{on:L,handshake:B,publishAuthorized:z,publishRaw:A,joinSession:s,addListeners:u,disconnect:D,timeout:x,getCoreClient:E,setUserToken:t,setCometdUrl:n})}var k=f.channels,l=f.sessionEndTriggers,m=f.deactivationReasonsFromServer;return j}),define("cb/transport/clients/masterSessionClient",["underscore","util","URI","./coreSessionClient","cb/constants","cb/session"],function(a,b,c,d,e,f){"use strict";function g(g,i){function j(a){if(b.log("SOMEONE JOINED THE SESSION",a),!a.data.userId)throw new Error("Did not get valid user id from server");s.users.add(a.data)}function k(a){return!a.ext||!a.ext.reload}function l(a){if(!a.successful)return void b.log("UNSUCCESSFUL HANDSHAKE: ",a);if(b.log("SUCCESSFUL HANDSHAKE: ",a),!t&&k(a))return b.log('"Real" handshake is not allowed on continued session'),void p.timeout();if(t&&!k(a))throw new Error("ReloadExtension handshake was replayed on a new session");t?(b.log("JOINING NEW SESSION ",q),p.joinSession(q,e.userRoles.MASTER,function(a){a.userToken?(s.handleJoinRequest(a),b.log("NEW USER TOKEN ASSIGNED: ",a.userToken),b.log("WRITE MODE IS ALLOWED?: ",!!a.writeModeAllowed),b.log("JOIN REQUEST: ",a),m({newSession:!0,allowedThirdPartyDomains:s.get("allowedThirdPartyDomains")}),t=!1):(b.log("WARN: FAILED TO JOIN THE SESSION: ",a),p.disconnect(e.sessionEndTriggers.ERROR))})):m({newSession:!1,allowedThirdPartyDomains:s.get("allowedThirdPartyDomains")})}function m(a){try{p.on.connected.dispatch(a)}catch(a){b.log('EXCEPTION IN "CONNECTED" HANDLER',a.number,a)}}function n(){var a=i.serverAvailabilityTimeout;p.addListeners(u),s.exists()?(b.log("CONTINUE SESSION: "+s.get("sessionToken"),", USER TOKEN: "+s.get("userToken")),t=!1,p.setUserToken(s.get("userToken")),p.handshake()):(t=!0,b.log("Sending REST request to create session (timeout is "+a+")..."),g.get(e.LIVE_SESSIONS_REST_RESOURCE+"create",{timeout:a}).done(function(a){b.log("REST session create response",a),b.log("Server name",a.sessionServerName),p.handshake(),q=a.sessionToken,s.set({sessionToken:q}),b.log("NEW SESSION ASSIGNED: "+q)}).fail(function(a,c){b.log('REST request failed: "'+c+'"'),p.disconnect(e.sessionEndTriggers.SERVER_UNAVAILABLE)}))}var o,p,q,r=this,s=f.getInstance(),t=!0,u={};o=new c(i.cometdUrl),i.apikey&&(b.log("APIKEY PROVIDED, ADDING TO COMETD URL: ?apikey="+i.apikey),o.addSearch("apikey",i.apikey)),p=new d({cometdUrl:o.href(),maxOfflineDuration:i.maxOfflineDuration,disableWebSockets:i.disableWebSockets,cometdConfig:i.cometdConfig}),u[h.META_HANDSHAKE]=l,u[h.SESSION_JOINED]=j,p.on.caughtException.add(function(){b.log("CAUGHT EXCEPTION IN COMETD LISTENER")}),a.extend(r,{on:p.on,connect:n,disconnect:p.disconnect,getCoreClient:p.getCoreClient,publishRaw:p.publishRaw})}var h=e.channels;return g}),define("cb/transport/clients/masterWindowClient",["underscore","util","signals","cb/constants"],function(a,b,c,d){"use strict";function e(d){function e(a){b.log("GOT WINDOW CONTROL COMMAND, ",a.data,a),l.windowCommandReceived.dispatch(a.data.command)}function g(a){b.log("GOT WINDOW NAVIGATE ATTEMPT, ",a.data.url,a),l.navigateAttemptReceived.dispatch(a.data.userId,a.data.url)}function h(a){b.log("ABOUT TO PUBLISH WINDOW SIZE: ",a),d.publish(f.WINDOW_SIZE,a)}function i(a,b,c){var e={url:a,pageTitle:b,targetUsersIds:c,allowed:!0};d.publish(f.WINDOW_NAVIGATE,e)}function j(a,b){d.publish(f.WINDOW_NAVIGATE_DENIAL,{targetUsersIds:[a],url:b})}var k=this,l={windowCommandReceived:new c,navigateAttemptReceived:new c},m={};m[f.WINDOW_CONTROL]=e,m[f.WINDOW_NAVIGATE_ATTEMPT]=g,d.addListeners(m),a.extend(k,{on:l,publishWindowSize:h,publishUrl:i,publishNavigateDenial:j})}var f=d.channels;return e}),define("cb/transport/clients/masterModeClient",["underscore","util","signals","cb/constants"],function(a,b,c,d){"use strict";function e(d){function e(a){var c=a.data.mode;if(b.log("GOT MODE COMMAND ",a.data),c===g)n.downgraded.dispatch();else{if(c===h)throw new Error("Illegal attempt to upgrade mode from slave");b.log("WARNING! REQUESTED UPDATE TO UNKNOWN MODE: ",c)}}function i(a){b.log("GOT MODE UPGRADE REQUEST ",a),n.upgradeRequested.dispatch()}function j(a,c,e){b.log("PUBLISHING UPGRADE APPROVAL"),d.publish(f.SESSION_MODE,{targetUsersIds:e,url:a,pageTitle:c,mode:h})}function k(a){b.log("PUBLISHING UPGRADE DENIAL"),d.publish(f.SESSION_MODE_DENIAL,{targetUsersIds:a})}function l(a){d.publish(f.SESSION_MODE,{targetUsersIds:a,mode:g})}var m=this,n={downgraded:new c,upgradeRequested:new c},o={};o[f.SESSION_MODE]=e,o[f.SESSION_MODE_ATTEMPT]=i,d.addListeners(o),a.extend(m,{on:n,publishUpgradeApproval:j,publishUpgradeDenial:k,publishDowngrade:l})}var f=d.channels,g=d.modes.POINTER,h=d.modes.WRITE;return e}),define("cb/transport/clients/genericRestClient",["underscore","jquery","URI"],function(a,b,c){"use strict";function d(d,e){function f(a){e&&a.query(function(a){a.apikey=encodeURIComponent(e)})}function g(a){var b=new c(d);return b=b.path(b.path()+"/"+a),b.normalizePath(),f(b),b.href()}function h(a,c){return a=g(a),b.ajax(b.extend({url:a,dataType:"jsonp"},c))}function i(a){d=a}var j=this;a.extend(j,{get:h,setBaseUrl:i})}return d}),define("jquery.twinkle",["jquery","cb/lib/jquery.service-nodes"],function(a){!function(b){"use strict";var c=function(b,c){var d=[].slice,e=a,f=e.extend,g=e.isFunction,h=f({},c),i=function(a,c,d,f){if(d=g(d)?d.apply(a,c):d,g(f[d]))return f[d].apply(a,c);e.error('Method "'+d+'" does not exist on jQuery.'+b)},j=function(){return i(this,d.call(arguments),h.defaultStatic,j)},k=function(a){return g(k[a])?k[a].apply(this,d.call(arguments,1)):i(this,d.call(arguments),h.defaultMethod,k)},l=function(a){a&&(f(j,a.statics),f(k,a.methods)),j.modplug=l};l.prev={statics:e[b],methods:e.fn[b]},l(c),e[b]=j,e.fn[b]=k},d={widthRatio:.5,heightRatio:.5,delay:0,gap:0,effect:"splash",effectOptions:void 0,callback:void 0},e={id:void 0,effectOptions:void 0,callback:void 0},f=function(a,b,c,d,e){this.offset={left:a,top:b},this.element=c,this.position={left:d,top:e}},g=function(){var a={};this.add=function(b){return a[b.id]||(a[b.id]=b),this},this.remove=function(b){return a[b]?delete a[b]:b.id&&a[b.id]&&delete a[b.id],this},this.twinkle=function(c,e){var f=b.extend({},d,e),g=a[f.effect];return g&&(c.element=c.element||"body",g.run(c,f.effectOptions,function(){void 0!==f.callback&&f.callback()})),this},this.stop=function(c,d){var f=b.extend({},e,d),g=a[f.effect];return g&&(c.element=c.element||"body",g.stop(c,f.effectOptions,f.callback)),this},this.twinkleAtElement=function(a,c){var e=b.extend({},d,c),g=b(a),h=g.offset(),i=g.position(),j=g.outerWidth(!0),k=g.outerHeight(!0),l=h.left+j*e.widthRatio,m=h.top+k*e.heightRatio,n=i.left+j*e.widthRatio,o=i.top+k*e.heightRatio;return this.twinkle(new f(l,m,a,n,o),c)},this.twinkleAtElements=function(a,c){var e=this,f=b.extend({},d,c),g=f.delay,h=b(a),i=h.size();return h.each(function(a){var d=this,h=b.extend({},c);a!==i-1&&delete h.callback,setTimeout(function(){e.twinkleAtElement(d,h)},g),g+=f.gap}),this},this.stopAtElement=function(a,c){var e=b.extend({},d,c),g=b(a),h=g.offset(),i=g.position(),j=g.outerWidth(!0),k=g.outerHeight(!0),l=h.left+j*e.widthRatio,m=h.top+k*e.heightRatio,n=i.left+j*e.widthRatio,o=i.top+k*e.heightRatio;return this.twinkle(new f(l,m,a,n,o),c)},this.stopAtElements=function(a,c){var d=this,f=b.extend({},e,c),g=(f.delay,b(a)),h=g.size();return g.each(function(a){var e=this,f=b.extend({},c);a!==h-1&&delete f.callback,d.stopAtElement(e,f)}),this}},h=new g;c("twinkle",{statics:{twinkle:function(a,b,c,d){return h.twinkle(new f(0,0,a,b,c),d),this},add:function(a){return h.add(a),this},remove:function(a){return h.remove(a),this}},methods:{twinkle:function(a){return h.twinkleAtElements(this,a),this},stop:function(a){return h.stopAtElements(this,a),this}},defaultStatic:"twinkle",defaultMethod:"twinkle"})}(a),function(a){"use strict";var b=function(a){return a.stopImmediatePropagation(),a.preventDefault(),!1},c=function(c,d,e,f){var g,h=function(){g.remove(),f instanceof Function&&f()},i=function(){g.animate({left:d.position.left-e.radius,top:d.position.top-e.radius,width:2*e.radius,height:2*e.radius,opacity:0},.5*e.duration,"linear",h)},j=function(){g=a("<div />").css(c).bind("click dblclick mousedown mouseenter mouseover mousemove",b),a(d.element).after(g),g.animate({left:d.position.left-.5*e.radius,top:d.position.top-.5*e.radius,width:e.radius,height:e.radius,opacity:1},.5*e.duration,"linear",i)},k=function(){};return j(),{stop:k}},d={color:"rgba(255,0,0,0.5)",radius:300,duration:1e3},e=function(){this.id="splash-css",this.run=function(b,e,f){var g=a.extend({},d,e),h={position:"absolute",zIndex:9999,display:"block",borderRadius:g.radius,backgroundColor:g.color,boxShadow:"0 0 30px "+g.color,left:b.position.left,top:b.position.top,width:0,height:0,opacity:.4};c(h,b,g,f)}},f={color:"rgba(255,0,0,0.5)",radius:300,duration:1e3,width:2,count:3,delay:300},g=function(){this.id="drops-css",this.run=function(b,d,e){var g,h=a.extend({},f,d),i={position:"absolute",zIndex:1e3,display:"block",borderRadius:h.radius,border:h.width+"px solid "+h.color,left:b.position.left,top:b.position.top,width:0,height:0,opacity:.4},j=function(a,d){setTimeout(function(){c(i,b,h,d)},a)},k=0;for(g=0;g<h.count;g+=1)j(k,g===h.count-1?e:void 0),k+=h.delay}},h=function(){var b=new g;this.id="drop-css",this.run=function(c,d,e){b.run(c,a.extend(d,{count:1}),e)}};a.twinkle.add(new e).add(new h).add(new g)}(a),function(a){"use strict";var b={};b.Interpolator=function(a){var b,c=function(a,b,c){var d=(b.y-a.y)/(b.x-a.x);return a.y+d*(c-a.x)},d=function(a){var c,d,e;for(c=1;c<b.length;c+=1)if(d=b[c-1],e=b[c],a>=d.x&&a<=e.x)return[d,e]};b=function(a){var b,c=1/(a.length-1),d=[];for(b=0;b<a.length;b+=1)d.push({x:c*b,y:a[b]});return d}(a),this.get=function(a){var b;return a=Math.max(0,Math.min(1,a)),b=d(a),c(b[0],b[1],a)}},b.Interpolator.scale=function(a,b,c){return b=b||1,c=c||0,a=(a-c)/b,a>=0&&a<=1?a:void 0},function(){var c=function(a){var b=a.getContext();b.beginPath(),this.fill=function(c){return b.fillStyle=c,b.fill(),a},this.stroke=function(c,d){return b.lineWidth=c,b.strokeStyle=d,b.stroke(),a},this.draw=function(b,c,d){return this.fill(d),this.stroke(b,c),a},this.circle=function(a,c,d){return b.arc(a,c,d,0,2*Math.PI,!1),this}};b.Ctx=function(d){if(d&&d.canvas){if(!(this instanceof b.Ctx))return new b.Ctx(d);var e=a(d.canvas).width(),f=a(d.canvas).height();this.getContext=function(){return d},this.getWidth=function(){return e},this.getHeight=function(){return f},this.clear=function(){return this.resetTransform(),d.clearRect(0,0,e,f),this},this.resetTransform=function(){return d.setTransform(1,0,0,1,0,0),this},this.translate=function(a,b){return d.translate(a,b),this},this.rotate=function(a){return d.rotate(Math.PI*a/180),this},this.opacity=function(a){return d.globalAlpha=a,this},this.path=function(){return new c(this)}}}}(),b.CanvasEffect=function(c,d,e,f,g){if(!(this instanceof b.CanvasEffect))return new b.CanvasEffect(c,d,e,f,g);var h=c.element,i=c.position.left,j=c.position.top,k={position:"absolute",zIndex:1e3,display:"block",left:i-.5*d,top:j-.5*e,width:d,height:e};this.run=function(c,i){var j,l,m,n=c/1e3*i,o=1/n,p=function(a){setTimeout(function(){l&&f({ctx:l,frac:a,millis:c*a})},c*a)},q=function(){j.remove(),j=void 0,l=void 0,g instanceof Function&&g()},r=function(a){return a.stopImmediatePropagation(),a.preventDefault(),!1};for(j=a("<canvas />").attr("width",d).attr("height",e).css(k),j.cbMarkNode(),j.addClass("gcb-virtualClick"),a(h).after(j),j.bind("click dblclick mousedown mouseenter mouseover mousemove",r),l=new b.Ctx(j.get(0).getContext("2d")),m=0;m<=n;m+=1)p(m*o);setTimeout(q,c)}},function(){var c={color:"rgba(255,0,0,0.5)",radius:300,duration:1e3},d=function(){this.id="splash",this.run=function(d,e,f){var g=a.extend({},c,e),h=2*g.radius,i=new b.Interpolator([.4,1,0]),j=new b.Interpolator([0,g.radius]),k=function(a){var b=j.get(a.frac),c=i.get(a.frac),d=a.ctx;d.clear().opacity(c).path().circle(.5*d.getWidth(),.5*d.getHeight(),b).fill(g.color)};new b.CanvasEffect(d,h,h,k,f).run(g.duration,25)}};a.twinkle.add(new d)}(),function(){var c={color:"rgba(255,0,0,0.5)",radius:300,duration:1e3,width:2},d=function(){this.id="drop",this.run=function(d,e,f){var g=a.extend({},c,e),h=2*g.radius,i=new b.Interpolator([.4,1,0]),j=new b.Interpolator([0,g.radius]),k=function(a){var b=j.get(a.frac),c=i.get(a.frac),d=a.ctx;d.clear().opacity(c).path().circle(.5*d.getWidth(),.5*d.getHeight(),b).stroke(g.width,g.color)};new b.CanvasEffect(d,h,h,k,f).run(g.duration,25)}};a.twinkle.add(new d)}(),function(){var c={color:"rgba(255,0,0,0.5)",radius:300,duration:1e3,width:2,count:3,delay:100},d=function(){this.id="drops",this.run=function(d,e,f){var g=a.extend({},c,e),h=2*g.radius,i=new b.Interpolator([.4,1,0]),j=new b.Interpolator([0,g.radius]),k=(g.duration-(g.count-1)*g.delay)/g.duration,l=g.delay/g.duration,m=function(a){var c,d,e,f,h=a.ctx,m=h.getWidth(),n=h.getHeight();for(h.clear(),c=0;c<g.count;c+=1)void 0!==(d=b.Interpolator.scale(a.frac,k,l*c))&&(e=j.get(d),f=i.get(d),h.opacity(f).path().circle(.5*m,.5*n,e).stroke(g.width,g.color))};new b.CanvasEffect(d,h,h,m,f).run(g.duration,25)}};a.twinkle.add(new d)}(),function(){var c={color:"rgba(255,0,0,0.5)",radius:100,duration:3e3},d=function(){this.id="pulse",this.run=function(d,e,f){var g=a.extend({},c,e),h=2*g.radius,i=new b.Interpolator([0,1,.6,1,.6,1,0]),j=new b.Interpolator([0,g.radius,.6*g.radius,g.radius,.6*g.radius,g.radius,0]),k=function(a){var b=j.get(a.frac),c=i.get(a.frac),d=a.ctx;d.clear().opacity(c).path().circle(.5*d.getWidth(),.5*d.getHeight(),b).fill(g.color)};new b.CanvasEffect(d,h,h,k,f).run(g.duration,25)}};a.twinkle.add(new d)}(),function(){var c={color:"rgba(255,0,0,0.5)",radius:100,duration:3e3,satellites:10,satellitesRadius:10,circulations:1.5},d=function(){this.id="orbit",this.run=function(d,e,f){var g=a.extend({},c,e),h=2*g.radius,i=new b.Interpolator([.4,1,1,.4]),j=g.radius-g.satellitesRadius,k=new b.Interpolator([0,j,j,0]),l=function(a){var b,c,d,e,f=k.get(a.frac),h=i.get(a.frac),j=2*Math.PI*g.circulations*a.frac,l=a.ctx;for(l.clear().opacity(h).translate(.5*l.getWidth(),.5*l.getHeight()),b=l.path(),c=0;c<g.satellites;c+=1)j+=2*Math.PI/g.satellites,d=Math.cos(j)*f,e=Math.sin(j)*f,b.circle(d,e,g.satellitesRadius);b.fill(g.color)};new b.CanvasEffect(d,h,h,l,f).run(g.duration,25)}};a.twinkle.add(new d)}()}(a)}),define("cb/ui/mouse/virtualMouseManager",["jquery","underscore","util","cb/environment","cb/lib/jquery.service-nodes","jquery.twinkle"],function(a,b,c,d){"use strict";function e(e){function g(){return o.find(".vmToolbar").outerHeight()+o.find(".vbToolbar").outerHeight()}function h(b){c.log("CREATE VIRTUAL MOUSE FOR USER ID ",b.sourceUserId);var d=a("<div/>",{css:{position:"absolute",left:b.x,top:b.y,"z-index":999999,"pointer-events":"none"},id:"virtualMouse"+b.sourceUserId}).addClass("CobrowseVirtualMouse");d.append(a("<img/>",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAUCAYAAAC58NwRAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3QQBDh45rpL+KQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABy0lEQVQoz43Qz08TQRQH8O++7XbbWqBxa0C0auBSCAej8aQxmPjjgmg4cPEgV68eDAl/gH+AEI4cuOjNQOKBQDmaeNB4MBiI4I+EEmy7rdsu29n54YEsdHWhndPMe/N5M+9pwy/frDx7cPNpfzpeRAeLvL2f12bfrhR26+x8R0AjQizdnZ9bWi3s1llfWwAAwq3D7M3l55ZW19shAgDZ9ACojhAFG2aXQMkzbdEREE4VivutKLInaj349u/D4CEaikJhUCsDUpyKQgBCgDu142oRiP79o2/vA0qdiP4DsulBeo1wowFaXluLRY2O2SWYhgl3ZwOQ8iiupMiEgJICSinAqUL2WKBE6sPz8TuPg3wyplfp+DKHZM2SEvy9khzCdcD/2De2a17OShpFK2kUUwYdUFBZMlaZmpy4f3307ow4cOHXykj0X9Hefd6aDvVjZM5tS9asTE1O3Bu2Up/GB7PrSvAvivvQSEfj+9dHG2U3HwD91fz8wq2rI7MXuswfAGCQho+Ule6vb2NQEkYmq226SNy+dHYZACiuE0/H9Xrrs0+GeheF69issg9W3tsZ6csUglzkWHNdZuPi6MMXl7tNb2zAeh3XiQe5v1+E6N2p54J3AAAAAElFTkSuQmCC"})).cbMarkNode(),p[b.sourceUserId]=d,a(n.document).find("body").append(d)}function i(){function c(a,b,c){var d={effect:"splash",widthRatio:c||0,heightRatio:c||0,effectOptions:{effect:"splash",radius:45,duration:500},callback:b};a.twinkle(d)}function d(a,b){a.css({left:b.x-a.height()/2,top:b.y-a.height()/2+g()}).fadeIn("fast").fadeOut("fast")}return f?function(a,b){c(b)}:function(){var c=a(b.template('<img src="<%=url%>">',{url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABvUlEQVRo3t2ay3GEMAyGf834DA2wDSwVUAEVJA0kDaSSVLAVUAEVUAHbAG4AGlAOdhazsZnhkcVCJ4YD6NPDQhLEzJAsarcnEWUAcgCJvZMBSO11D0Db6wFAC2a9y2s3eYDoapXOVz6htTD31wIYxUvHwlulB1CvAVkGYMKkBHD5p5DuLIjeH4CoBFC8KDcbMNf7ARC9bYhzrM4P5mobAFEC4GPHWF+TGzcwD2sBvg5UfoRg/l4OcEzYLA4nNZOwsSgPADmIBl9iq8BRWSA+KUD0p4L7PFBG/OlTAriFAUyFvUQMcAHR1a3YSpD1XR09AMb6qQCA1PWCmmS6HMl/vSAZoBoBzNEpS4gyMGsl0PquFx4AiUCAZN+e+OCmPhOoe+YCpAIB0lOFUC/QC70LoAUC6FOF0CBQ98EFaCPtwub75AcAswaRLPVta6meiHJJ1j8ZAPMdRBLqQT/XE9cA3iMHqMNTCeOFLuLJRPe8Q1ABwk8J1vcDmCO1ibAuNL7FhwqcsbUdrcc03K3nPiV8EJVt9mMYrwcXHSdfcIwgQldMUwjBS74RQvCadQoidNHtBxH4q0E4vIT97BGB/AALJ9JkKT7BqAAAAABJRU5ErkJggg=="})).css({position:"absolute","z-index":999998}).addClass("gcb-virtualClick").hide().cbMarkNode();return a(n.document).find("body").append(c),function(a){d(c,a)}}()}function j(a){var b=p[a.sourceUserId];b.is(":visible")||b.show(),b.css({top:a.y+g(),left:a.x}),a.isClicked&&q(a,b)}function k(a){p[a.sourceUserId]||h(a),j(a)}function l(){b.each(p,function(a){a.hide()})}c.log("INITIALIZE VIRTUAL MOUSE MANAGER ");var m,n=d[e].getTopContext(),o=a(n.document),p={},q=i();m=function(){function b(b){return{top:a(b.document).scrollTop(),left:a(b.document).scrollLeft()}}function d(a){j.top-=b(a).top,j.left-=b(a).left}function f(a){j.top+=b(a).top,j.left+=+b(a).left}function g(b){j.top+=a(b.frameElement).offset().top,j.left+=a(b.frameElement).offset().left}function h(b){return c.isSameWindow(b,n)||a(b.frameElement).hasClass("vbContentArea")}function i(a){if(h(a))return void("slave"===e&&f(a));g(a),d(a.parent),i(a.parent)}var j={left:0,top:0};return function(a){return j={left:0,top:0},i(a),j}}(),b.extend(this,{delegateMouseMessage:k,retrieveOffset:m,getToolbarTopOffset:g,hideAllCursors:l,_animateClick:q})}var f=function(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))}();return e}),define("cb/services/sessionConfigService",["underscore","json","../constants","util"],function(a,b,c,d){"use strict";function e(e){function f(e){l=!1,sessionStorage.setItem(c.SESSION_CONFIG_KEY,b.stringify(e)),d.log("SESSION CONFIG LOADED AND CACHED: ",e),j=e,a.each(k,function(a){try{a(j,i)}catch(a){d.log("EXCEPTION IN SESSION CONFIG CALLBACK ",a.number,a)}}),k=[]}function g(a){if(j)d.log("SESSION CONFIG FOUND IN MEMORY"),a(j,i);else{var g=sessionStorage.getItem(c.SESSION_CONFIG_KEY);g?(d.log("SESSION CONFIG FOUND IN STORAGE"),j=b.parse(g),a(j,i)):(k.push(a),l||(l=!0,d.log("LOADING SESSION CONFIG FROM SERVER..."),e.get("/rest/dom-restrictions.json",{cache:!0,jsonpCallback:"cb_1412064242290"}).done(f).fail(function(){throw d.log("Failed receiving DOM config. Arguments: ",arguments),new Error("Unable to get DOM restrictions configuration")})))}}function h(){d.log("SESSION CONFIG: CLEARING CACHE"),j=null,sessionStorage.removeItem(c.SESSION_CONFIG_KEY)}var i=this,j=null,k=[],l=!1;a.extend(this,{getSessionConfig:g,clearCache:h})}return e}),define("cb/services/modeService",["underscore","signals","cb/constants"],function(a,b,c){"use strict";function d(a){return{pointer:a===c.modes.POINTER,write:a===c.modes.WRITE}}function e(e){function f(){return g||(g=d(e.get("mode"))),g}var g,h=this,i={modeChanged:new b};e.on("change:mode",function(a,b){if(b&&a.previous("mode")){if(!a.get("writeModeAllowed")&&b===c.modes.WRITE)throw a.set("mode",c.modes.POINTER),new Error("Switching to Write mode is not allowed");g=d(b),i.modeChanged.dispatch(g)}}),a.extend(h,{on:i,currentMode:f})}return e}),define("cb/services/masterTopMostModeService",["jquery","underscore","signals","cb/constants","./modeService"],function(a,b,c,d,e){"use strict";function f(b,d){function f(){return d.users.pluck("userId")}function i(a){a?l(h):b.publishUpgradeDenial(f())}function j(){q.upgradeRequested.dispatch(i)}function k(){d.set("mode",g)}function l(a){d.set("mode",a),a===g?b.publishDowngrade(f()):a===h&&b.publishUpgradeApproval(window.location.href,document.title,f())}function m(){b.on.upgradeRequested.add(j),b.on.downgraded.add(k)}function n(){b.on.upgradeRequested.remove(j),b.on.downgraded.remove(k)}var o=this,p=new e(d),q={upgradeRequested:new c};a.extend(!0,o,p,{on:q,activate:m,deactivate:n,setMode:l})}var g=d.modes.POINTER,h=d.modes.WRITE;return f}),define("cb/services/css/coreCssService",["jquery","underscore","cb/constants","util"],function(a,b,c,d){"use strict";function e(){function a(a){d.log("ACTIVATING CORE CSS SERVICE"),g=a.foreignMouseEvent,g.add(e)}function c(){d.log("DEACTIVATING CORE CSS SERVICE"),g&&g.remove(e)}function e(a){"mouseenter"===a.type?a.target.setAttribute(f,""):a.target.removeAttribute(f)}var g,h=this;b.extend(h,{activate:a,deactivate:c})}var f=c.PSEUDO_HOVER_ATTR;return e.deserializeNode=function(c){var d;return d=c.href?a("<link>",{rel:"stylesheet",href:c.href}):c.css?a("<style>",{text:c.css}):a("<style></style>"),c.media&&d.attr("media",c.media),b.isUndefined(c.pos)||d.data("pos",c.pos),d},e.formatCssNodeForLogging=function(c){var d,e;return d=a.extend(!0,{},c),e=d.css,b.isString(e)&&(d.css=e.substr(0,100)+"..."),d},e.formatCssNodesArrayForLogging=function(a){return b.isArray(a)?b.map(a,e.formatCssNodeForLogging):a},e}),define("cb/services/css/masterBrowserCssService",["underscore","util","cb/constants","URI"],function(a,b,c,d){"use strict";function e(){function e(){var c=document.styleSheets;b.log("----------"),b.log("PARSING STYLESHEETS, TOTAL STYLESHEETS: ",c.length),a.each(c,g),b.log("PARSED ALL STYLESHEETS"),b.log("----------")}function f(a,b){a=a.replace(p,q),a=h(a,b),s.push({css:a})}function g(c,d){var e,h,j,k,l,m=[],n=[],r=c.href||document.location.href;if(i(c)){for(e=c.cssRules||c.rules,b.log("PARSING STYLESHEET No ",d,", ",e.length," RULES "," PATH ",r),l=e.length;l--;)if(h=e[l],3===h.type)g(h.styleSheet);else try{j=h.cssText,m[l]=j,1===h.type&&o.test(j)&&(k=j.replace(p,q),c.insertRule(k,l+1))}catch(a){b.log("EXCEPTION CAUGHT WHILE PARSING CSSRULE: ",h)}for(;m.length>4095;)n.push(m.splice(0,4095));n.push(m),a.each(n,function(a){f(a.join("\n"),r)})}else b.log("SKIPPING STYLESHEET No",d,c.href?c.href:{})}function h(a,c){var e=0,f=a.replace(r,function(a,f,g,h,i,j){var k,l;if("data:"===h.slice(0,5))return a;k=new d(h);try{l=k.absoluteTo(c).href(),e++}catch(a){b.log('UNABLE TO ABSOLUTIZE: "'+h+'"',a)}return f+g+l+i+j});return b.log("ABSOLUTIZED ",e," RULES"),f}function i(a){try{var b,c=a.cssRules||a.rules,d=a.media,e=!1;if(!c)return!1;if(!d)return!0;if(d.length){for(b=0;b<d.length;b++)if("screen"===d.item(b)||"all"===d.item(b)){e=!0;break}if(!e)return!1}return!0}catch(a){return!1}}function j(a){m=a}function k(){return s}function l(a){a.stylesheets=k(),m.publishBrowserCss(a)}var m,n=this,o=/:hover/,p=/:hover/g,q="["+c.PSEUDO_HOVER_ATTR+"]",r=/([Uu][Rr][Ll]\()\s*(?:(['"]?)([^'"\s)]*)(['"]?))?\s*(\))/g,s=[];a.extend(n,{setCssClient:j,createSnapshot:e,getSnashpshot:k,publishCSS:l})}return e}),define("cb/services/css/masterServerCssService",["underscore","jquery","util","cb/constants","URI","./coreCssService"],function(a,b,c,d,e,f){"use strict";function g(d,g){function i(d){var e,f,g,h,i;if(c.isServiceNode(d[0]))return!1;if(!(e=d.attr("media")))return!0;for(f=e.split(","),i=f.length;i--;)if(g=b.trim(f[i]),h=g.match(u)[0].toLowerCase(),-1!==a.indexOf(y,h))return!0;return!1}function j(b){a.each(b,function(a){a[h]=w,v[w]=a,w++})}function k(b){b.baseUrl=c.getPageBaseUrl(),b.pageUrl=c.getPageUrl(),b.cobrowseUrl=g.cobrowseUrl,b.stylesheets=a.map(x,m),g&&g.apikey&&(c.log('"SERVER" CSS SERVICE: INCLUDING APIKEY: '+g.apikey),b.apikey=g.apikey),d.publishServerCss(b),c.log('"SERVER" CSS SERVICE SENT SERIALIZED CSS NODES',l(b))}function l(a){var c=b.extend(!0,{},a);return c.stylesheets=f.formatCssNodesArrayForLogging(a.stylesheets),c}function m(a){var d,g=b(a),i=g.attr("media"),j={};if(j.pos=a[h],"LINK"===a.nodeName)d=new e(b.trim(g.attr("href"))),d.is("relative")&&(d=d.absoluteTo(c.getPageBaseUrl().split("?")[0])),j.href=d.href();else if("STYLE"===a.nodeName&&(j.css=b.trim(g.html()),""===j.css))try{j.css=(a.styleSheet||a.style).cssText}catch(a){c.log("CANNOT GET THE CONTENTS OF A STYLE NODE")}return i&&(j.media=i),c.log('"SERVER" CSS SERVICE: SERIALIZED CSS NODE ',f.formatCssNodeForLogging(j)),j}function n(a){a.data("cb-css-node",!0)}function o(a){return a.data("cb-css-node")}function p(b){var d;if(c.log("HANDLING SERVER-PROCESSED CSS NODES",f.formatCssNodesArrayForLogging(b)),!a.isArray(b))throw new TypeError("CSS service expects an array");d=a.map(b,f.deserializeNode),a.each(d,function(a){var b=a.data("pos");c.markServiceNode(a[0]),n(a),a.insertAfter(v[b])})}function q(a){p(a.stylesheets)}function r(){c.log("ACTIVATING SERVER CSS SERVICE"),b('style, link[rel="stylesheet"]').each(function(a,c){i(b(c))&&x.push(c)}),j(x),d.on.gotProcessedCss.add(q)}function s(){c.log("DEACTIVATING SERVER CSS SERVICE"),d.on.gotProcessedCss.remove(q),b('style, link[rel="stylesheet"]').each(function(a,d){var e=b(d);o(e)&&(c.log("REMOVING ADDED CSS NODE"),e.remove())})}var t=this,u=/[a-z0-9-]*/i,v={},w=0,x=[],y=["","screen","all","not","only"];a.extend(t,{activate:r,deactivate:s,publishCSS:k})}var h=d.CSS_INDEX_PROPERTY;return g}),define("cb/services/css/masterCssService",["jquery","underscore","util","cb/constants","URI","support","./coreCssService","./masterBrowserCssService","./masterServerCssService"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(a){function d(b){c.log("ACTIVATING MASTER CSS SERVICE"),l=b.cssClient,a.server&&(o=new i(l,{cobrowseUrl:a.cobrowseUrl,apikey:a.apikey}),o.activate()),a.browser&&n.setCssClient(l),m.activate({foreignMouseEvent:b.foreignMouseEvent})}function e(){c.log("DEACTIVATING MASTER CSS SERVICE"),m.deactivate(),o&&o.deactivate()}function f(){return a.default}function j(){return a.default&&!a.browser&&!a.server}function k(b){a.server&&o.publishCSS({targetUsersIds:b.targetUsersIds,initial:!!b.initial,expectAnotherService:!!a.browser}),a.browser&&(n.publishCSS({targetUsersIds:b.targetUsersIds,initial:!!b.initial,expectAnotherService:!!a.server}),c.log('"BROWSER" CSS SERVICE: SENT SERIALIZED CSS NODES',g.formatCssNodesArrayForLogging(n.getSnashpshot())))}var l,m,n,o,p=this;m=new g,a.browser&&(n=new h),c.log("INITIALIZING CSS SERVICE WITH CONFIG: ",a),n&&(c.log('CREATING "BROWSER" CSS SNAPSHOT'),n.createSnapshot()),b.extend(p,{activate:d,deactivate:e,publishCSS:k,isDefaultSyncEnabled:f,isOnlyDefaultSyncEnabled:j})}return j}),define("cb/services/masterWindowSizeService",["underscore","jquery","util"],function(a,b,c){"use strict";function d(d,g){function h(){return{width:g.innerWidth,height:g.innerHeight}}function i(){var a=h();return t.width!==a.width||t.height!==a.height}function j(){var a=h();t=a,d.publishWindowSize(a)}function k(){i()&&(c.log("DETECTED CHANGED WINDOW SIZE ",h(),t),j())}function l(){q=setTimeout(function(){u&&(k(),l())},f)}function m(){clearTimeout(q)}function n(){s.on("resize.gcb",a.throttle(j,e)),l()}function o(){u||(u=!0,n())}function p(){u&&(u=!1,s.off("resize.gcb"),m())}var q,r=this,s=b(g),t={},u=!1;a.extend(r,{activate:o,deactivate:p,publishSize:j})}var e=100,f=500;return d.ONRESIZE_SYNC_INTERVAL=e,d.SIZE_CHECK_INTERVAL=f,d}),define("cb/app/master/topmostMasterApp",["jquery","underscore","util","support","cb/app/master/masterCore","cb/transport/clients/masterSessionClient","cb/transport/clients/contextClient","cb/transport/clients/masterWindowClient","cb/transport/clients/masterDomClient","cb/transport/clients/masterModeClient","cb/transport/clients/genericRestClient","cb/session","cb/constants","cb/environment","signals","cb/ui/mouse/virtualMouseManager","cb/services/sessionConfigService","cb/services/masterTopMostModeService","cb/services/css/masterCssService","cb/services/masterWindowSizeService"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){"use strict";var u=m.TOPMOST_CONTEXT_ID;return function(v,w){function x(){var a,d,o,w;!1!==v.disableBackForwardCache&&c.disableSafariBackForwardCache(),M=L=u,c.log("APIKEY IS ",v.apikey),w=new k(X,v.apikey),N=l.createInstance(),P=new p("master"),J=new f(w,{cometdUrl:X+"/cometd",maxOfflineDuration:v.maxOfflineDuration,disableWebSockets:v.disableWebSockets,apikey:v.apikey,serverAvailabilityTimeout:v.timeout||m.SERVER_AVAILABILITY_TIMEOUT,cometdConfig:v.cometdConfig}),K=new h(J.getCoreClient()),a=new g(J.getCoreClient(),M),o=new j(J.getCoreClient()),d=new i(a),R=new s(b.extend(v.css,{cobrowseUrl:X,apikey:v.apikey})),S=new r(o,N),T=new t(K,window),O=new e($,R,M,b.pick(v,m.UNMASK_PWD_OPTION,m.EVENTS_HANDLING_OPTIONS)),O.on.pickedUpSlaves.add(A),Z.elementMasked=O.on.elementMasked,Z.iframeDetected=O.on.iframeDetected,Z.modeChanged=S.on.modeChanged,Z.modeUpgradeRequested=S.on.upgradeRequested,d.on.slaveContextReady.add(A),N.users.on("add",function(){Z.agentJoined.dispatch({},N.serializeForApi())}),K.on.windowCommandReceived.add(B),K.on.navigateAttemptReceived.add(C),J.on.connected.add(y),J.on.disconnected.add(z),Q=new q(w),b.each(Z,function(a){a.memorize=!0}),v.setDocumentDomain&&n.setDocumentDomain(),N.exists()&&F(),Y.on("beforeunload.gcbNavigation pagehide.gcbNavigation",function(){c.log("CLEARING SLAVE NAVIGATION TIMEOUT"),window.clearTimeout(V)}),Z.ready.dispatch(N.exists()?N.serializeForApi():null)}function y(a){N.activate(),S.activate(),Z.disconnected.forget(),a.newSession&&Z.sessionStarted.dispatch(N.serializeForApi(),U)}function z(a){N.clear(),S.deactivate(),T.deactivate(),Z.disconnected.dispatch({reason:a&&a.reason}),b.each(Z,function(a,b){"disconnected"!==b&&a.forget()})}function A(a){if(!N.users.length)throw new Error("GOT SLAVEREADY WHEN NO SLAVES ARE CONNECTED");c.log("PUBLISHING URL: ",window.location.href),K.publishUrl(window.location.href,document.title,a),T.activate(),T.publishSize()}function B(a){var b;if(S.currentMode().pointer)return void c.log("WARNING! ILLEGAL NAVIGATION ATTEMPT IN POINTER MODE");b={back:function(){window.history.back()},forward:function(){window.history.forward()},refresh:function(){window.location.reload()}},b[a]&&D({command:a},b[a])}function C(a,b){if(S.currentMode().pointer)return void c.log("WARNING! ILLEGAL NAVIGATION ATTEMPT IN POINTER MODE");E(a,b)?(c.log("SUCCESSFUL SLAVE NAVIGATION ATTEMPT"),D({command:"url",url:b},function(){window.location=b})):(c.log("UNSUCCESSFUL SLAVE NAVIGATION ATTEMPT"),K.publishNavigateDenial(a,b))}function D(a,c){window.clearTimeout(V),V=window.setTimeout(function(){Z.navigationFailed.dispatch(),K.publishNavigateDenial(N.users.first().get("userId"),a.url||a.command)},m.NAVIGATION_TIMEOUT),Z.navigationInitiated.dispatch(a),b.delay(c,m.PAUSE_BEFORE_NAVIGATION)}function E(a,b){return!0}function F(a){c.log("CONNECT IS CALLED, CONNECTING"),a&&(U=a),J.connect()}function G(a){c.log("NEW SESSION. CLEANING COMETD COOKIES"),c.removeRootDomainCookie(m.RELOAD_EXTENSION_COOKIE_NAME),F(a)}function H(){c.log("EXITING SESSION"),J.disconnect()}function I(){return d.textNodeCustomProps&&(d.mutationObservers||d.configurableNodeProperties)}var J,K,L,M,N,O,P,Q,R,S,T,U,V,W=this,X=n.master.getBaseUrl(),Y=a(window),Z={ready:new o,sessionStarted:new o,agentJoined:new o,navigationInitiated:new o,navigationFailed:new o,disconnected:new o},$={getSessionClient:function(){return J},getNextContextId:function(){return++L},getSession:function(){return N},getVirtualMouseManager:function(){return P},getSessionConfig:function(a){Q.getSessionConfig(a)},clearSessionConfigCache:function(){Q.clearCache()},getMouseSyncInterval:function(){return m.mouseSyncSpeed[v.disableWebSockets?"LOW":"HIGH"]}};b.isFunction(w)&&(c.log=w),n.master.registerTopmostApi($),x(),b.extend(W,{on:Z,startSession:G,exitSession:H,isBrowserSupported:I,markServiceElement:c.markServiceNode,downgradeMode:function(){S.setMode(m.modes.POINTER)}})}}),define("cb/app/master/childMasterApp",["jquery","underscore","cb/environment","util","cb/constants","cb/app/master/masterCore","cb/services/css/masterCssService"],function(a,b,c,d,e,f,g){"use strict";return function(h,i){function j(a){var g=window.frameElement;d.log("CHILD CONTEXT: GOT TOPMOST API",a),g&&(d.log("CHILD TRYING TO GET CONTEXT ID"),k=c.master.indexIframeIfNotYet(g,a.getNextContextId)),d.log("CHILD CONTEXT: INSTANTIATING CORE",a),l=new f(a,m,k,b.pick(h,e.UNMASK_PWD_OPTION,e.EVENTS_HANDLING_OPTIONS)),l.on.elementMasked.memorize=!0,n.resolve({on:{elementMasked:l.on.elementMasked,iframeDetected:l.on.iframeDetected},markServiceElement:d.markServiceNode})}var k,l,m,n=a.Deferred();return b.isFunction(i)&&(d.log=i),m=new g(b.extend(h.css,{apikey:h.apikey})),h.setDocumentDomain&&c.setDocumentDomain(),d.log("CHILD CONTEXT: WAITING FOR 1ST AGENT AND TOPMOST API"),d.injectAsync(c.master.provideTopmostApi,j),n.promise()}}),function(a){a("toastr",["jquery"],function(a){return function(){function b(b){return b||(b=c()),e=a("#"+b.containerId),e.children().length?e:(e=a("<div/>").attr("id",b.containerId).addClass(b.positionClass),b.onContainerCreated(e),e.appendTo(a(b.target)),e)}function c(){return a.extend({},f,m.options)}function d(a){e||(e=b()),a.is(":visible")||(a.remove(),a=null,0===e.children().length&&e.remove())}var e,f={tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,fadeIn:300,onFadeIn:void 0,fadeOut:1e3,onFadeOut:void 0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",target:"body",onContainerCreated:a.noop,onToastCreated:a.noop},g=function(a,b,d){return i({iconClass:c().iconClasses.error,message:a,optionsOverride:d,title:b})},h=function(a,b,d){return i({iconClass:c().iconClasses.info,message:a,optionsOverride:d,title:b})},i=function(f){function g(){if(!(a(":focus",m).length>0))return m.fadeOut(j.fadeOut,function(){d(m),j.onFadeOut&&j.onFadeOut()})}function h(){(j.timeOut>0||j.extendedTimeOut>0)&&(l=setTimeout(g,j.extendedTimeOut))}function i(){clearTimeout(l),m.stop(!0,!0).fadeIn(j.fadeIn)}var j=c(),k=f.iconClass||j.iconClass;void 0!==f.optionsOverride&&(j=a.extend(j,f.optionsOverride),k=f.optionsOverride.iconClass||k),e=b(j);var l=null,m=a("<div/>"),n=a("<div/>"),o=a("<div/>"),p={options:j,map:f};return f.iconClass&&m.addClass(j.toastClass).addClass(k),f.title&&(n.append(f.title).addClass(j.titleClass),m.append(n)),f.message&&(o.append(f.message).addClass(j.messageClass),m.append(o)),j.onToastCreated(m),m.hide(),e.prepend(m),m.fadeIn(j.fadeIn,j.onFadeIn),j.timeOut>0&&(l=setTimeout(g,j.timeOut)),m.hover(i,h),!j.onclick&&j.tapToDismiss&&m.click(g),j.onclick&&m.click(function(){j.onclick()&&g()}),j.debug&&console&&console.log(p),m},j=function(a,b,d){return i({iconClass:c().iconClasses.success,message:a,optionsOverride:d,title:b})},k=function(a,b,d){return i({iconClass:c().iconClasses.warning,message:a,optionsOverride:d,title:b})},l=function(f){var g=c();if(e||b(g),f&&0===a(":focus",f).length)return void f.fadeOut(g.fadeOut,function(){d(f)});e.children().length&&e.fadeOut(g.fadeOut,function(){e.remove()})},m={clear:l,error:g,getContainer:b,info:h,options:{},success:j,version:"1.2.3",warning:k};return m}()})}("function"==typeof define&&define.amd?define:function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b(require(a[0])):window.toastr=b(window.jQuery)}),define("cb/ui/notify",["jquery","util","toastr","cb/lib/jquery.service-nodes"],function(a,b,c){"use strict";function d(a,b){var d,e={};return b=b||{},b.icon&&(e.iconClass=i+b.icon),b.sticky&&(e.timeOut=e.extendedTimeOut=0),b.target&&(e.target=b.target),d=c.info(a,null,e),{$el:d,remove:function(){d.click()}}}function e(a){a.cbMarkNode()}function f(b){a.extend(c.options,b)}function g(a){var b=a&&a.containerSuffix,c=a&&a.notificationSuffix;b&&f({containerId:i+b}),c&&f({toastClass:h+c})}var h="_gcb_toast",i=h+"-";return c.options={toastClass:h,containerId:i+"container",iconClasses:{error:i+"error",info:i+"info",success:i+"success",warning:i+"warning"},iconClass:i+"info",positionClass:i+"top-right",titleClass:i+"title",messageClass:i+"message",onContainerCreated:e,onToastCreated:e},d.init=g,d}),define("text",["module"],function(a){"use strict";var b,c,d=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],e=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,f=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,g="undefined"!=typeof location&&location.href,h=g&&location.protocol&&location.protocol.replace(/\:/,""),i=g&&location.hostname,j=g&&(location.port||void 0),k=[],l=a.config&&a.config()||{};return b={version:"2.0.5",strip:function(a){if(a){a=a.replace(e,"");var b=a.match(f);b&&(a=b[1])}else a="";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:l.createXhr||function(){var a,b,c;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(b=0;b<3;b+=1){c=d[b];try{a=new ActiveXObject(c)}catch(a){}if(a){d=[c];break}}return a},parseName:function(a){var b,c,d,e=!1,f=a.indexOf("."),g=0===a.indexOf("./")||0===a.indexOf("../");return-1!==f&&(!g||f>1)?(b=a.substring(0,f),c=a.substring(f+1,a.length)):b=a,d=c||b,f=d.indexOf("!"),-1!==f&&(e="strip"===d.substring(f+1),d=d.substring(0,f),c?c=d:b=d),{moduleName:b,ext:c,strip:e}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,c,d,e){var f,g,h,i=b.xdRegExp.exec(a);return!i||(f=i[2],g=i[3],g=g.split(":"),h=g[1],g=g[0],!(f&&f!==c||g&&g.toLowerCase()!==d.toLowerCase()||(h||g)&&h!==e))},finishLoad:function(a,c,d,e){d=c?b.strip(d):d,l.isBuild&&(k[a]=d),e(d)},load:function(a,c,d,e){if(e.isBuild&&!e.inlineText)return void d();l.isBuild=e.isBuild;var f=b.parseName(a),k=f.moduleName+(f.ext?"."+f.ext:""),m=c.toUrl(k),n=l.useXhr||b.useXhr;!g||n(m,h,i,j)?b.get(m,function(c){b.finishLoad(a,f.strip,c,d)},function(a){d.error&&d.error(a)}):c([k],function(a){b.finishLoad(f.moduleName+"."+f.ext,f.strip,a,d)})},write:function(a,c,d,e){if(k.hasOwnProperty(c)){var f=b.jsEscape(k[c]);d.asModule(a+"!"+c,"define(function () { return '"+f+"';});\n")}},writeFile:function(a,c,d,e,f){var g=b.parseName(c),h=g.ext?"."+g.ext:"",i=g.moduleName+h,j=d.toUrl(g.moduleName+h)+".js";b.load(i,d,function(c){var d=function(a){return e(j,a)};d.asModule=function(a,b){return e.asModule(a,j,b)},b.write(a,i,d,f)},f)}},"node"===l.env||!l.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(c=require.nodeRequire("fs"),b.get=function(a,b){var d=c.readFileSync(a,"utf8");0===d.indexOf("\ufeff")&&(d=d.substring(1)),b(d)}):"xhr"===l.env||!l.env&&b.createXhr()?b.get=function(a,c,d,e){var f,g=b.createXhr();if(g.open("GET",a,!0),e)for(f in e)e.hasOwnProperty(f)&&g.setRequestHeader(f.toLowerCase(),e[f]);l.onXhr&&l.onXhr(g,a),g.onreadystatechange=function(b){var e,f;4===g.readyState&&(e=g.status,e>399&&e<600?(f=new Error(a+" HTTP status: "+e),f.xhr=g,d(f)):c(g.responseText))},g.send(null)}:("rhino"===l.env||!l.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java)&&(b.get=function(a,b){var c,d,e="utf-8",f=new java.io.File(a),g=java.lang.System.getProperty("line.separator"),h=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(f),e)),i="";try{for(c=new java.lang.StringBuffer,d=h.readLine(),d&&d.length()&&65279===d.charAt(0)&&(d=d.substring(1)),c.append(d);null!==(d=h.readLine());)c.append(g),c.append(d);i=String(c.toString())}finally{h.close()}b(i)}),b}),define("text!cb/ui/status.html",[],function(){return'<div class="gcb-appStatus">\r\n  <% if (typeof icon !== \'undefined\') { %><div class="gcb-appStatus-icon gcb-appStatus-icon-<%= icon %>"></div><% } %>\r\n  <%= message %>\r\n  <div class="gcb-appStatus-close"><div class="gcb-appStatus-close-icon"></div></div>\r\n</div>'}),define("cb/ui/status",["jquery","underscore","text!./status.html","cb/lib/jquery.service-nodes"],function(a,b,c){"use strict";function d(){return Math.max.apply(null,a.map(a("*"),function(b){if("static"!==a(b).css("position"))return Number(a(b).css("z-index"))||1}))+1}function e(e){if(null===e)return void f();var g=h,j=b.isObject(e)?e:{message:e};h=a(b.template(c,j)),g&&g.remove(),h.css({zIndex:d()}).cbMarkNode().on("click",".gcb-appStatus-close",f).prependTo(i.target).slideDown(i.speed)}function f(){h&&h.slideUp(i.speed,function(){h.remove(),h=null})}function g(b){a.extend(i,b)}var h,i={target:document.body,speed:50};return e.configure=g,e}),function(){"use strict";var a={smoketimeout:[],init:!1,zindex:2147483648,i:0,title:"Co-browse",bodyload:function(b){var c=document.createElement("div");c.setAttribute("id","smoke-out-"+b),c.className="gcb-smoke-base",c.style.zIndex=a.zindex,a.zindex++,a.beforeAppend(c),document.body.appendChild(c)},beforeAppend:function(){},newdialog:function(){var b=(new Date).getTime();return b=Math.random(1,99)+b,a.init?a.bodyload(b):a.listen(window,"load",function(){a.bodyload(b)}),b},build:function(b,c){a.i++,c.stack=a.i,b=b.replace(/\n/g,"<br />"),b=b.replace(/\r/g,"<br />");var d,e,f="",g="OK",h="Cancel",i="";"prompt"===c.type&&(f='<div class="gcb-dialog-prompt"><input id="gcb-dialog-input-'+c.newid+'" type="text" '+(c.params.value?'value="'+c.params.value+'"':"")+" /></div>"),c.params.ok&&(g=c.params.ok),c.params.cancel&&(h=c.params.cancel),c.params.classname&&(i=c.params.classname),d='<div class="gcb-dialog-buttons">',"alert"===c.type?d+='<button id="alert-ok-'+c.newid+'">'+g+"</button>":"prompt"!==c.type&&"confirm"!==c.type||(c.params.reverseButtons?d+='<button id="'+c.type+"-ok-"+c.newid+'">'+g+'</button><button id="'+c.type+"-cancel-"+c.newid+'" class="gcb-cancel">'+h+"</button>":d+='<button id="'+c.type+"-cancel-"+c.newid+'" class="gcb-cancel">'+h+'</button><button id="'+c.type+"-ok-"+c.newid+'">'+g+"</button>"),d+="</div>",e='<div id="gcb-smoke-bg-'+c.newid+'" class="gcb-smokebg"></div><div class="gcb-dialog gcb-smoke '+i+'"><div class="gcb-dialog-inner"><div class="gcb-dialog-title">'+a.title+"</div>"+b+f+d+"</div></div>",a.init?a.finishbuild(b,c,e):a.listen(window,"load",function(){a.finishbuild(b,c,e)})},finishbuild:function(b,c,d){var e=document.getElementById("smoke-out-"+c.newid);for(e.className="gcb-smoke-base gcb-smoke-visible  gcb-smoke-"+c.type,e.innerHTML=d;""===e.innerHTML;)e.innerHTML=d;if(a.smoketimeout[c.newid]&&clearTimeout(a.smoketimeout[c.newid]),void 0===c.params.skipListeners||!0!==c.params.skipListeners)switch(a.listen(document.getElementById("gcb-smoke-bg-"+c.newid),"click",function(){a.destroy(c.type,c.newid),"prompt"===c.type||"confirm"===c.type?c.callback(!1):"alert"===c.type&&void 0!==c.callback&&c.callback()}),c.type){case"alert":a.finishbuildAlert(b,c,d);break;case"confirm":a.finishbuildConfirm(b,c,d);break;case"prompt":a.finishbuildPrompt(b,c,d);break;default:throw"Unknown type: "+c.type}},finishbuildAlert:function(b,c){a.listen(document.getElementById("alert-ok-"+c.newid),"click",function(){a.destroy(c.type,c.newid),void 0!==c.callback&&c.callback()}),document.onkeyup=function(b){b||(b=window.event),13!==b.keyCode&&32!==b.keyCode&&27!==b.keyCode||(a.destroy(c.type,c.newid),void 0!==c.callback&&c.callback())}},finishbuildConfirm:function(b,c){a.listen(document.getElementById("confirm-cancel-"+c.newid),"click",function(){a.destroy(c.type,c.newid),c.callback(!1)}),a.listen(document.getElementById("confirm-ok-"+c.newid),"click",function(){a.destroy(c.type,c.newid),c.callback(!0)}),document.onkeyup=function(b){b||(b=window.event),13===b.keyCode||32===b.keyCode?(a.destroy(c.type,c.newid),c.callback(!0)):27===b.keyCode&&(a.destroy(c.type,c.newid),c.callback(!1))}},finishbuildPrompt:function(b,c){var d=document.getElementById("dialog-input-"+c.newid);setTimeout(function(){d.focus(),d.select()},100),a.listen(document.getElementById("prompt-cancel-"+c.newid),"click",function(){a.destroy(c.type,c.newid),c.callback(!1)}),a.listen(document.getElementById("prompt-ok-"+c.newid),"click",function(){a.destroy(c.type,c.newid),c.callback(d.value)}),document.onkeyup=function(b){b||(b=window.event),13===b.keyCode?(a.destroy(c.type,c.newid),c.callback(d.value)):27===b.keyCode&&(a.destroy(c.type,c.newid),c.callback(!1))}},destroy:function(b,c){var d=document.getElementById("smoke-out-"+c),e=document.getElementById(b+"-ok-"+c),f=document.getElementById(b+"-cancel-"+c);d.className="smoke-base",e&&(a.stoplistening(e,"click",function(){}),document.onkeyup=null),f&&a.stoplistening(f,"click",function(){}),a.i=0,d.innerHTML=""},alert:function(b,c,d){"object"!=typeof d&&(d=!1);var e=a.newdialog();return a.build(b,{type:"alert",callback:c,params:d,newid:e}),e},confirm:function(b,c,d){"object"!=typeof d&&(d=!1);var e=a.newdialog();return a.build(b,{type:"confirm",callback:c,params:d,newid:e}),e},prompt:function(b,c,d){"object"!=typeof d&&(d=!1);var e=a.newdialog();return a.build(b,{type:"prompt",callback:c,params:d,newid:e}),e},listen:function(a,b,c){return a.addEventListener?a.addEventListener(b,c,!1):!!a.attachEvent&&a.attachEvent("on"+b,c)},stoplistening:function(a,b,c){return a.removeEventListener?a.removeEventListener("click",c,!1):!!a.detachEvent&&a.detachEvent("on"+b,c)}};a.init=!0,"undefined"!=typeof module&&module.exports?module.exports=a:"function"==typeof define&&define.amd?define("smoke",a):this.smoke=a}(),define("tooltip",["jquery","cb/lib/jquery.service-nodes"],function(a){"use strict";var b="gcb-",c=function(a,b){this.init("gcbTooltip",a,b)};c.prototype={constructor:c,init:function(b,c,d){var e,f,g,h,i;for(this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,g=this.options.trigger.split(" "),i=g.length;i--;)h=g[i],"click"==h?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):"manual"!=h&&(e="hover"==h?"mouseenter":"focus",f="hover"==h?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c,d=a.fn[this.type].defaults,e={};if(!this.options.skipEnter||!this.options.skipEnter(b)){if(this._options&&a.each(this._options,function(a,b){d[a]!=b&&(e[a]=b)},this),c=a(b.currentTarget)[this.type](e).data(this.type),!c.options.delay||!c.options.delay.show)return c.show();clearTimeout(this.timeout),c.hoverState="in",this.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)}},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);if(this.timeout&&clearTimeout(this.timeout),!c.options.delay||!c.options.delay.hide)return c.hide();c.hoverState="out",this.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)},show:function(){var c,d,e,f,g,h,i=a.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(i),i.isDefaultPrevented())return;switch(c=this.tip(),this.setContent(),this.options.animation&&c.addClass(b+"fade"),g="function"==typeof this.options.placement?this.options.placement.call(this,c[0],this.$element[0]):this.options.placement,c.detach().css({top:0,left:0,display:"block"}),this.options.container?c.appendTo(this.options.container):c.insertAfter(this.$element),d=this.getPosition(),e=c[0].offsetWidth,f=c[0].offsetHeight,g){case"bottom":h={top:d.top+d.height,left:d.left+d.width/2-e/2};break;case"top":h={top:d.top-f,left:d.left+d.width/2-e/2};break;case"left":h={top:d.top+d.height/2-f/2,left:d.left-e};break;case"right":h={top:d.top+d.height/2-f/2,left:d.left+d.width}}this.applyPlacement(h,g),this.$element.trigger("shown")}},applyPlacement:function(a,c){var d,e,f,g,h=this.tip(),i=h[0].offsetWidth,j=h[0].offsetHeight;h.offset(a).addClass(b+c).addClass(b+"in"),d=h[0].offsetWidth,e=h[0].offsetHeight,"top"==c&&e!=j&&(a.top=a.top+j-e,g=!0),"bottom"==c||"top"==c?(f=0,a.left<0&&(f=-2*a.left,a.left=0,h.offset(a),d=h[0].offsetWidth,e=h[0].offsetHeight),this.replaceArrow(f-i+d,d,"left")):this.replaceArrow(e-j,e,"top"),g&&h.offset(a)},replaceArrow:function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},setContent:function(){var a,c,d,e=this.tip(),f=this.getTitle();a=e.find("."+b+"tooltip-inner"),d=this.options.html?"html":"text",c=a[d](),c!==f&&a[d](f),e.removeClass("fade in top bottom left right".replace(/\b(\S)/g,b+"$1")),e.cbMarkNode()},hide:function(){function c(){var b=setTimeout(function(){d.off(a.support.transition.end).detach()},500);d.one(a.support.transition.end,function(){clearTimeout(b),d.detach()})}var d=this.tip();return d.removeClass(b+"in"),a.support.transition&&this.$tip.hasClass(b+"fade")?c():d.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},getTitle:function(){var a=this.$element,b=this.options;return("function"==typeof b.title?b.title.call(a[0]):b.title)||a.attr("data-original-title")},tip:function(){return this.$tip=this.$tip||a(this.options.template).cbMarkNode()},arrow:function(){return this.$arrow=this.$arrow||this.tip().find("."+b+"tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(c){var d=c?a(c.currentTarget)[this.type](this._options).data(this.type):this;d.tip().hasClass(b+"in")?d.hide():d.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var d=a.fn.tooltip;a.fn.gcbTooltip=function(d){return this.each(function(){var e=a(this),f=e.data(b+"tooltip"),g="object"==typeof d&&d;f||e.data(b+"tooltip",f=new c(this,g)),"string"==typeof d&&f[d]()})},a.fn.gcbTooltip.Constructor=c,a.fn.gcbTooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="gcb-tooltip"><div class="gcb-tooltip-arrow"></div><div class="gcb-tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},a.fn.gcbTooltip.noConflict=function(){return a.fn.gcbTooltip=d,this}}),define("cb/ui/tooltip",["jquery","underscore","tooltip"],function(a,b){"use strict";var c={container:"body",animation:!1};a.fn.gTip=function(d){return this.each(function(){a(this).gcbTooltip(b.isObject(d)?a.extend({},c,d):d)})}}),define("cb/ui/master/coreMasterUi",["jquery","underscore","util","../../ui/tooltip"],function(a,b,c){"use strict";function d(d,e){function f(a){return a.originalEvent.gcbTriggered}function g(c){var d,g=a(c),h=e.contentMasked,i=e.contentMaskedPartially;return"OPTION"===c.nodeName?void g.closest("select").gTip({title:i}):g.is(":input")?void g.gTip({title:h,skipEnter:f}):void g.gTip({title:h,trigger:"manual",skipEnter:f}).on("show",function(){g.cbMarkNode({noChildren:!0}).css({outline:"1px solid #e3b33b"}),b.delay(function(){g.cbUnmarkNode()},0)}).on("hide",function(){g.cbMarkNode({noChildren:!0}).css({outline:0}),b.delay(function(){g.cbUnmarkNode()},0)}).on("focus","*",function(){d=!0,g.gTip("show")}).on("blur","*",function(){d=!1,g.gTip("hide")}).hover(function(){g.gTip("show")},function(){d||g.gTip("hide")})}function h(b,c){var d=a(b);!1===c.isAllowed&&d.gTip({title:e.contentMaskedPartially})}function i(){c.log("CORE MASTER UI: INITIALIZING ",d,e),d.onMaskedElement.add(g),d.onIframe.add(h)}i()}return d}),define("text!cb/ui/master/toolbar.html",[],function(){return'<div class="gcb-toolbar">\r\n  <div class="gcb-toolbar-top gcb-drag-handle"><div class="gcb-toolbar-grips"></div></div>\r\n  <div class="gcb-toolbar-content">\r\n    <div class="gcb-toolbar-cell gcb-toolbar-cell-content">\r\n      <%= text %>\r\n    </div>\r\n    <div class="gcb-toolbar-cell gcb-toolbar-cell-exit">\r\n      <div class="gcb-toolbar-exit" title="<%= exitTitle %>">\r\n        <div class="gcb-toolbar-icon-exit">\r\n          <svg xmlns=\'http://www.w3.org/2000/svg\' width=\'32\' height=\'32\'>\r\n            <path d="M24.563 18l-1.75 1.75-1.75-1.75h3.5zM28.375 20.688l-4.25 4.313 4.25 4.313-1.25 1.313-4.313-4.313-4.313 4.313-1.313-1.313 4.313-4.313-4.313-4.313 1.313-1.313 4.313 4.313 4.313-4.313zM17.563 25l-1 1h-5.313c0.625 1.188 1.5 1.813 2.563 1.813 0.5 0 0.938-0.125 1.375-0.438l-1.938 1.938 0.5 0.5c-7.625-0.063-13.75-6.313-13.75-13.875 0-7.625 6.188-13.75 13.813-13.75s13.813 6.188 13.813 13.75l-0.5-0.5-1.5 1.5c0-0.313 0.063-0.688 0.063-1 0-0.688-0.063-1.313-0.188-1.938h-5.75c0.063 0.688 0 1.313 0 2v0.688l-1.313-1.25-0.625 0.625v-0.063c0-0.688 0.063-1.375 0.063-2h-8.125c0 0.625-0.063 1.313-0.063 2s0.063 1.375 0.063 2h6.188l-2 2h-4.063c0.125 1.563 0.313 2.875 0.625 4h6.063zM25 12c-0.563-1.5-1.375-2.875-2.438-4h-3.75c0.375 1.25 0.563 2.563 0.75 4h5.438zM20.188 6c-0.875-0.563-1.75-1-2.75-1.313 0.25 0.375 0.5 0.875 0.688 1.313h2.063zM13.813 4.188c-1.063 0-1.875 0.688-2.5 1.813h5c-0.625-1.125-1.438-1.813-2.5-1.813zM11.813 8h-1.313c-0.313 1.125-0.5 2.438-0.625 4h7.875c-0.125-1.563-0.375-2.875-0.688-4h-5.25zM10.125 4.688c-1 0.313-1.875 0.75-2.75 1.313h2.125c0.188-0.438 0.375-0.938 0.625-1.313zM5 8c-1.063 1.125-1.813 2.5-2.375 4h5.438c0.188-1.438 0.438-2.75 0.75-4h-3.813zM1.938 15.938c0 0.688 0.063 1.375 0.188 2.063h5.75c-0.063-0.688-0.063-1.313-0.063-2s0-1.313 0.063-2h-5.75c-0.125 0.625-0.188 1.25-0.188 1.938zM2.625 20c0.563 1.5 1.375 2.875 2.438 4h3.75c-0.313-1.25-0.563-2.563-0.75-4h-5.438zM7.438 26c0.813 0.563 1.75 0.938 2.688 1.25-0.25-0.375-0.438-0.813-0.625-1.25h-2.063z" />\r\n          </svg>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>'}),define("cb/lib/jquery.draggable",["jquery"],function(a){"use strict";var b="gcb-dragged",c=".gcbDrag";a.fn.draggable=function(d){function e(a){var c=j.offset();j.addClass(b).attr("unselectable","on"),m={x:a.pageX-c.left,y:a.pageY-c.top}}function f(a){j.css({left:a.pageX-m.x-i.scrollLeft(),top:a.pageY-m.y-i.scrollTop()})}function g(){k=!1,j.removeClass(b).removeAttr("unselectable"),l()}var h,i=a(document),j=this,k=!1,l=d.onDragEnd||a.noop,m={},n=d.handles||{};return h=n.mouse?j.find(n.mouse):j,h.on("mousedown"+c,function(a){k=!0,e(a)}),i.on("mousemove"+c,function(a){k&&f(a)}),i.on("mouseup"+c,g),h=n.touch?j.find(n.touch):j,h.on("touchstart",function(a){e(a.originalEvent.changedTouches[0])}),h.on("touchmove",function(a){a.preventDefault(),f(a.originalEvent.changedTouches[0])}),h.on("touchend",g),this},a.cleanUpDraggable=function(){a(document).off(c)}}),define("cb/ui/master/topmostMasterUi",["jquery","underscore","json","util","../../constants","../notify","../status","smoke","./coreMasterUi","text!./toolbar.html","cb/lib/jquery.draggable","cb/lib/jquery.service-nodes"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(k,m){function n(f){var g=c.parse(sessionStorage.getItem(e.TOOLBAR_POSITION_KEY));I=b.template(j,{text:d.supplant(m.toolbarContent,{sessionId:f}),exitTitle:m.exitBtnTitle}),I=a(I),g&&I.css({top:g.y,left:g.x}),J=I.find(".gcb-toolbar-exit"),J.on("click",p),I.cbMarkNode().appendTo(O),I.draggable({handles:{mouse:".gcb-drag-handle"},onDragEnd:t}),b.delay(function(){I&&(a(window).on("resize.gcbToolbar",t),t())},1e3)}function o(){if(L)try{h.destroy("confirm",L)}catch(a){}}function p(){if(J.hasClass("gcb-disabled"))return!1;g(null),o(),s(),k.exitSession()}function q(){J&&J.addClass("gcb-disabled")}function r(){J&&J.removeClass("gcb-disabled")}function s(){I&&(I.remove(),I=null,a.cleanUpDraggable(),a(window).off(".gcbToolbar"),sessionStorage.removeItem(e.TOOLBAR_POSITION_KEY))}function t(){var a,b,d,f,g,h,i;I&&(a=parseInt(I.css("top"),10),b=I.offset().left-N.scrollLeft(),d=I.innerWidth(),f=I.innerHeight(),g=N.width(),h=N.height(),i=d/2,a+f>h?I.css("top",h-f):a<0&&I.css("top",0),b+i>g?I.css("left",g-i):b<0&&I.css("left",0-i),sessionStorage.setItem(e.TOOLBAR_POSITION_KEY,c.stringify({x:I.css("left"),y:I.css("top")})))}function u(a){var b,c=a&&a.reason,d={};d[l.SELF]=m.youLeft,d[l.EXTERNAL]=m.agentLeft,d[l.TIMEOUT]=m.sessionTimedOut,d[l.INACTIVITY_TIMEOUT]=m.sessionInactiveTimedOut,d[l.SERVER_UNAVAILABLE]=m.serverUnavailable,d[l.SESSIONS_OVER_LIMIT]=m.sessionsOverLimit,d[l.UNKNOWN_REASON]=m.agentLeft,d[l.ERROR]=m.sessionError,b=m.agentLeft,f(d[c]||b)}function v(a){return d.supplant(m.sessionStarted,{sessionId:a})}function w(){g(m.writeModeInProgress+' <a class="gcb-appStatus-link" href="javascript:">'+m.downgradeMode+"</a>"),a(".gcb-appStatus-link").click(function(){k.downgradeMode()})}function x(a){a&&(d.log("MASTER UI: HANDLING CONTINUATION"),n(a.token),a.agents.length?a.mode.write&&(P=!0,w()):g(K||v(a.token)))}function y(a){d.log("MASTER UI: HANDLING CONNECT"),n(a.token),g(K||v(a.token)),P=!!a.mode.write}function z(a){d.log("MASTER UI: HANDLING DISCONNECTION"),s(),o(),u(a),g(null)}function A(){P?w():g(null),f(m.agentJoined)}function B(a){var b={back:m.navBack,forward:m.navForward,refresh:m.navRefresh,url:m.navUrl};d.log("MASTER UI: HANDLING NAVIGATION ",a.command,b[a.command]),q(),f(b[a.command])}function C(){r(),f(m.navFailed)}function D(a){a.write?(P=!0,w(),f(m.modeUpgraded)):a.pointer&&(P=!1,g(null),f(m.modeDowngraded))}function E(a){L=h.confirm(m.modeUpgradeRequested,a)}function F(a){K=a}function G(a){O=a}function H(){d.log("MASTER UI: INITIALIZING"),f.init(),k.onInitialized.add(x),k.onSessionStarted.add(y),k.onSessionEnded.add(z),k.onAgentJoined.add(A),k.onAgentNavigated.add(B),k.onNavigationFailed.add(C),k.onModeChanged.add(D),k.onModeUpgradeRequested.add(E),new i(k,m)}var I,J,K,L,M=this,N=a(window),O="body",P=!1;H(),b.extend(M,{setStartMessage:F,setContainer:G})}var l=e.sessionEndTriggers;return h.beforeAppend=function(a){d.log('MARKING DIALOG AS "SERVICE"',a),d.markServiceNode(a)},k}),define("cb/ui/master/childMasterUi",["util","./coreMasterUi"],function(a,b){"use strict";function c(c,d){return a.log("CHILD MASTER UI: INITIALIZING ",c,d),new b(c,d)}return c}),define("nls",{agentJoined:"Representative has joined the session",youLeft:"You have left the session. Co-browse is now terminated.",sessionTimedOut:"Session timed out. Co-browse is now terminated.",sessionInactiveTimedOut:"Session timed out. Co-browse is now terminated.",agentLeft:"Representative has left the session. Co-browse is now terminated.",sessionError:"Unexpected error occurred. Co-browse is now terminated.",sessionsOverLimit:"Representative is currently busy with another Co-browse session. Co-browse is now terminated.",serverUnavailable:"Could not reach Co-browse server. Co-browse is now terminated.",sessionStarted:"Your Co-browse session ID is {sessionId}. Please spell it to our representative to continue with co-browsing.",navRefresh:"Representative has refreshed the page. Reloading.",navBack:'Representative has pressed the "Back" button. Reloading page.',navForward:'Representative has pressed the "Forward" button. Reloading page.',navUrl:"Representative has requested navigation. Reloading page.",navFailed:"Navigation request by representative has failed.",toolbarContent:"Session ID: {sessionId}",contentMasked:"Content is hidden from representative",contentMaskedPartially:"Some content is hidden from representative",exitBtnTitle:"Exit Co-browse session",areYouOnPhone:"Are you on the phone with our representative?",areYouOnPhoneOrChat:"Are you on the phone or chat with our representative?",connectBeforeCobrowse:"You need to be connected with our representative to continue with co-browsing. Please call us or start a live chat with us, and then start Co-browse again.",browserUnsupported:'Unfortunately, your browser is not currently supported.<br><br> Supported browsers are: <ul><li><a target="_blank" href="http://www.google.com/chrome">Google Chrome</a></li><li><a target="_blank" href="http://www.firefox.com/">Mozilla Firefox</a></li><li><a target="_blank" href="http://microsoft.com/ie">Internet Explorer 9 and above</a></li><li><a target="_blank" href="https://www.apple.com/safari">Safari 6 and above</a></li></ul>',sessionStartedAutoConnect:"Co-browse session started. Waiting for representative to connect to the session...",chatIsAlreadyRunning:"Chat is already running on another page.",modalTitle:"Co-browse",modalYes:"Yes",modalNo:"No",writeModeInProgress:"Agent has control over the page.",downgradeMode:"Revoke control",modeUpgraded:"Co-browse session was upgraded. Agent has control over the page.",modeDowngraded:"Co-browse session was downgraded. Agent has no control",modeUpgradeRequested:'Agent requests upgrading Co-browse session to "write" mode. In "write" mode agent will have control over the page.'}),define("cb/integrationEntryPoint",["jquery","util","cb/app/master/masterApi","cb/app/master/topmostMasterApp","cb/app/master/childMasterApp","cb/ui/master/topmostMasterUi","cb/ui/master/childMasterUi","nls"],function(a,b,c,d,e,f,g,h){"use strict";return{initTopmostApp:function(a,b){return b("cobrowse entry point: initializing topmost application"),new c.CobrowseApi(new d(a,b))},initChildApp:function(d,f){var i,j=a.Deferred();return f("cobrowse entry point: initializing child application"),i=new e(d,f),i.done(function(e){var i,k=new c.ChildCobrowseApi(e);d.localization&&(i=b.fetchLocalization(d.localization,h)),a.when(i).done(function(){f("child context: localization loaded",arguments),d.disableBuiltInUI||(f("child context: initializing ui"),new g(k,h))}),j.resolve(k)}),j.promise()}}}),function(){"function"!=typeof define||define.amd;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("dependencies/validate-arguments",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("validate-arguments",["require","exports","module","lodash"],a)}}).call(this,function(a,b,c){function d(a){return f.reduce(a,function(a,b,c){return b.isa||(j.isPlainObject(b)&&(b=d(b)),b={isa:b}),a[c]=b,a},{})}function e(a,b,c,d){return f.isEmpty(b)?"missing "+a+" argument "+c:a+" argument "+c+' is not a "'+d+'"'}var f=a("lodash"),g=function(a,b,c){var d=[],e=a.length;if(0===e)return d;var f=b<0?Math.max(0,b+e):b||0;for(void 0!==c&&(e=c<0?c+e:c);e-- >f;)d[e-f]=a[e];return d},h=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},i=["isArray","isBoolean","isDate","isElement","isEmpty","isFinite","isFunction","isNull","isNumber","isObject","isRegexp","isString"],j={isWhole:function(a){return f.isNumber(a)&&a%1==0},isReal:function(a){return f.isNumber(a)&&!isNaN(a)},isNatural:function(a){return j.isWhole(a)&&0<=a},isPlainObject:function(a){return f.isObject(a)&&!f.isArray(a)&&!f.isFunction(a)},isPrimitive:function(a){return-1!==f.indexOf(["number","boolean","string"],a)}};f.each(i,function(a){j[a]=f[a]});var k=function(a,b,c){return{isValid:function(){return 0===a.length},errors:function(){return a},get:function(a){return b?b[a]:null},values:function(){return f.isObject(b)?f.values(b):f.isArray(b)?b:[]},errorString:function(){var d=f.isObject(b)?"named":"positional";return f.isEmpty(c)?a[0]:f.map(a,function(a){return e(d,b[a],a,c[a].isa)}).join(", ")}}},l={isValidOfType:function(a,b){var c="is"+h(b);return void 0!==j[c]&&j[c](a)},isValid:function(a,b){return f.isUndefined(a)||f.isNull(a)?b.optional:f.isString(b.isa)?l.isValidOfType(a,b.isa):j.isPlainObject(b.isa)?l.validate(a,b.isa).isValid():"function"==typeof b.isa&&a instanceof b.isa},validatePositional:function(a,b){return l.positional(a,b)},validateObject:function(a,b){return l.named(a,b)},validate:function(a,b){var c=[];return f.isEmpty(b)?k(["missing validation spec"]):!a instanceof Object?k(["invalid values"]):j.isPrimitive(b)?l.positional(a,[b]):(b=d(b),c=f.reduce(b,function(b,c,d){return l.isValid(a[d],c)||b.push(d),b},[]),k(c,a,b))},named:function(a,b){return j.isPlainObject(a)?(f.isArguments(a)&&(a=a[0]),l.validate(a,b)):k(["missing named arguments"])},positional:function(a,b){return f.isArray(a)||f.isArguments(a)?(f.isArray(b)||(b=g(arguments,1)),l.validate(a,b)):k(["missing positional arguments"])}};return c.exports=l,c.exports})}.call(this),define("chat/cookieWrapper",["jquery","jquery.cookie"],function(a){"use strict";return a}),function(){"function"!=typeof define||define.amd;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("util",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/util",["require","exports","module","validate-arguments","URIjs","lodash","./cookie","simply-deferred"],a)}}).call(this,function(a,b,c){var d=a("validate-arguments"),e=a("simply-deferred").Deferred,f=a("URIjs"),g=a("lodash"),h=a("./cookie"),i={STATE_COOKIE_NAME:"gcState",COMETD_COOKIE_NAME:"gcCometdState",TRANSIENT_COOKIE_NAME:"gcCurrentSession",REMOTE_SESSION_CHECK_INTERVAL:200};return function(){"use strict";function a(a){throw new TypeError("Genesys Chat: "+a)}function b(a){var b=a.promise();return{done:b.done,fail:b.fail}}function j(b,c){var e=d.validate(b,c);e.isValid()||a(e.errorString())}function k(a){return a=a||{},{error:{code:a.code||0,description:a.description}}}function l(a,b){return function(c){b("transport failed ",c),a.reject(k(c&&c.error))}}function m(a){var b=document.createElement("a");return b.setAttribute("href",a),b}function n(a){return setTimeout(a,0)}function o(a,b){return a.replace(/\{([^{}]*)\}/g,function(a,c){var d=b[c];return"string"==typeof d||"number"==typeof d?d:a})}function p(){return f&&new f(document.location.href).domain()}function q(a,b,c){return void 0!==b?void h.cookie(a,b,g.extend({},c,{domain:p(),path:"/"})):h.cookie(a,b,c)}function r(a){return a=a.replace(/[\x00-\x08]/g,"")}c.exports={defer:n,throwError:a,getSimplePromise:b,validateObject:j,createErrorEvent:k,createTransportFailureResolver:l,simpleParseUrl:m,noop:function(){},Deferred:e,cookie:h.cookie,rootCookie:q,supplant:o,getCookieDomain:p,constants:i,filterInput:r}}(),c.exports})}.call(this),function(){"function"!=typeof define||define.amd;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("ui/templates",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/ui/templates",["require","exports","module","lodash"],a)}}).call(this,function(a,b,c){var d=a("lodash");return b["src/ui/templates/chatMessage.html"]=function(a){var b,c="",e=d.escape;Array.prototype.join;return c+='<div class="gwc-chat-message',a.isAgent&&(c+=" gwc-chat-agentMessage"),a.from||(c+=" gwc-chat-systemMessage"),c+='">\r\n  ',a.from&&(c+='\r\n  <div class="gwc-chat-message-author">'+e(a.from)+'</div>\r\n  <div class="gwc-chat-message-time">['+(null==(b=a.when)?"":b)+"]</div>\r\n  "),c+='\r\n  <div class="gwc-chat-message-text">\r\n    ',a.isUrl&&(c+='<a href="'+(null==(b=a.url)?"":b)+'" target="_blank">'),c+="\r\n    "+(null==(b=a.message)?"":b)+"\r\n    ",a.isUrl&&(c+="</a>"),c+="\r\n  </div>\r\n</div>"},b["src/ui/templates/chatRegistration.html"]=function(a){var b,c="";d.escape;return c+='<div>\r\n  <div class="gwc-chat-branding"><div class="gwc-chat-logo"></div></div>\r\n  <div class="gwc-chat-content-area">\r\n    <div class="gwc-chat-registration-intro">\r\n      <p class="gwc-chat-registration-intro-p">\r\n        '+(null==(b=a.nls.regWelcomePart1)?"":b)+'</p>\r\n      <p class="gwc-chat-registration-intro-p">\r\n        '+(null==(b=a.nls.regWelcomePart2)?"":b)+'</p>\r\n    </div>\r\n    <form>\r\n      <div class="gwc-chat-controls-container">\r\n        <div class="gwc-chat-control-group gwc-chat-control-group-required">\r\n          <label for="gcbChatFirstName"\r\n                 class="gwc-chat-label">\r\n            *'+(null==(b=a.nls.regFirstName)?"":b)+'\r\n          </label>\r\n          <div class="gwc-chat-controls">\r\n            <input id="gcbChatFirstName" name="FirstName"\r\n                   class="gwc-chat-registration-input"\r\n                   type="text"/>\r\n            <div class="gwc-chat-validation-error"></div>\r\n          </div>\r\n        </div>\r\n        <div class="gwc-chat-control-group">\r\n          <label for="gcbChatLastName" class="gwc-chat-label">\r\n            '+(null==(b=a.nls.regLastName)?"":b)+'\r\n          </label>\r\n          <div class="gwc-chat-controls">\r\n            <input id="gcbChatLastName" name="LastName"\r\n                   class="gwc-chat-registration-input"\r\n                   type="text"/>\r\n            <div class="gwc-chat-validation-error"></div>\r\n          </div>\r\n        </div>\r\n        <div class="gwc-chat-control-group gwc-chat-control-group-required">\r\n          <label for="gcbChatEmail" class="gwc-chat-label">\r\n            *'+(null==(b=a.nls.regEmail)?"":b)+'\r\n          </label>\r\n          <div class="gwc-chat-controls">\r\n            <input id="gcbChatEmail" name="EmailAddress"\r\n                   class="gwc-chat-registration-input"\r\n                   type="email"/>\r\n            <div class="gwc-chat-validation-error"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="gwc-chat-registration-buttons">\r\n        <div class="gwc-chat-registration-skip">\r\n          <button class="gwc-chat-button gwc-chat-button-light" id="gcbChatSkipRegistration" type="button">\r\n            '+(null==(b=a.nls.regSkip)?"":b)+'\r\n          </button>\r\n        </div>\r\n        <div class="gwc-chat-registration-submit">\r\n          <button class="gwc-chat-button" id="gcbChatRegister" type="submit">\r\n            '+(null==(b=a.nls.regSubmit)?"":b)+"\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</div>"},b["src/ui/templates/chatTemplates.html"]=function(a){var b,c="";d.escape;return c+='\x3c!-- embeddedWindow.html --\x3e\r\n<script type="text/html" data-gwc-template="embeddedWindow">\r\n'+(null==(b=embeddedWindowTemplate)?"":b)+'\r\n<\/script>\r\n\r\n\x3c!-- chatRegistration.html --\x3e\r\n<script type="text/html" data-gwc-template="chatRegistration">\r\n'+(null==(b=chatRegistrationTemplate)?"":b)+'\r\n<\/script>\r\n\r\n\x3c!-- chatView.html --\x3e\r\n<script type="text/html" data-gwc-template="chatView">\r\n'+(null==(b=chatViewTemplate)?"":b)+'\r\n<\/script>\r\n\r\n\x3c!-- chatMessage.html --\x3e\r\n<script type="text/html" data-gwc-template="chatMessage">\r\n'+(null==(b=chatMessageTemplate)?"":b)+'\r\n<\/script>\r\n\r\n\x3c!-- chatTyping.html --\x3e\r\n<script type="text/html" data-gwc-template="chatTyping">\r\n'+(null==(b=chatTypingTemplate)?"":b)+"\r\n<\/script>"},b["src/ui/templates/chatTyping.html"]=function(a){var b,c="";d.escape;return c+='<div class="gwc-chat-message gwc-chat-typingMessage">\r\n  <div class="gwc-chat-message-text">'+(null==(b=a.message)?"":b)+"</div>\r\n</div>"},b["src/ui/templates/chatView.html"]=function(a){var b,c="";d.escape;return c+='<div>\r\n  <div class="gwc-chat-branding"><div class="gwc-chat-logo"></div></div>\r\n  <div class="gwc-chat-content-area">\r\n    <div class="gwc-chat-message-container">\r\n      <div class="gwc-persistent-chat-messages"></div>\r\n    </div>\r\n    <form class="gwc-chat-message-form" action="javascript:">\r\n      <textarea class="gwc-chat-input gwc-chat-message-input" maxlength="500">'+(null==(b=a.message)?"":b)+"</textarea>\r\n    </form>\r\n  </div>\r\n</div>\r\n"},b["src/ui/templates/embeddedWindow.html"]=function(a){var b,c="";d.escape;return c+='<div class="gwc-chat-embedded-window">\r\n  <div class="gwc-chat">\r\n    <div class="gwc-chat-head gwc-drag-handle">\r\n      <div class="gwc-chat-window-controls">\r\n        <div class="gwc-chat-control gwc-chat-control-minimize">\r\n          <div class="gwc-chat-icon gwc-chat-icon-minimize"></div>\r\n        </div>\r\n        <div class="gwc-chat-control gwc-chat-control-close">\r\n          <div class="gwc-chat-icon gwc-chat-icon-close"></div>\r\n        </div>\r\n      </div>\r\n      <div class="gwc-chat-title">'+(null==(b=a.chatTitle)?"":b)+'</div>\r\n    </div>\r\n    <div class="gwc-chat-body">\r\n\r\n    </div>\r\n  </div>\r\n</div>'},c.exports})}.call(this),function(){"function"!=typeof define||define.amd;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("ui/templatesProvider",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/ui/templatesProvider",["require","exports","module","jquery","lodash","./templates"],a)}}).call(this,function(a,b,c){function d(){"use strict";function b(a,b,c){f.ajax({dataType:b?"jsonp":"",url:a}).done(function(a){l("templates data: ",a),c(a)}).fail(function(){throw new Error("failed to load tempates",arguments)})}function c(a){return/^\S*\/(\S*)\.(\S*)$/g.exec(a)[1]}function d(a){return g.template(a,null,{variable:"data"})}function i(){var b={},e=a("./templates");return g.forEach(e,function(a,e){var g,h=c(e);g=f('script[data-gwc-template="'+h+'"]').html(),g?(l('template "'+h+'" is found on the page'),b[h]=d(g)):b[h]=a}),b}function j(a,b){a&&f.isFunction(a)&&a(b)}function k(a,c,e){b(a,c,function(a){var b={};a&&(f(a).filter("script[data-gwc-template]").each(function(){var a=f(this),c=a.attr("data-gwc-template"),e=a.html();c&&e&&(b[c]=d(e))}),l("following templates were found in loaded file: ",b),l("these templates will take highest priority")),e(b)})}var l=f.noop;this.getTemplates=function(a,b,c){var d=a.templates;l=a.logger||f.noop,e||(e=i()),d?(l("templates to be loaded from "+d),h[d]?(l("returning templates from cache "+d),j(c,f.extend({},e,h[d]))):k(d,b,function(a){h[d]=a,j(c,f.extend({},e,h[d]))})):j(c,e)}}var e,f=a("jquery"),g=a("lodash"),h={};return c.exports=new d,c.exports})}.call(this),function(){"function"!=typeof define||define.amd;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("simpleEvent",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/simpleEvent",["require","exports","module","lodash"],a)}}).call(this,function(a,b,c){function d(){"use strict";var a=[];this.add=function(b){a.push(b)},this.fire=function(b){e.each(a,function(a){a(b)})},this.remove=function(b){a=e.without(a,b)}}var e=a("lodash");return c.exports=d,c.exports})}.call(this),function(){"function"!=typeof define||define.amd;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("css/chat.min.css",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/css/chat.min.css",["require","exports","module"],a)}}).call(this,function(a,b,c){var d=".gwc-chat-embedded-window{position:fixed;right:20px;bottom:0;z-index:9999999999;width:300px;border:1px solid #e3b33b;color:#000;background:#f9f9f9}.gwc-chat,.gwc-chat button,.gwc-chat div,.gwc-chat input,.gwc-chat textarea{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font:normal normal normal 12px/1.3 Tahoma,sans-serif;text-align:left}.gwc-chat-button{padding:4px 8px;-webkit-border-radius:3px;border-radius:3px;background-clip:padding-box;border:1px solid #cacaca;color:#fff;font-weight:700!important;cursor:pointer;background-color:#5da1bc;background-image:-webkit-gradient(linear,left top,left bottom,from(#66b1cf),to(#5da1bc));background-image:-webkit-linear-gradient(top,#66b1cf,#5da1bc);background-image:-moz-linear-gradient(top,#66b1cf,#5da1bc);background-image:-o-linear-gradient(top,#66b1cf,#5da1bc);background-image:linear-gradient(to bottom,#66b1cf,#5da1bc)}.gwc-chat-button:hover{background:#66b1cf}.gwc-chat-button:active{background-color:#5da1bc;background-image:-webkit-gradient(linear,left top,left bottom,from(#5da1bc),to(#66b1cf));background-image:-webkit-linear-gradient(top,#5da1bc,#66b1cf);background-image:-moz-linear-gradient(top,#5da1bc,#66b1cf);background-image:-o-linear-gradient(top,#5da1bc,#66b1cf);background-image:linear-gradient(to bottom,#5da1bc,#66b1cf);background-clip:padding-box}.gwc-chat-button-light{color:#4A5965;font-weight:400!important;background-color:#f4f4f4;background-image:-webkit-gradient(linear,left top,left bottom,from(#f4f4f4),to(#edefef));background-image:-webkit-linear-gradient(top,#f4f4f4,#edefef);background-image:-moz-linear-gradient(top,#f4f4f4,#edefef);background-image:-o-linear-gradient(top,#f4f4f4,#edefef);background-image:linear-gradient(to bottom,#f4f4f4,#edefef)}.gwc-chat-button-light:hover{background-color:#fff;background-image:-webkit-gradient(linear,left top,left bottom,from(#fff),to(#f7f7f7));background-image:-webkit-linear-gradient(top,#fff,#f7f7f7);background-image:-moz-linear-gradient(top,#fff,#f7f7f7);background-image:-o-linear-gradient(top,#fff,#f7f7f7);background-image:linear-gradient(to bottom,#fff,#f7f7f7)}.gwc-chat-button-light:active{background-color:#eaeaea;background-image:-webkit-gradient(linear,left top,left bottom,from(#eaeaea),to(#fff));background-image:-webkit-linear-gradient(top,#eaeaea,#fff);background-image:-moz-linear-gradient(top,#eaeaea,#fff);background-image:-o-linear-gradient(top,#eaeaea,#fff);background-image:linear-gradient(to bottom,#eaeaea,#fff)}.gwc-chat-input{width:100%;border:1px solid #a5acb2;background:#fff;height:20px}.gwc-chat-head{padding:3px 7px 3px 10px;background:#e3b33b;cursor:default}.gwc-chat-head .gwc-chat-title{display:inline;font-weight:700;color:#fff}.gwc-chat-window-controls{float:right}.gwc-chat-control{display:inline-block;width:19px;height:19px;cursor:pointer;border:1px solid transparent;border-radius:2px;-webkit-transition:all .15s ease-out;-moz-transition:all .15s ease-out;-o-transition:all .15s ease-out;transition:all .15s ease-out}.gwc-chat-control:hover{border-color:#88919D}.gwc-chat-control:active{border-color:#88919D;background:#96A2B0}.gwc-chat-icon{display:inline-block;width:16px;height:16px}.gwc-chat-icon-close{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAoklEQVR4Aa3PsWoCURAF0G2zsi/gH0UxbUJM8jOR2KxVUiio+IUilmo9R1gWptDSO9XAgZlbPSZqY1NN7t6M1AnGDkJr2G3FDAeTBB/grNWozZzAd4KBuTPC1r8QHS5VxrM5Qjd5LlMZWAFYa+41+RMCYXMDFD/04PZEfm5nCS5aTYL3/vOFko18JXixFxaGfaNfHL0meDLyqWQjUxN19ZBcAT16vTh64lq3AAAAAElFTkSuQmCC)}.gwc-chat-icon-minimize{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQAAAAA3iMLMAAAAAnRSTlMAAHaTzTgAAAAPSURBVHgBYyAG2P9hgjEBDM8BPtXRQkEAAAAASUVORK5CYII=)}.gwc-chat-body{height:316px}.gwc-chat-branding{height:36px;padding:8px 10px}.gwc-chat-logo{width:100px;height:25px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAZCAMAAADwgHt5AAAA21BMVEUAAAAiHh8iHh8iHh8iHh8iHh8iHh9fIiAiHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh/uLiTuLiQiHh8iHh8iHh8iHh/uLiQiHh8iHh/uLiQiHh8iHh8iHh8iHh8iHh8iHh/uLiTuLiQiHh/uLiQiHh/uLiTuLiTuLiTuLiQiHh8iHh8iHh8iHh8iHh/uLiTuLiTuLiTuLiTuLiQiHh/uLiTuLiTuLiTuLiQiHh8iHh/uLiTuLiTuLiTuLiTuLiTuLiTuLiQiHh/uLiTuLiTuLiTuLiTuLiQiHh/uLiQn2tRqAAAAR3RSTlMASiFCG/paAQUSkW3xwgowS9UkdGKejcznBZiKpd6DeuA3r1M2PkQPKzq81ynrCiOWHXMN7TFYe7ZRx6zAZ2y0FVSh9mAZhILhxlwAAAN1SURBVEjHtZXZmqJADIXDWoAbuICtCCq477ttq6093RPe/4kmwW+G+ea2x/+GsqrMSU6CAjO/De3rYb1e7zuDuYBncLOXp2W0e6FlJ3LXC3gCnXPbhoz5F/x/dokLT+fNEfB0nDcghrbdJ+x9tIK/iXPE6wa+yWm7A/saRZFNRJ9r181kzOYMmbEB3+MzcfqL3jybA9exf2t0EQuVagO14rebkmyXdibSGx5+9IAxAtRyKj2l0Xfbdhn8TJLEeV+610/XfXN+XMTpfQBEGdESkCHVPD9H7Sk2R6ZVOFZTD9XwWGjG6XGj0KiWJV8CwmgG6qZyHAeSIUsC2n2xc5OMbQeWyZDv5bBeyiTMroZEPQYTZwUkLBKUuGlUMECYHgd37JqsiHWzkB6px7xCbl3h5dY5LM+O4ywP/ZsYttsLFrFwnBVStHCmq/EEvaKJ2FLUJmIJYg39skxLBVrYnSq+NM0jl9JAq4SYUys1MzzKsCOv9oOXjP02OQgO66MFhBIEgU7e5RXaLddxRJVQhapH0bpYM9J0LLWFVVoJYWEowNQwVrBV5h3DEDDsbcmk94u9+PpaRZcP+vCxemGR7kMk5BkWVWzpd10neyQT6yrt+1gx8tjkTYvqa1DiJim+cmy6DbKG3siElPfVwN0mGT+c/ern8GFXAYhS1U9FMK8R+bzCIqkjOXILtXTXN4tjRAw3YI7xDmPMPfo1UQwgzu0hiOjj1Gac86ED4truPBrfUoGppiKFjcyUi5nIVMPXx6ZKse7U6aaACvryDPmGGdQR2WSIkuTQ4ddkMBjw49ZbJqdbWgKSX4xOIjpOTHjwR6RSzKMOGRR/NoXSTKv9/o2QPaxtgLhwS9b7fmcx7PUv7pkGgQtJO69VqHcq+zalLA0SoPIzEahhi6dckSmlmGIijavwEXnCigp91+KJZuy3JKX9aI3jLoBJBwi9ZpNcGLN56IfhGEf8nlBQEqgIuY71IGxgwwBvZtHpZMOFo2ayEV4Y5Gk6IOWlv/44pQrO2d0v4A+ypSGRryncohYSxymJTLgSC3MCRl0kWlVD1JDwFM5twqJQmiBRU7Nw89WuRyz+/Vsc6TShcRGY6V2/KybJKTFnV5ZUwf7RhakAwYtXGQjDwxG7XZZ0XSnCc9BxpsJTEVVyKWfAUzFqONMNeC4iLm0E/MMv4YOQ3X4CtuYAAAAASUVORK5CYII=)no-repeat}.gwc-chat-content-area{padding:10px}.gwc-chat-registration-intro{margin:0 0 24px}.gwc-chat-registration-intro-p{font-size:1em;margin:0 0 10px}.gwc-chat-controls-container{display:table;width:100%;table-layout:fixed}.gwc-chat-control-group{display:table-row;height:2.3em}.gwc-chat-controls,.gwc-chat-label{display:table-cell}.gwc-chat-controls{width:100%}.gwc-chat-label{width:6.4em;font-size:1em}.gwc-chat-label-invalid{color:#b8400b}.gwc-chat-validation-error{color:#b8400b;margin-bottom:.3em;display:none}.gwc-chat-registration-input{width:100%}.gwc-chat input.gwc-chat-registration-input{font-size:inherit;padding:0 1px}.gwc-chat-registration-skip,.gwc-chat-registration-submit{float:right;margin:5px 0 0 3px}.gwc-chat-message-container{position:absolute;top:63px;left:10px;right:10px;bottom:93px;padding:2px 10px;overflow:auto;border:1px solid #a5acb2;background:#fff}.gwc-chat-message{margin:0 0 3px}.gwc-chat-message-author,.gwc-chat-message-time{display:inline;color:#385078}.gwc-chat-agentMessage .gwc-chat-message-author,.gwc-chat-agentMessage .gwc-chat-message-time{color:#d88000}.gwc-chat-message-form{position:absolute;margin:0;left:10px;right:10px;bottom:12px}.gwc-chat-message-input{width:100%;height:70px;margin:0;padding:2px;resize:none;background:#fff!important;border:1px solid #a5acb2!important;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.gwc-chat-typingMessage .gwc-chat-message-text{color:#88919D}.gwc-chat-message-text{word-wrap:break-word;overflow-wrap:break-word}@media only screen and (max-height:340px){.gwc-chat-embedded-window{position:absolute;top:0;bottom:auto}}@media only screen and (max-device-width:360px){.gwc-chat-embedded-window{width:99%;right:.5%}.gwc-chat,.gwc-chat button,.gwc-chat div,.gwc-chat input,.gwc-chat textarea{font-size:16px}.gwc-chat-message-input:focus,.gwc-chat-registration-input:focus{background:#eee}}@media screen and (-webkit-min-device-pixel-ratio:1.5),screen and (-moz-min-device-pixel-ratio:1.5),screen and (min-device-pixel-ratio:1.5){.gwc-chat-logo{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAAwCAMAAABjR8XYAAAAb1BMVEUAAAAwLC0hHR5KR0csKCmJXFk3NTV/f39/d3dyX141MTIdGBpUU1McGBlDPz/WOzHsLCDiMiccGBmrWlXNQjjASEDgNStFQ0MmICElISLpLCDvLCC2UkvvLCAiHiAfGxwbFhfiMSbqLyPfMSbyKx8Wr4MAAAAAHnRSTlMAccU2iBhaAQMLZNgj9kt3zo3nKmJOpnyfr6/yPONbnN1dAAAIn0lEQVRo3t1Z2daTMBAOaxJ2yiKUVijl/Z/RWdIEi6jneKF1/G1hmCTzZdZQwaQUfjZlX1XV1VBf110kPoqkBCi3GjDU3a2JtALSUXPr2rL8JCwKbFFPW99G8v2Rbtq6Ex9CUkT9NpURu5iS8mUmuEbWp5hEim7aSi0EQzh63YeQEuU23eD7VONPgdJtUwNwPp6a+9r+DzhE/ZiifSBIjHdz8asAYSEg9Q+4X/Wo1CGypXrxfqqj+peywvNR7TTRDRTB2lDZ3vRPVER2FofjOA5hocXfpgpcC3TCv6grQfnuBsUdqLm15bW6ls0JFClU7C/LV6IlD/82lP6x1kJJarTK27s2UXudrjeCecAR+PNXR/Ml+LuJupueawnu3tUd+RERPnjFcNNv10bIA45iIf2XPE3JLvNfBiLq9bn2kYjkj1yIQN22rT0oGROO9Euglc7icfka/mUcUleP53pv1SFFcb9FDlZtJavp/IqM4AKjSN8N4u5+yZbyl3K/nkqBmuvzsVZtYysDk6knTQMi962z40jIRxwxdTasiDxugHSFiCdjp1VH0X2jxwMti0YeyhxN5VYwg6Pr9ng+tu1a3iL13sX3Ww9gu/Wu91uRzIDDszq94SA1tKLLA1tarn2utb10cr82xvcr1HCrymkFKOu6TpBvy7btuq6FelLdt3V9ABCpqnUfJmQQX8mzRbJkTNPUx/LCegdhmEkReT6wx1gRl2V1EaLoEEdWJ5BGOWJpLww9tUsx4ZcwwGExreAFGtlZJgTEsaLUBFZ5Ph+PdUPizweythIF+rV/i5C5EPIEh5cvnJLntGD3/bLMgyguJtH5mR1apPNsKpH32ujBsgat/HleduHnL3grgnS3ggKwiXhuN/KQqKxg+1F1R2ikrSYjX9dqF1YerHQ5M74eZ1qC1FkgmSGQ+Wue5MBlHX1tMIeLE51HTW6/G55qEcMXzsHyGcj7gMMNmxOReWEcYmW/cXSpW9nfyQ5McDn1ZcMJYdoBkWKEeYYTg5Ai8+jFcXjhSJJoEdriIYk9f2Em4UAB34sTz8erQUqsT8zzhmUGBDrHPeO1FA5YErALzhbCCumcQ+UIvSQU5frYWtsmKmhM6rqndyhl1+hXWukxVCzpFJRKHBBlSLyUSwOWww3PM7QIaZeRMAloSTWV5iHy8DpGXdk2QMEYkO6YHqVdGDTPUJad1htQ0PMCoa/rc6turM6xIJJ6uoeiafMvBO2FJnLSb+FzgRggYKRFaICMiqeLchiNUaJhmq8xi0pyVx8e+wjIZFllJvRfk5MnECtVRsTmr+iOubfv2EGJwMCSLjmft3coNJVDyaoE9jbzvhAlZBByW2UooyURCCJXxjFnuiH3H6yo8gmfGNBrKGy5RDDfetZcwIJsaCeDf1I0UBCf61bVr5ZRItkTZFlhar5HYgdkISDSGmEGWuZcCtrlVDjyaUkAYv1DSvQtwEoqZ07UYy1j1DJAuVfNWqhkIZIL5xiVwshRf1+lyHO2B2YojO2uedVEHTUdlJKNKkwV7d3HWYSBmC44NY6Qxo58ktwDYSdKGHPuOVHE5UF0pxTJmavXOaUvnhzjXyJYXEbvz3ZXVBycB6BQSdzuFdN92uCWEZZQ2xuHX38fI8GS5znMfJG2J8YPvjgHki1vkkC481lOxWZAq3D64KLFF+AINm2n3s4qfBrRZWWKyMORwXavI3DkthKWyG2/2CmU1rogIIr2CrzMERSw7IdA2JDz96Ix6pv5M0EbqW6ylQdAqC+unUhy2qNL4k6I2KKjf93qCk1A+hMgtg9lAQjXeossDqojvgXCViEg5NB+nOwpVvIUyMVLviOIRJQqGEoesE18Srpgbdw+Zdw7ZCijtm9R6FylqIi0dV9NG9NU9XVLlQSTV7ftgJAq+e7li2StjPcO4o3UKZBUnnSEBdRNztLcos4wYGDGSyby8q+7wnybHnACdC9OVNQ0Nzq2S75Hviq3x125hTJTsvflw8VIqqSSOzoBwvVEfS/qoMToXQMCoajx2bMcWlAnA1O59NluUEbqhpT+ce8ftZCguft1WZUz+ZtFQJZSvJS/tohEjzHMY4uuyA7cnEi2RbBQhWIZhqJTznS8SE1lpG/ZdWwppKcUO5jS1quS7wd2X78ypJJsEYLItdzMdQoEyxtHmjycaFhOc9mTr7wbUqS8pKXxcUrIhgN+A7G9TdcauytHGgrJddowBW+1Uc21jahFZs0YY9bCqQsMwYLObpRDzoFwywTNuxFVZolM0WhlgXAFzHMXDzqjURysoeudblC8KU9xiJdAdU9hDzxMwVP7dtaT2G5hPctMk0IFkTob8tvYbEWSgiZnriVCBO1pk/fSwuQoP+AMy3087zzXGiMhityLXk3k7O08XLVYwW3SZSIQaKp7aS26j26aOveHcPBzzpacCC7I978URQFd9tdQyTOLSO0T/hBEPR+15kSCXXxRDAs5qbTnEBJgPUJ4jRbCoPSV2ZxPqq6f1m13sCIMwJmuHZfPA5L0u5oMUxdcvzJ6sADNZh08WO2BADuhG+1TUXyJmvLNLPy6RNJlFxd73BOYQd7hvUCEB6tpw3Mi/FvBze7XsotOX9doLklMS+pFthUboLQzuMUPlImRxQIJZ/IHcgUvN6JYRzV51AUZzEFPsFZ0iTYbwcAskicHZ5GminRtidS+2kepTl9kRMmQwm6Ce3mor0s/Qehf8guymQOMMLR9P98Y6cwb0zz3xzB4raNjHh0WbkrKIT7e2VF+nqejd3B6073/gnWErqIo0tLeugdaa2m550RzsKjdfWY5Ds6Cdcpz9/hfa4Vfp9opRenw937mccMOGN232xF3cy6KuffAEfHMqfg46g/p10Y7Yf+m6BtUTCCjkB/6g7MlHdMB6GN+X/4xKQh9esH02b/YSqHzr+bc8eGkUzqfiw8nCUBSqDq/jI9vlGj6xCT1poAAAAAASUVORK5CYII=);background-size:contain}}",e=document.getElementsByTagName("head")[0],f=document.createElement("style");if(f.setAttribute("data-gcb-service-node",!0),e.insertBefore(f,e.childNodes[0]),f.styleSheet)f.styleSheet.disabled||(f.styleSheet.cssText=d);else try{f.innerHTML=d}catch(a){f.innerText=d}return c.exports})}.call(this),function(){"function"!=typeof define||define.amd;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("ui/chatInitializer",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/ui/chatInitializer",["require","exports","module","../util","lodash","jquery","./templatesProvider","../simpleEvent","../css/chat.min.css"],a)}}).call(this,function(a,b,c){function d(a){"use strict";return g.reduce(a,function(a,b,c){return a+c+"="+b+","},"").slice(0,-1)}function e(b,c,e,l){"use strict";function m(a){a.debug&&(x=g.isFunction(a.logger)?a.logger:k())}function n(){a("../css/chat.min.css")}function o(a,b,c){l.ajax({dataType:"json"+(b?"p":""),url:a}).done(function(a){x("loaded language data: ",a),c(a)}).fail(function(){throw x("getting language data failed ",arguments),new Error("getting language data failed")})}function p(a){a.onStarted(B.fire),a.onEnded(C.fire),a.onRemoteSession(z.fire),a.onMinimized(D.fire)}function q(a,b){var c=l.Deferred();return E.fire(a),a.debug&&(a.logger=x,delete a.debug),i.getTemplates(a,b,function(d){a.templatesData=d,x("templates: ",d),g.isString(a.localization)?(x("loading language data from ",a.localization),o(a.localization,b,function(b){a.langData=b,delete a.localization,x("localization has been loaded: ",b),c.resolve(a)})):g.isFunction(a.localization)?0===a.localization.length?(a.langData=a.localization(),delete a.localization,x("l18n provided via sync function: ",a.localization),c.resolve(a)):(x("l18n is a custom async function, waiting for callback..."),a.localization(function(b){x("l18n provided: ",b),a.langData=b,delete a.localization,c.resolve(a)})):g.isObject(a.localization)?(a.langData=a.localization,delete a.localization,c.resolve(a)):c.resolve(a)}),c.promise()}function r(a){return w||(w=new c(a),p(w),w)}function s(a){a=a||{};var c,i,j,k=a.widgetUrl,l=a.windowSize||{width:400,height:500};return v=h.Deferred(),m(a),x("chat is initializing with options: ",a),(i=e.getTransientSessionAPI(a))&&!i.isImmediate?(x("widget is opened on another page"),v.reject(f.createErrorEvent({code:201,description:"Chat is already running on another page"})),v.promise()):(a.embedded?(x('initializing chat widget in "embedded" mode'),n(),w=r(e),q(a,!0).done(function(a){w.startChat(a).done(function(a){v.resolve(a),A.fire(a)}).fail(v.reject)})):(delete a.widgetUrl,delete a.embedded,delete a.onBeforeStartSession,delete a.logger,delete a.transport,!1!==a.ui&&delete a.ui,j=b.toUrl(a),c=d(g.extend(l,a.windowOptions)),x("opening new window with features: ",c),window.open(k+(f.simpleParseUrl(k).search?"&":"?")+j,a.windowName||"genesysChatWindow",c)),v.promise())}function t(a){return a=a||{},v=h.Deferred(),m(a),x("restoring chat widget with options: ",a),a.embedded?(n(),w=r(e),w.onRestorationComplete(y.resolve),q(a,!0).done(function(a){w.restoreChat(a).done(function(b){v.resolve(b,a),A.fire(b)}).fail(function(a){v.reject(a)})})):(x('can only restore chat in "embedded" mode; quitting'),v.reject({code:0,description:'can only restore chat in "embedded" mode'})),v.promise()}function u(a){var d=b.fromUrl(document.location.href);return a=g.extend(d,a),n(),v=h.Deferred(),w=new c(e),m(a),document.body.className="gwc-chat",x("initializing chat widget in this window with options: ",a),q(a,!1).done(function(a){w.startChat(a).done(function(b){v.resolve(b,a),A.fire(b)}).fail(v.reject)}),v.promise()}var v,w,x,y=h.Deferred(),z=new j,A=new j,B=new j,C=new j,D=new j,E=new j;l=l||h,x=l.noop,this.startChat=s,this.restoreChat=t,this.startChatInThisWindow=u,this.getTransientSessionAPI=e.getTransientSessionAPI,this.onRestorationComplete=y.done,this.onRemoteSession=z.add,this.onStarted=B.add,this.onEnded=C.add,this.onSession=A.add,this.onBeforeChatOptionsApplied=E.add,this.close=function(){return w&&w.close()},this.toggle=function(){return w&&w.toggle()},this.isMinimized=function(){return w&&w.isMinimized()},this.onMinimized=D.add,this.VERSION=e.VERSION}var f=a("../util"),g=a("lodash"),h=a("jquery"),i=a("./templatesProvider"),j=a("../simpleEvent"),k=function(){"use strict";var a,b=window.console;try{a=b.log.bind(b)}catch(c){a=function(){b&&b.log&&b.log(Array.prototype.slice.call(arguments))}}return a};return c.exports=e,c.exports})}.call(this),function(){"function"!=typeof define||define.amd;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("ui/chatView",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/ui/chatView",["require","exports","module","jquery","lodash","../simpleEvent","../util"],a)}}).call(this,function(a,b,c){function d(a){"use strict";function b(){k[0].scrollTop=k[0].scrollHeight}function c(){s.fire(),clearTimeout(m),m=null}function d(a){var b=e(a.target),d=b.val();if(13===a.which||10===a.which){if(a.preventDefault(),!a.ctrlKey)return q.fire(g(d)),b.val(""),void c();b.val(d+"\n")}m||r.fire(),clearTimeout(m),m=setTimeout(c,p)}function i(){j.on("keypress",".gwc-chat-message-input",d)}a=a||{};var j,k,l,m,n=this,o=a.log||e.noop,p=a.typingTimeout||3e3,q=new h,r=new h,s=new h,t={};n.onTextEntered=q.add,n.onTypingStarted=r.add,n.onTypingStopped=s.add,n.append=function(a){l.append(a),b()},n.showTyping=function(a,c){t[a]=e(c),k.append(t[a]),b()},n.hideTyping=function(a){t[a]&&(t[a].remove(),delete t[a])},n.hideAllTyping=function(){f.each(t,function(a,b){n.hideTyping(b)})},n.render=function(){return o("rendering chat view"),j=n.$el=e(a.templatesData.chatView({nls:a.nls})),k=j.find(".gwc-chat-message-container"),l=k.find(".gwc-persistent-chat-messages"),i(),n}}var e=a("jquery"),f=a("lodash"),g=a("../util").filterInput,h=a("../simpleEvent");return c.exports=d,c.exports})}.call(this),function(){"function"!=typeof define||define.amd;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("ui/chatSessionView",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/ui/chatSessionView",["require","exports","module","jquery","lodash","./chatView","URIjs","../util"],a)}}).call(this,function(a,b,c){function d(a){"use strict";function b(a){return String(a).replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br/>$2")}function c(a){return a.type.agent||a.type.supervisor}function d(d){var e,g,h,j;return f.isString(d)?e={from:null,when:null,isAgent:null,isUrl:!1,message:d}:(g=f.escape(d.content.text),g=b(g),h="url"===d.content.type,e={from:d.party.type.client?B.ownUsername:d.party.name,when:new Date(d.timestamp).toLocaleTimeString(),isAgent:c(d.party),isUrl:h,message:g}),h&&(j=new i(d.content.text),j.protocol()||"/"===j.toString().substr(0,1)||j.protocol("http"),e.url=j.toString()),e.nls=B,a.templatesData.chatMessage(e)}function j(){var a=d(B.chatEnded);E.append(a)}function k(b){var c,d,e;e=b.name||B.defaultAgentName,c=h(B.agentTyping,{agentName:e}),d=a.templatesData.chatTyping({message:c,nls:B}),E.hideTyping(b.id),E.showTyping(b.id,d)}function l(a){C("chat UI: sending message",a),A?A.sendMessage(a):D.push(a)}function m(){A.sendTyping({isTyping:!0})}function n(){A.sendTyping({isTyping:!1})}function o(a){var b=Number(a.error.code),c=F[b],e=c?d(c):null;if(C("handling Error event ",a,e),e)E.append(e);else if(150!==b)throw new Error("Chat Error: "+a.error.description+" ("+a.error.code+")")}function p(a){var b=d(h(B.agentJoined,{name:a.party.name}));C("handling AgentConnected event",a),E.append(b)}function q(a){var b=d(h(B.agentLeft,{name:a.party.name}));C("handling AgentDisconnected event",a),E.hideTyping(a.party.id),E.append(b)}function r(a){var b,f;if(C("handling MessageReceived event",a),c(a.party)&&E.hideTyping(a.party.id),b=d(a),b=e(b)[0],y&&(C("applying onBeforeMessage hook"),f=y(b,a.content.text)),!1===f)return void C("not appending the message (filtered out) ",a.content.text);E.append(b)}function s(a){C("handling AgentTyping event",a),E.hideTyping(a.party.id),a.isTyping&&k(a.party)}function t(a){C("chat UI: got Error event",a),E.hideAllTyping(),o(a)}function u(){C("chat UI: got Interrupted event"),E.hideAllTyping(),E.append(d(B.networkInterrupted))}function v(){C("chat UI: got Restored event"),E.append(d(B.networkRestored))}function w(a){C("chat UI: got SessionEnded event",a),E.hideAllTyping(),j()}function x(){C("chat UI: setting up callbacks"),A.onAgentConnected(p),A.onAgentDisconnected(q),A.onMessageReceived(r),A.onAgentTyping(s),A.onError(t),A.onSessionEnded(w),A.onInterrupted(u),A.onContinued(v),E.onTypingStarted(m),E.onTypingStopped(n),D.length&&f.each(D,A.sendMessage)}var y,z=this,A=a.session,B=a.nls,C=a.log||e.noop,D=[],E=a.view||new g({log:C,typingTimeout:a.typingTimeout,templatesData:a.templatesData,nls:a.nls}),F={100:B.serverStopped,101:B.serverUnreachable,152:B.chatSessionExpired};z.render=function(){return E.render(),z.$el=E.$el,z},z.sendMessage=l,z.onBeforeAppend=function(a){y=a},z.sayHello=function(){var a=d(B.chatWelcome);E.append(a)},z.sayError=function(a){var b;a=a||{},b=d(F[a.code]||B.unknownServerError),C("chat UI: appending error ",a,b),E.append(b)},z.injectSession=function(a){if(A)throw new Error("Session already injected");A=a,x()},E.onTextEntered(l),A&&x()}var e=a("jquery"),f=a("lodash"),g=a("./chatView"),h=a("../util").supplant,i=a("URIjs");return c.exports=d,c.exports})}.call(this),function(){"function"!=typeof define||define.amd;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("ui/embeddedWindowView",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/ui/embeddedWindowView",["require","exports","module","jquery","lodash","../simpleEvent"],a)}}).call(this,function(a,b,c){function d(a){"use strict";function b(){h.find(".gwc-chat-body").slideToggle(m),j=!j,o.fire(j)}function c(){h.fadeOut(m),n.fire()}function d(){h.on("click",".gwc-chat-control-minimize",b),h.on("click",".gwc-chat-control-close",c)}var h,i=this,j=!!a.minimized,k=a.log||e.noop,l=a.nls,m=f.isNumber(a.animationSpeed)?a.animationSpeed:100,n=new g,o=new g;this.close=c,this.toggle=b,this.onClosed=n.add,this.onMinimized=o.add,this.render=function(){return k("chat window: rendering, is minimized: ",j),h=e(a.templatesData.embeddedWindow({nls:l,chatTitle:l.chatTitle})),j&&h.find(".gwc-chat-body").hide(),d(),i.$el=h,i.$contentArea=h.find(".gwc-chat-body"),i}}var e=a("jquery"),f=a("lodash"),g=a("../simpleEvent");return c.exports=d,c.exports})}.call(this),function(){"function"!=typeof define||define.amd;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("ui/chatRegistrationView",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/ui/chatRegistrationView",["require","exports","module","jquery","lodash","../simpleEvent","../util"],a)}}).call(this,function(a,b,c){function d(a){"use strict";function b(a){return/\S+@\S+\.\S+/.test(a)&&-1===a.indexOf("@.")&&-1===a.indexOf(".@")}function c(){var a=!0;return m.find(".gwc-chat-control-group-required").each(function(){var c,d=e(this),f=d.find(".gwc-chat-registration-input"),g=d.find(".gwc-chat-label"),h=d.find(".gwc-chat-validation-error"),j=e.trim(f.val());return""===j?(a=!1,c=i(o.regErrorRequiredField,{field:e.trim(g.text().replace("*","").replace(":",""))})):"EmailAddress"!==f.attr("name")||b(j)?(g.removeClass("gwc-chat-label-invalid"),h.html("").hide()):(a=!1,c=o.regErrorInvalidEmail),a||(g.addClass("gwc-chat-label-invalid"),h.text(c).show(),f.focus()),a}),a}function d(){var a=e("form",m).serializeArray(),b={};return f.each(a,function(a){b[a.name]=g(a.value)}),b}function j(a){a.preventDefault(),c()&&q.fire(d())}function k(){r.fire()}function l(){m.on("click","#gcbChatRegister",j),m.on("submit","form",j),m.on("click","#gcbChatSkipRegistration",k)}var m,n=this,o=a.nls,p=a.log||e.noop,q=new h,r=new h;n.onSubmitted=q.add,n.onSkipped=r.add,n.render=function(){return p("chat reg form: rendering"),m=n.$el=e(a.templatesData.chatRegistration({nls:o})),l(),n}}var e=a("jquery"),f=a("lodash"),g=a("../util").filterInput,h=a("../simpleEvent"),i=a("../util").supplant;return c.exports=d,c.exports})}.call(this),function(){"function"!=typeof define||define.amd;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("stateStorage",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/stateStorage",["require","exports","module","./util"],a)}}).call(this,function(a,b,c){function d(a){"use strict";function b(){e.cookie(c,"",{expires:-1,domain:d,path:f})}a=a||{};var c=a.cookieName||e.constants.STATE_COOKIE_NAME,d=a.domain||e.getCookieDomain(),f="/",g=a.cookieMaxAge||5,h=a.logger||e.noop;return{read:function(){var a=e.cookie(c);return a?JSON.parse(a):a},write:function(a){a?(e.cookie(c,JSON.stringify(a),{expires:new Date((new Date).getTime()+1e3*g),domain:d,path:f}),h("saved state with cookie name: ",c,", domain: ",d,", max age: ",g)):null===a&&b()}}}var e=a("./util");return c.exports=d,c.exports})}.call(this),function(){"function"!=typeof define||define.amd;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("ui/defaultLocalization",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/ui/defaultLocalization",["require","exports","module"],a)}}).call(this,function(a,b,c){return c.exports={chatTitle:"Genesys Chat",chatWelcome:"Hello! Next available customer representative will be with you shortly.",defaultUsername:"User",defaultAgentName:"Representative",ownUsername:"You",chatEnded:"Chat session ended",agentJoined:"Representative {name} has joined the session",agentLeft:"Representative {name} has left the session",agentTyping:"{agentName} is typing...",serverStopped:"Connection to chat has been interrupted. Trying to restore...",serverUnreachable:"Chat is unavailable now. Please try again later.",networkInterrupted:"Connection to chat has been interrupted. Trying to restore...",networkRestored:"Connection restored.",unknownServerError:"Chat is unavailable now. Please try again later.",chatSessionExpired:"Chat session has expired.",regFirstName:"First Name:",regLastName:"Last Name:",regEmail:"Email:",regSubmit:"Start Chat",regSkip:"Skip Registration",regWelcomePart1:"Please enter few details about you, and press Start Chat button.",regWelcomePart2:"Next available customer representative will be with you shortly.",regErrorRequiredField:'"{field}" is a required field',regErrorInvalidEmail:"Please enter a valid email address",leaveSessionPrompt:"You are going to leave chat session."},c.exports})}.call(this),function(){"function"!=typeof define||define.amd;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("ui/chatController",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/ui/chatController",["require","exports","module","lodash","jquery","../util","./chatSessionView","./embeddedWindowView","./chatRegistrationView","../stateStorage","./defaultLocalization","../simpleEvent"],a)}}).call(this,function(a,b,c){function d(a,b){"use strict";var c,d,e=new n,f=new n;return c=new l({domain:a.cookieDomain,cookieMaxAge:a.maxOfflineDuration,logger:b}),d={},d.read=function(){var a=c.read();return e.fire(a),b("patched state storage, read(): ",a),a},d.write=function(a){f.fire(a),b("patched state storage, write(): ",a),c.write(a)},d.onAfterRead=e.add,d.onBeforeWrite=f.add,d}function e(a){"use strict";function b(){return{nls:f.extend(m,I.langData),templatesData:I.templatesData,log:K}}function c(a){return f.extend(b(),a)}function e(){K("binding reg. form state saving"),g(window).on("unload.chatRegForm",function(){var a={};I.embedded&&(f.forEach(I,function(b,c){(f.isBoolean(b)||f.isString(b)&&""!==b)&&(a[c]=b)}),a.regisration=!0,K("saving reg. form state",a),P.write(a))})}function l(){K("unbinding reg. form state saving"),g(window).off("unload.chatRegForm")}function o(){K("removing embedded chat window"),l(),J.done(function(a){try{a.leave()}catch(a){K("session already dead, no need to .leave()")}a=null,O=null}),N.$el.remove(),R=!1,N=null,V.fire()}function p(){I.embedded?o():window.close()}function q(){K("Chat Controller initializes with options: ",I),I.embedded&&(N=new j(c({minimized:X})),N.onMinimized(function(a){W.fire(a),X=a}),N.onClosed(o),N.render()),O=new i(c()),O.render(),M=I.embedded?N.$contentArea:"body",I.ui&&(I.ui.onBeforeWrapper&&I.ui.onBeforeWrapper(N&&N.$el[0]),I.ui.onBeforeChat&&I.ui.onBeforeChat(O.$el[0]),I.ui.onBeforeMessage&&O.onBeforeAppend(I.ui.onBeforeMessage)),O.$el.appendTo(M),f.defer(U.fire)}function r(a){K("failed to start session ",a),L&&O.sayError(a.error),Q=!1,J.reject(a)}function s(a){K("failed to restore session ",a),R=!1,Q=!1,J.reject(a),S.resolve()}function t(a){var b=new Date;for(a+=(new Date).getTime();b<a;)b=new Date}function u(){var a={path:"/",domain:I.cookieDomain||h.getCookieDomain(),expires:-1};h.cookie(h.constants.STATE_COOKIE_NAME,"",a),h.cookie(h.constants.COMETD_COOKIE_NAME,"",a)}function v(a){I.embedded||(g(window).on("beforeunload.chatWidget",function(){return u(),b().nls.leaveSessionPrompt}),g(window).on("unload.chatWidget",function(){a.leave(),u(),t(100)}),a.onSessionEnded(function(){g(window).off(".chatWidget")}))}function w(a){L&&O.injectSession(a),a.onSessionEnded(function(){Q=!1}),v(a),J.resolve(a)}function x(){N&&N.$el.find(":input").first().focus()}function y(a){var b,c="IdentifyCreateContact",d=1,e=2,g=3;b=f.isEmpty(a)?d:!1===I.createContact?e:g,a[c]=b,K("IdentifyCreateContact set to ",a[c])}function z(a){var b="";return a.FirstName&&(b=a.FirstName+" "),a.LastName&&(b+=a.LastName),b}function A(b){I.onBeforeStartSession=I.onBeforeStartSession||function(a,b){b(a)},Q=!0,I.onBeforeStartSession(b,function(b){y(b),K("augmenting registration data with directly passed userData ",b,I.userData),f.extend(b,I.userData);try{a.startSession({serverUrl:I.serverUrl,contactCenterId:I.contactCenterId,apikey:I.apikey,endpoint:I.endpoint,transport:I.transport,username:z(b)||I.username,userData:b,stateStorage:P,maxOfflineDuration:I.maxOfflineDuration,disableWebSockets:I.disableWebSockets,logger:K,debugCometd:I.debugCometd}).done(w).fail(r)}catch(a){return K("startSession thrown error: ",a),void r({code:0,description:a.message})}L&&O.sayHello()})}function B(a){L&&N.$el.appendTo("body"),Q=!0,w(a),S.resolve()}function C(){K=I.logger||function(){}}function D(a){L=I.ui,f.isUndefined(L)&&(L=!0),P=d(I,K),P.onAfterRead(function(a){a&&a.isMinimized&&(X=a.isMinimized,delete a.isMinimized)}),P.onBeforeWrite(function(a){a&&X&&(a.isMinimized=X)}),a()}function E(){return function(a){var b=new k(c());return K("starting default registration workflow"),b.onSubmitted(function(b){K("default registration submitted with ",b),l(),a(b)}),b.onSkipped(function(){K("default registration skipped"),l(),a({})}),e(),b.render().$el[0]}}function F(){function a(a){K("registration workflow ended; data provided: ",a),T.remove(p),A(a),b&&(K("hiding registration UI"),b.remove(),O.$el.show())}var b,c=I.registration;return!1!==c&&(f.isFunction(c)||(K("provided registration is not a function, default will be used"),c=E()),b=c(a),K("registration form (UI) is: ",b),b&&(L.onBeforeRegistration&&(K("firing onBeforeRegistration callback with it"),L.onBeforeRegistration(b)),b=g(b),K("showing registration UI"),O.$el.hide(),b.appendTo(M),T.add(p)),!0)}function G(){if(!L)return void A({});q(),F()||A({}),L&&I.embedded&&N.$el.appendTo("body")}function H(){var b=P.read();P.read=function(){return b},I.embedded&&b&&!b.sessionId&&b.registration?(I=f.extend({},b,I),G(),S.resolve()):(R=!0,a.restoreSession({transport:I.transport,disableWebSockets:I.disableWebSockets,maxOfflineDuration:I.maxOfflineDuration,stateStorage:P,logger:K,debugCometd:I.debugCometd}).done(function(a){L&&q(),B(a)}).fail(s))}var I,J,K,L,M,N,O,P,Q,R=!1,S=g.Deferred(),T=new n,U=new n,V=new n,W=new n,X=!1;!function(){function a(){var c=!!h.cookie(h.constants.TRANSIENT_COOKIE_NAME);Q||c===b||(K('"remote" chat session '+(c?"start":"end")+" detected"),T.fire(c),b=c),setTimeout(a,h.constants.REMOTE_SESSION_CHECK_INTERVAL)}var b=!1;f.defer(a)}(),this.startChat=function(a){return R?(K("widget is already in DOM, skipping"),x(),g.Deferred().reject(h.createErrorEvent({code:200,description:"Chat is already running"})).promise()):(R=!0,I=a||{},J=g.Deferred(),C(),D(G),J.promise())},this.restoreChat=function(a){return R?(K("restore: chat is already running, resolving"),g.Deferred().reject(h.createErrorEvent({code:200,description:"Chat is already running"})).promise()):(I=a||{},J=g.Deferred(),C(),D(H),J.promise())},this.onRestorationComplete=S.done,this.onRemoteSession=T.add,this.onStarted=U.add,this.onEnded=V.add,this.toggle=function(){N&&N.toggle()},this.close=function(){N&&N.close()},this.isMinimized=function(){return X},this.onMinimized=W.add}var f=a("lodash"),g=a("jquery"),h=a("../util"),i=a("./chatSessionView"),j=a("./embeddedWindowView"),k=a("./chatRegistrationView"),l=a("../stateStorage"),m=a("./defaultLocalization"),n=a("../simpleEvent");return c.exports=e,c.exports})}.call(this),function(){"function"!=typeof define||define.amd;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("paramsConverter",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/paramsConverter",["require","exports","module","./util"],a)}}).call(this,function(a,b,c){function d(a){"use strict";return JSON.parse('{"'+decodeURI(a).replace(/"/g,'\\"').replace(/&/g,'","').replace(/\=/g,'":"')+'"}')}function e(a){"use strict";return"options="+encodeURIComponent(JSON.stringify(a))}function f(a){"use strict";var b=g.simpleParseUrl(a).search.slice(1),c=d(b).options;return JSON.parse(decodeURIComponent(c))}var g=a("./util");return c.exports.toUrl=e,c.exports.fromUrl=f,c.exports})}.call(this),function(){"function"!=typeof define||define.amd;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("cometdTransport",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/cometdTransport",["require","exports","module","lodash","./util"],a)}}).call(this,function(a,b,c){function d(a){"use strict";function b(a){var b=a.promise();return{done:b.done,fail:b.fail}}function c(a,b,c,d){L("Chat transport CometD exception: ",a," subscriptionHandle: ",b," isListener: ",c," message: ",d)}function d(){L("chat: CometD is badly disconnected, firing interruption"),y=!0,T(),R.Error&&R.Error({notificationType:"Error",error:{code:150,description:"Network interruption detected"}})}function h(){var a,b=z.getTransportTypes(),c=z.getTransport().getType();"callback-polling"===c&&(a=e.without(b,c),L("chat: Disabling unused CometD transports"),e.each(a,function(a){z.unregisterTransport(a)}),L("  transports before: ",b,", after: ",z.getTransportTypes()))}function i(){if(clearTimeout(A),y&&(L("chat: CometD connection established"),y=!1,U()),!Q)try{h()}catch(a){L("chat: exception cannot disable unused transports: ",a)}finally{Q=!0}}function j(){L("chat: CometD connection lost"),A=setTimeout(d,J)}function k(){var a;return function(b){z.isDisconnected()||(b.successful?i():!1!==a&&j(),a=b.successful)}}function l(){if(F)return void B.disconnect();z.reload()}function m(b){L("chat: instantiating CometD"),z=new D,z.configure({url:E,logLevel:K?"debug":"warn",appendMessageTypeToURL:!1}),a.disableWebSockets&&(L("chat: disabling websocket transport according to config"),z.unregisterTransport("websocket")),F||(z.registerExtension("reload",new G({cookieMaxAge:Number(I),cookieName:H})),L("chat: reload extension cookie name: ",H),L("chat: reload extension cookie max age: ",I)),z.addListener("/meta/handshake",b),z.addListener("/meta/connect",k()),z.onListenerException=c,window.addEventListener?(window.addEventListener("unload",l,!1),window.addEventListener("beforeunload",l,!1)):(window.attachEvent("onunload",l),window.attachEvent("onbeforeunload",l)),L("handshaking"),z.handshake({chatTransient:F})}function n(){if("resolved"!==P.state())throw new Error("Cannot execute. Transport initialization is "+P.state())}function o(a){S=S||{},e.extend(S,a)}function p(a){e.each(a,function(a){R[a.type]&&(R[a.type](a),a.index&&o({lastIndex:a.index}))})}function q(){L("chat: initializing CometD subscriptions"),z.addListener(N,function(a){g(function(){"TranscriptUpdated"===a.data.notificationType&&p(a.data.transcript),"Error"===a.data.notificationType&&R.Error&&R.Error({error:a.data.error})})})}function r(a,c,d){var f,h;return n(),f=new C,h=e.extend({operationName:a},d,c),z.publish(M,h,function(a){g(function(){a.data&&a.data.error?f.reject(a.data||{}):f.resolve(a.data||{})})}),b(f)}function s(a){L("chat: failing transport, result: ",a),z.disconnect(),g(function(){P.reject(a&&a.failure&&a.failure.exception)})}function t(a){return r("GetTranscript",a)}function u(){var a={sessionId:S.sessionId,fromIndex:S.lastIndex||1e9};return L('"pinging" the server with: ',a),t(a)}function v(a){var b=a&&a.transcript;L('chat: "ping" successful ',a),b&&b.length&&(L("found unprocessed transcript, processing (messages: "+b.length+")"),p(b))}function w(a){L('chat: "ping" unsuccessful',a),R.Error&&R.Error({notificationType:"Error",error:{code:152,description:"Chat session expired"}}),z.disconnect(),clearTimeout(A)}function x(){P.resolve(),!F&&S&&S.sessionId&&u().done(v).fail(w)}var y,z,A,B=this,C=f.Deferred,D=a.Cometd,E=a.serverUrl,F=!!a.transient,G=a.ReloadExtension,H=a.reloadCookieName||f.constants.COMETD_COOKIE_NAME,I=a.reloadCookieMaxAge||5,J=1e3*(a.connectionTimeout||3),K=a.debugCometd,L=a.log||f.noop,M="/service/chat/publish",N="/service/chat/notify",O=(new Date).getTimezoneOffset(),P=new C,Q=!1,R={},S={},T=f.noop,U=f.noop;this.init=function(c){var d=a.handshakeAttempts||4;return S=c,F||S&&S.sessionId||(f.rootCookie(H,"",{expires:-1}),L("chat: cleaned CometD state, state is: ",f.cookie(H))),m(function(a){if(a.successful)return L("chat: CometD handshake successful ",a),L("chat: CometD transport: ",z.getTransport()&&z.getTransport().getType()),void g(x);d-=1,L("chat: handshake failed, attempts left:",d,a),d||s()}),F||q(),b(P)},this.startSession=function(a){var b=r("StartSession",a,{timezoneOffset:O});return b.done(function(a){o({sessionId:a.sessionId})}),b},this.sendMessage=function(a){return r("SendMessage",a)},this.getTranscript=t,this.leaveSession=function(a){return r("LeaveSession",a)},this.sendTyping=function(a){return r("SendTyping",a)},this.setUserData=function(a){return r("SetUserData",a)},this.getUserData=function(a){return r("GetUserData",a)},this.deleteUserData=function(a){return r("DeleteUserData",a)},this.disconnect=function(){L("chat: transport.disconnect() is called"),z.isDisconnected()||(L("chat: Calling cometd.disconnect()"),z.disconnect())},this.onAgentConnected=function(a){R.AgentConnected=a},this.onAgentTyping=function(a){R.AgentTyping=a},this.onAgentDisconnected=function(a){R.AgentDisconnected=a},this.onMessageReceived=function(a){R.MessageReceived=a},this.onSessionEnded=function(a){R.SessionEnded=a},this.onError=function(a){R.Error=a},this.onInterrupted=function(a){T=a},this.onContinued=function(a){U=a}}var e=a("lodash"),f=a("./util"),g=f.defer;return c.exports=d,c.exports})}.call(this),function(){"function"!=typeof define||define.amd;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("htccRestTransport",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/htccRestTransport",["require","exports","module","lodash","./util","jquery"],a)}}).call(this,function(a,b,c){function d(a){"use strict";function b(){r&&"/"!==r[r.length-1]&&(r+="/")}function c(a){var b=a.promise();return{done:b.done,fail:b.fail}}function d(a){var b={},c=!1;switch(a.type){case"Text":a.type="MessageReceived";break;case"ParticipantJoined":a.type="AgentConnected";break;case"ParticipantLeft":a.type="AgentDisconnected";break;case"ParticipantRejoined":a.type="ParticipantRejoined";break;case"TypingStarted":a.type="AgentTyping",c=!0;break;case"TypingStopped":a.type="AgentTyping",c=!1;break;case"TranscriptSaveDone":a.type="TranscriptSaveDone";break;case"Notice":a.type="Notice"}if(a.from&&a.from.type)switch(a.from.type){case"Customer":a.from.type="Client";break;case"Agent":a.from.type="Agent";break;case"External":a.from.type="External"}return b.type=a.type,b.index=a.index,b.timestamp=(new Date).getTime(),b.isTyping="AgentTyping"===a.type?c:void 0,b.content=a.text?{text:a.text,type:"text"}:void 0,b.party={id:a.from?Number(a.from.participantId):"",type:a.from?a.from.type:"",name:a.from?a.from.nickname:""},b}function h(a){var b=a.type;return"AgentConnected"!==b&&"AgentTyping"!==b&&"AgentDisconnected"!==b||"Agent"===a.party.type}function i(a){var b=e.sortBy(a.messages,"index");e.each(b,function(a){var b=d(a);"AgentConnected"===b.type?o+=1:"AgentDisconnected"===b.type&&0===(o-=1)&&w.SessionEnded&&(w.SessionEnded({reason:{id:2,description:""}}),this.stopPoll()),w[b.type]&&h(b)&&w[b.type](b)},this)}function j(a,b,d){var e=new p;return g.when(q).then(function(){g.ajax({url:r+encodeURIComponent(v)+(a||""),type:b,crossDomain:!0,data:"POST"===b?JSON.stringify(d,void 0,2):d,headers:{"Content-Type":"application/json"},xhrFields:{withCredentials:!0},success:function(a,b,c){f.noop(b),a.id&&(a.sessionId=a.id),c.getResponseHeader("X-CSRF-HEADER")&&c.getResponseHeader("X-CSRF-TOKEN")&&(A.CSRFHeaderName=c.getResponseHeader("X-CSRF-HEADER"),A.CSRFToken=c.getResponseHeader("X-CSRF-TOKEN")),c.getResponseHeader("genesys-awselb")&&(l=c.getResponseHeader("genesys-awselb")),c.getResponseHeader("genesys-jsessionid")&&(m=c.getResponseHeader("genesys-jsessionid")),e.resolve(a||{})},error:function(a){a=a||{},e.reject({error:{code:a.status,description:a.responseText||a.statusText}})},beforeSend:function(a){A.CSRFHeaderName&&A.CSRFToken&&a.setRequestHeader(A.CSRFHeaderName,A.CSRFToken),t?a.setRequestHeader("ContactCenterId",t):s&&(a.setRequestHeader("apikey",s),l&&a.setRequestHeader("genesys-awselb",l),m&&a.setRequestHeader("genesys-jsessionid",m))}})}),c(e)}function k(a){var b,c=new p;return s?b=r.replace(/v2\/chats\/?/,"v2/diagnostics/version"):(B.href=r,b=B.protocol+"//"+B.host+"/api/v2/diagnostics/version"),g.ajax({url:b,type:"GET",crossDomain:!0,data:{},headers:{"Content-Type":"application/json"},xhrFields:{withCredentials:!0},success:function(b,d,e){f.noop(b),f.noop(d),e.getResponseHeader("X-CSRF-HEADER")&&e.getResponseHeader("X-CSRF-TOKEN")&&(A.CSRFHeaderName=e.getResponseHeader("X-CSRF-HEADER"),A.CSRFToken=e.getResponseHeader("X-CSRF-TOKEN")),e.getResponseHeader("genesys-awselb")&&(l=e.getResponseHeader("genesys-awselb")),e.getResponseHeader("genesys-jsessionid")&&(m=e.getResponseHeader("genesys-jsessionid")),a&&a(),c.resolve()},error:function(){c.reject()},beforeSend:function(a){s&&a.setRequestHeader("apikey",s),t&&a.setRequestHeader("ContactCenterId",t)}}),c}if(!a||!a.contactCenterId&&!a.apikey)throw new Error("Contact center ID or apikey must be specified");var l,m,n=this,o=0,p=f.Deferred,q=new p,r=a.serverUrl.replace(/\/$/,""),s=a.apikey,t=s?null:a.contactCenterId,u=a.endpoint,v="",w={},x=!1,y=3e3,z=!0,A={},B=document.createElement("a");this.init=function(a){var b=f.Deferred();return a&&a.sessionId&&(v=a.sessionId,z=!1,n.startPoll()),b.resolve(),b.promise()},this.poll=function(){x||(x=!0,this.getTranscript(z?{index:0}:{}).done(function(a){i(a),x=!1}),z=!1)},this.startPoll=function(){this.stopPoll();var a=this;a.poll(),window.poll_int=setInterval(function(){a.poll()},y)},this.stopPoll=function(){clearInterval(window.poll_int)},this.startSession=function(a){var b=a.userData||{},c={operationName:"RequestChat",nickname:a.username,subject:a.subject||"No Subject",userData:b};return b.Send_Chat_Transcript="true",u&&(c.endpoint=u),j("","POST",c).done(function(a){a.id&&(v=a.id),n.sendTyping({isTyping:!1}),n.startPoll()})},this.sendMessage=function(a){return j("","POST",{operationName:"SendMessage",text:a.message}).done(function(){n.poll()})},this.getTranscript=function(a){return j("/messages","GET",a)},this.leaveSession=function(){return this.stopPoll(),j("","POST",{operationName:"Complete"}).done(function(){w.SessionEnded({reason:{id:1,description:""}})}).fail(function(){w.SessionEnded({reason:{id:1,description:""}})})},this.sendTyping=function(a){return a=a||{},a.isTyping?j("","POST",{operationName:"SendStartTypingNotification"}):j("","POST",{operationName:"SendStopTypingNotification"})},this.setUserData=function(){return c(new p)},this.getUserData=function(){return c(new p)},this.deleteUserData=function(){return c(new p)},this.onAgentConnected=function(a){w.AgentConnected=a},this.onAgentTyping=function(a){w.AgentTyping=a},this.onAgentDisconnected=function(a){w.AgentDisconnected=a},this.onMessageReceived=function(a){w.MessageReceived=a},this.onSessionEnded=function(a){w.SessionEnded=a},this.onError=function(a){w.Error=a},b(),k(function(){q.resolve()})}var e=a("lodash"),f=a("./util"),g=a("jquery");f.defer;return c.exports=d,c.exports})}.call(this),define("chat/common/umd/helpers/jQueryCometdWrapper",["jquery","jquery.cometd","jquery.cometd-reload"],function(a,b,c){"use strict";return{Cometd:a.Cometd,ReloadExtension:c}}),function(){"function"!=typeof define||define.amd;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("transientSession",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/transientSession",["require","exports","module","lodash","./simpleEvent","./util"],a)}}).call(this,function(a,b,c){function d(a){"use strict";var b=a.state,c=a.transport,d=a.logger||f.noop,l=f.Deferred;this.isAgentConnected=function(){return b.isAgentConnected},this.sendMessage=function(a){var f,m=new l,n=b&&b.sessionId;return n?(e.isString(a)&&(a={message:a,type:"text"}),i(a,{message:"string",type:"string"}),"text"!==a.type&&"url"!==a.type&&g('type must be "url" or "text"'),f={sessionId:n,message:a.message,type:a.type},d("transient session, sending message ",f),c.init().fail(k(m,d)).done(function(){c.sendMessage(f).fail(k(m,d)).done(function(){d("sending message done"),m.resolve()})}),h(m)):(m.reject(j({description:"There is no ongoing session"})),h(m))}}var e=a("lodash"),f=(a("./simpleEvent"),a("./util")),g=(f.defer,f.throwError),h=f.getSimplePromise,i=f.validateObject,j=f.createErrorEvent,k=f.createTransportFailureResolver;return c.exports=d,c.exports})}.call(this),function(){"function"!=typeof define||define.amd;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("chat",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/chat",["require","exports","module","lodash","./util","./transientSession"],a)}}).call(this,function(a,b,c){function d(){"use strict";var a=h.cookie(h.constants.TRANSIENT_COOKIE_NAME);return a?JSON.parse(a):null}function e(a,b,c,e,n){"use strict";function o(a,b){var d;return a("Choosing transport..."),b&&g.isObject(b.transport)?(a("Custom transport is passed, using it: ",b.transport),d=b.transport):b&&(b.contactCenterId||b.apikey)?(a("contactCenterId or apikey is passed, using HTCC REST transport."),d=new c.HtccTransport({serverUrl:b.serverUrl,contactCenterId:b.contactCenterId,apikey:b.apikey,endpoint:b.endpoint})):(a("None additional parameters passed. Using CometD transport."),d=new c.CometDTransport({Cometd:e,disableWebSockets:b.disableWebSockets,serverUrl:b.serverUrl,ReloadExtension:n,log:b.logger,debugCometd:!!b.debugCometd,reloadCookieMaxAge:b.maxOfflineDuration})),d}function p(b){return b.stateStorage||new a({cookieMaxAge:b.maxOfflineDuration,log:b.logger})}function q(a){l(a,{serverUrl:{isa:"string",optional:!0},logger:{isa:"function",optional:!0}}),a.serverUrl||a.transport||j("either serverUrl or a custom transport must be provided")}function r(a){return t=a.logger||h.noop,t("Chat version: "+u),t}var s,t,u="850.6.10",v=h.Deferred,w="User";this.startSession=function(a){var c,d,e={source:"web",pageTitle:document.title,url:document.location.href,referrer:document.referrer};return q(a),l(a,{username:{isa:"string",optional:!0},userData:{isa:"object",optional:!0},subject:{isa:"string",optional:!0},contactCenterId:{isa:"string",optional:!0},apikey:{isa:"string",optional:!0},endpoint:{isa:"string",optional:!0},stateStorage:{isa:{write:{isa:"function"},read:{isa:"function"}},optional:!0}}),t=r(a),s=o(t,a),c=new v,d=p(a),d.write(null),t("startSession: initializing transport"),s.init().fail(m(c,t)).done(function(){var h=g.pick(a,["username","userData","subject"]);h.username||(h.username=w),h.userData=g.extend(e,h.userData),t("startSession: transport initialized, starting session ",h),s.startSession(h).fail(m(c,t)).done(function(e){var g;t("startSession request returned ",e);try{l(e,{sessionId:"string"})}catch(a){return t("startSession failed ",a),void c.reject({error:{code:0,description:a.message}})}g={sessionId:e.sessionId,serverUrl:a.serverUrl,lastIndex:0},a.contactCenterId&&(g.contactCenterId=a.contactCenterId,a.endpoint&&(g.endpoint=a.endpoint)),f=new b({state:g,transport:s,stateStorage:d,logger:t}),f.onSessionEnded(function(){f=null}),t("startSession succeeded"),c.resolve(f)})}),k(c)},this.restoreSession=function(a){var c,d,e,h;return a=a||{},l(a,{logger:{isa:"function",optional:!0},stateStorage:{isa:"object",optional:!0},fromIndex:{isa:"whole",optional:!0}}),t=r(a),c=new v,d=p(a),e=d.read(),e&&e.sessionId?(s=o(t,g.extend({},a,e)),h={state:e,transport:s,stateStorage:d,logger:t},t("restoreSession: initializing transport"),s.init(e).fail(m(c,t)).done(function(){t("restoreSession: transport initialized, restoring the session ",h),f=new b(h),f.onSessionEnded(function(){f=null}),d.write(null),c.resolve(f)})):(t("restoreSession() failed to read state"),c.reject({})),k(c)},this.getTransientSessionAPI=function(a){var b;return a=a||{},t=r(a),f?(t("getTransientSessionAPI(): returning full-featured session"),{isAgentConnected:f.isAgentConnected,sendMessage:f.sendMessage,isImmediate:!0}):(b=d())?(q(a),a.transient=!0,s=o(t,a),t("getTransientSessionAPI(): returning new transient session"),new i({transport:s,logger:t,state:b})):null},this.VERSION=u}var f,g=a("lodash"),h=a("./util"),i=a("./transientSession"),j=h.throwError,k=h.getSimplePromise,l=h.validateObject,m=(h.createErrorEvent,h.createTransportFailureResolver);return c.exports=e,c.exports})}.call(this),function(){"function"!=typeof define||define.amd;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("session",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/session",["require","exports","module","lodash","./simpleEvent","./util"],a)}}).call(this,function(a,b,c){function d(a){"use strict";function b(){i("session has ended")}function c(){ka||b()}function d(){return!!la.length}function w(){ka&&(ha("updating cross-tab/window chat state"),g.cookie(g.constants.TRANSIENT_COOKIE_NAME,JSON.stringify({sessionId:ca,isAgentConnected:d()}),{path:"/",domain:g.getCookieDomain(),expires:new Date((new Date).getTime()+1e4)}),clearTimeout(aa),aa=setTimeout(w,5e3))}function x(){clearTimeout(aa),g.cookie(g.constants.TRANSIENT_COOKIE_NAME,"",{path:"/",domain:g.getCookieDomain(),expires:-1})}function y(){ea.write(e.extend(a.state,{lastIndex:ga})),x()}function z(){ha("binding session unload handlers"),window.addEventListener?(window.addEventListener("unload",y,!1),window.addEventListener("beforeunload",y,!1)):(window.attachEvent("onunload",y),window.attachEvent("onbeforeunload",y))}function A(){ha("unbinding state saving"),window.removeEventListener?(window.removeEventListener("unload",y,!1),window.removeEventListener("beforeunload",y,!1)):(window.detachEvent("onunload",y),window.detachEvent("onbeforeunload",y))}function B(a,b){ha("replaying transcript"),e.each(a,function(a){var c;a.type?c=na[a.type]:a.error&&(c=na[n]),c&&(a.restored=!!b,c.transportListener(a))})}function C(){return ja+"."+ca}function D(){$&&(ha("clearing history storage"),fa.removeItem(C()))}function E(){var a=new ia;return c(),ha("fetching history from server"),ba.getTranscript().done(function(b){ha("fetched history from server ",b),b&&b.transcript&&a.resolve(b.transcript)}),a}function F(a){var b;return e.each(a,function(a){a.index&&(b=a.index)}),b}function G(){var a,b,c=new ia;return $?(a=JSON.parse(fa.getItem(C())))&&a.length?(ha("history found in storage ("+a.length+" messages). Last index: "+e.last(a).index),(b=F(a))!==ga?(ha("history and state indexes do not match",b,ga),c.reject(),c):(h(function(){c.resolve(a)}),c)):(ha("no history found in storage"),c.reject(),c):(c.reject(),c)}function H(a){B(a,!0)}function I(){G().done(H).fail(function(){E().done(H)})}function J(){ha("session ended, clearing up"),A(),D(),ka=!1,la=[]}function K(){x(),J(),da.disconnect&&da.disconnect()}function L(a){la.push(a.party.id),w()}function M(a){la=e.without(la,a.party.id),w()}function N(a){var b={};return b[ma[a]]=!0,b}function O(a){return function(b){k(arguments,[{isa:"function"}]),ha("adding a callback for "+a),na[a].event.add(b)}}function P(a){var b={};return b[a.toLowerCase()]=!0,b}function Q(a){k(a,{party:{id:"number",name:"string"},index:"natural"})}function R(a){k(a,{content:"object",party:{id:"number",name:"string",type:"string"},index:"natural",timestamp:"number"}),e.contains(["Client","Agent","External","Supervisor"],a.party.type)||i("party.type is not recognized")}function S(a){k(a,{isTyping:"boolean",party:{id:"number",name:"string"},index:"natural"})}function T(a){k(a,{reason:{id:"natural",description:"string"}}),ma[a.reason.id]||i("unknown session end reason.id: "+a.reason.id)}function U(a){return{party:{id:a.party.id,name:a.party.name},index:a.index,timestamp:a.timestamp,restored:!!a.restored}}function V(a){return{content:a.content,timestamp:a.timestamp,index:a.index,restored:!!a.restored,party:{id:a.party.id,name:a.party.name,type:P(a.party.type)}}}function W(a){return{party:{id:a.party.id,name:a.party.name},isTyping:a.isTyping,index:a.index}}function X(a){return{reason:N(a.reason.id),restored:!!a.restored}}function Y(a){return a=a||{},{error:a.error||l().error,restored:!!a.restored}}function Z(a){var b=na[a];return e.each(b.innerListeners,function(a){b.event.add(a)}),function(c){if(ha('got "'+a+'" raw transport event ',JSON.stringify(c)),v)try{b.validate(c)}catch(b){return void na[n].event.fire(l({code:151,description:"Transport error in "+a+" event ("+b.message+")"}))}if(!1!==b.saveToHistory){if(c&&!c.restored&&ga>=c.index)return void ha("Event with index "+c.index+" was already processed, skipping");_(c),c.index&&(ga=c.index)}b.event.fire(b.filter(c))}}var $,_,aa,ba=this,ca=a.state.sessionId,da=a.transport,ea=a.stateStorage,fa=a.sessionStorage||window.sessionStorage,ga=a.state.lastIndex,ha=a.logger||g.noop,ia=g.Deferred,ja="com.genesys.chat",ka=!0,la=[],ma=[void 0,"leaveRequest","agent","error"],na={};$=function(){ha("testing sessionStorage support...");try{return fa.setItem(ja,ja),fa.removeItem(ja),ha("...supported"),!0}catch(a){return ha("...not supported"),!1}}(),_=function(){var a=[];return $?function(b){e.isArray(b)?a=a.concat(b):a.push(b),ha("saving history to storage ("+a.length+" messages). Last index: "+e.last(a).index),fa.setItem(C(),JSON.stringify(a))}:g.noop}(),this.sendMessage=function(a){var b,d;return c(),e.isString(a)&&(a={message:a,type:"text"}),k(a,{message:"string",type:"string"}),"text"!==a.type&&"url"!==a.type&&i('type must be "url" or "text"'),b=new ia,d={sessionId:ca,message:a.message,type:a.type},ha("sending message ",d),da.sendMessage(d).fail(m(b,ha)).done(function(){ha("sending message done"),b.resolve()}),j(b)},this.getTranscript=function(a){var b,d;return c(),a=a||{fromIndex:0},k(a,{fromIndex:"number"}),a&&a.fromIndex<0&&i('"fromIndex" must be >= 0'),b=new ia,d={sessionId:ca,fromIndex:a&&a.fromIndex||0},ha("sending getTranscript ",d),da.getTranscript(d).fail(m(b,ha)).done(function(a){if(ha("getTrasncript returned ",a),!a||!a.transcript)return void b.reject(l({description:"No transcript came from transport"}));b.resolve({transcript:a&&a.transcript})}),j(b)},this.sendTyping=function(a){var b,d={};return c(),a=a||{isTyping:!0},k(a,{isTyping:"boolean",typedText:{isa:"string",optional:!0}}),d.isTyping=a.isTyping,d.sessionId=ca,a.typedText&&(d.typedText=a.typedText),b=new ia,ha("sending sendTyping ",d),da.sendTyping(d).fail(m(b,ha)).done(function(){ha("sendTyping done"),b.resolve()}),j(b)},this.leave=function(){var a=new ia;return c(),J(),ha("sending leaveSession ",ca),da.leaveSession({sessionId:ca}).fail(m(a,ha)).done(function(b){ha("leaveSession done ",b),b&&b.transcript&&b.transcript.length&&(B(b.transcript,!1),_(b.transcript)),na[s].event.fire({reason:N(1),restored:!1}),a.resolve()}),j(a)},this.setUserData=function(a){var b,d;return c(),k({params:a},{params:"plainObject"}),b=new ia,d={userData:a,sessionId:ca},ha("sending setUserData",d),da.setUserData(d).fail(m(b,ha)).done(function(){ha("setUserData done"),b.resolve()}),j(b)},this.getUserData=function(a){var b,d;return c(),e.isString(a)||i("string key is required. Given: "+typeof a),b=new ia,d={keys:[a],sessionId:ca},ha("sending getUserData ",d),da.getUserData(d).fail(m(b,ha)).done(function(a){if(ha("getUserData done ",a),!(a&&a.userData))return void b.reject(l({description:"No userData came from transport"}));b.resolve({userData:a&&a.userData||{}})}),j(b)},this.deleteUserData=function(a){var b,d;return c(),e.isString(a)||i("string key is required. Given: "+typeof a),b=new ia,d={keys:[a],sessionId:ca},ha("sending deleteUserData ",d),da.deleteUserData(d).fail(m(b,ha)).done(function(){ha("deleteUserData done"),b.resolve()}),j(b)},na[o]={validate:Q,filter:U,event:new f,innerListeners:[L]},na[p]={validate:Q,filter:U,event:new f,innerListeners:[M]},na[r]={validate:R,filter:V,event:new f},na[q]={validate:S,filter:W,event:new f,saveToHistory:!1},na[s]={validate:T,filter:X,event:new f,innerListeners:[K]},na[t]={validate:g.noop,filter:g.noop,event:new f,saveToHistory:!1},na[u]={validate:g.noop,filter:g.noop,event:new f,saveToHistory:!1},na[n]={validate:g.noop,filter:Y,event:new f},e.each(na,function(a,b){a.transportListener=Z(b)}),da.onError(na[n].transportListener),da.onAgentConnected(na[o].transportListener),da.onAgentDisconnected(na[p].transportListener),da.onAgentTyping(na[q].transportListener),da.onMessageReceived(na[r].transportListener),da.onSessionEnded(na[s].transportListener),da.onInterrupted&&da.onInterrupted(na[t].transportListener),da.onContinued&&da.onContinued(na[u].transportListener),this.onError=O(n),this.onAgentConnected=O(o),this.onAgentDisconnected=O(p),this.onAgentTyping=O(q),this.onMessageReceived=O(r),this.onSessionEnded=O(s),this.onInterrupted=O(t),this.onContinued=O(u),this.isAgentConnected=d,z(),w(),0!==ga&&I()}var e=a("lodash"),f=a("./simpleEvent"),g=a("./util"),h=g.defer,i=g.throwError,j=g.getSimplePromise,k=g.validateObject,l=g.createErrorEvent,m=g.createTransportFailureResolver,n="Error",o="AgentConnected",p="AgentDisconnected",q="AgentTyping",r="MessageReceived",s="SessionEnded",t="Interrupted",u="Continued",v=!0;return c.exports=d,c.exports})}.call(this),function(){"function"!=typeof define||define.amd;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("helpers/apiWrapper",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/helpers/apiWrapper",["require","exports","module","../cometdTransport","../htccRestTransport","../stateStorage","./jQueryCometdWrapper","../chat","../session","lodash"],a)}}).call(this,function(a,b,c){var d=a("../cometdTransport"),e=a("../htccRestTransport"),f=a("../stateStorage"),g=a("./jQueryCometdWrapper"),h=a("../chat"),i=a("../session");a("lodash");return c.exports=new h(f,i,{CometDTransport:d,HtccTransport:e},g.Cometd,g.ReloadExtension),c.exports})}.call(this),function(){"function"!=typeof define||define.amd;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("helpers/widgetWrapper",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/helpers/widgetWrapper",["require","exports","module","../ui/chatInitializer","../ui/chatController","../paramsConverter","./apiWrapper"],a)}}).call(this,function(a,b,c){var d=a("../ui/chatInitializer"),e=a("../ui/chatController"),f=a("../paramsConverter"),g=a("./apiWrapper");return c.exports=new d(f,e,g),c.exports})}.call(this),define("chat/commonChatWrapper",["jquery","underscore","./common/umd/helpers/widgetWrapper","./common/umd/util"],function(a,b,c,d){"use strict";function e(b,e,f){var g=d.getCookieDomain(),h=a.Deferred(),i={embedded:!0,debug:b.debug,debugCometd:!1,logger:e,localization:b.localization,cookieDomain:b.cookieDomain||g,maxOfflineDuration:b.maxOfflineDuration,ui:{onBeforeWrapper:b.ui.onBeforeWrapper,onBeforeMessage:b.ui.onBeforeMessage,onBeforeChat:b.ui.onBeforeChat},templates:b.templates},j=function(a){a.serverUrl||a.transport||(a.serverUrl=f)},k={startChat:function(d){var e=a.extend(!0,{},i,b,d);return j(e),c.startChat(e)},restoreChat:function(b){return c.onRestorationComplete(h.resolve),c.restoreChat(a.extend(!0,{},i,b))},getTransientSessionAPI:function(){var d=a.extend(!0,{},i,b);return j(d),c.getTransientSessionAPI(d)},onRestorationComplete:h.done,getPublicAPI:function(){var b=a.extend({},c,{startChat:this.startChat,restoreChat:this.restoreChat});return delete b.startChatInThisWindow,delete b.getTransientSessionAPI,delete b.onRestorationComplete,delete b.onRemoteSession,delete b.onStarted,delete b.onEnded,b},onStarted:c.onStarted,onEnded:c.onEnded,onRemoteSession:c.onRemoteSession};return!1!==b.autoRestore&&k.restoreChat().done(function(){e("CB chat wrapper: chat successfully restored")}).fail(function(a){e("CB chat wrapper: chat failed to restore: ",a)}),k}return e}),define("chat/adapter/commonChatAdapter",[],function(){"use strict";function a(a,b){return{initializeAsync:function(b){a.onRestorationComplete(b)},isAgentConnected:function(){var b=a.getTransientSessionAPI();return!!b&&b.isAgentConnected()},sendCbSessionToken:function(c){return a.getTransientSessionAPI().sendMessage("{start:"+c+"}").done(function(){b("Common Chat Adapter: CB session token successfully sent")}).fail(function(a){b("Common Chat Adapter: sending CB session token FAILED ",a)})}}}return a}),define("dummy",[],function(){"use strict"}),define("integration/integration",["jquery","underscore","signals"],function(a,b,c){"use strict";function d(d,e,f,g,h){function i(a){return b.isObject(a)&&b.isFunction(a.isAgentConnected)&&b.isFunction(a.sendCbSessionToken)}function j(a){d("integration: cobrowse start detected."),h.isAgentConnected()&&(d("integration: cobrowse is connected to primary media. sending token: ",a.token),h.sendCbSessionToken(a.token))}function k(){var a,b;if(!f)return void d("integration: cobrowse is not configured. quitting.");a=i(h),b=!!a&&h.isAgentConnected(),d("integration: startCobrowse called. Integration supported? ",a),a&&f.onSessionStarted.addOnce(j),q.dispatch(a,b)}function l(b){var c;if(d("integration: startChat called. Chat is: ",e),e)return g?(c=a.Deferred(),d("integration: getting IDs from tracker..."),g.push(["getIDs",function(f){d("integration: got IDs from tracker, starting chat"),e.startChat(a.extend(!0,b||{},{userData:{visitID:f.visitID,pageID:f.pageID}})).done(c.resolve).fail(c.reject)}]),c.promise()):(d("integration: there is no tracker, starting chat"),e.startChat(b))}function m(a){h&&h.initializeAsync?h.initializeAsync(a):a()}function n(){d("integration: initializing primary media: ",h),m(function(){d("integration: initialized primary media"),f?(d("integration: waiting for cobrowse"),f.onInitialized.add(r.dispatch)):r.dispatch(null)})}function o(){var a=new c,b=!1,d=!1;return e&&(e.onRemoteSession(function(c){b=c,a.dispatch(c||d)}),e.onStarted(function(){d=!0,a.dispatch(!0)}),e.onEnded(function(){d=!1,a.dispatch(b)})),a}var p=this,q=new c,r=new c;r.memorize=!0,b.extend(p,{VERSION:"851.2.2",onCobrowseRequested:q,onInitialized:r,onHasChat:o(),startCobrowse:k,startChat:l,init:n})}return d}),define("integration/lib/localizationLoader",["jquery","underscore"],function(a,b){"use strict";function c(c){function d(a){throw c("Failed to load localization from "+a),new Error("Co-browse failed to load localization from "+a)}function e(a){return function(b){c("L18N provided via async function: ",b),a.resolve(b)}}function f(f){var g,h=[],i=a.Deferred();b.isArray(f)||(f=[f]),c("Preparing localization from "+f.length+" sources...");for(var j=0;j<f.length;j++)g=f[j],b.isString(g)?(c("L18N source interpreted as JSONP URL: "+g+". Loading..."),h[j]=a.ajax({dataType:"jsonp",cache:!0,url:g}).fail(b.partial(d,g))):b.isFunction(g)?0===g.length?(g=g(),c("L18N source interpreted as synchronous function (expects no arguments). Using its return value: "+g),h[j]=g):(c('L18N source interpreted as asynchronous function. Providing "done" callback as first argument and waiting for it to be called...'),h[j]=a.Deferred(),g(e(h[j]))):b.isObject(g)&&(c("L18N source interpreted as an object, using it as is : "+g),h[j]=g);return a.when.apply(a,h).done(function(){var a=[].slice.call(arguments);c("Localization prepared."),a=b.map(a,function(a){return b.isArray(a)?a[0]:a}),i.resolve.apply(i,a)}),i.promise()}c=c||a.noop,this.load=f}return c}),define("integration/lib/buttons",["jquery","underscore","signals"],function(a,b,c){"use strict";function d(d,e){function f(){var c=a(b.isFunction(d.cobrowse)?d.cobrowse():'<div class="gcb-startCobrowse"/>');return e(c[0]),c.on("click.gcbIntegration",o.dispatch),c}function g(){var c=a(b.isFunction(d.chat)?d.chat():'<div class="gcb-startChat"/>');return e(c[0]),c.on("click.gcbIntegration",p.dispatch),c}function h(){n=a('<div class="gcb-startBtnsContainer" />'),m&&(n.append(m),n.addClass("gcb-hasChatBtn")),l&&(n.append(l),n.addClass("gcb-hasCobrowseBtn")),"right"===d.position&&n.addClass("gcb-right"),n.appendTo("body")}function i(){d.cobrowse&&!l&&(l=f()),d.chat&&!m&&(m=g()),n||h()}function j(a){if(i(),!a.cobrowse&&!a.chat)return void k();n.show(),l&&l[a.cobrowse?"show":"hide"](),m&&m[a.chat?"show":"hide"]()}function k(){l&&l.hide(),m&&m.hide(),n&&n.hide()}var l,m,n,o=new c,p=new c;return e||(e=a.noop),{show:j,onCobrowseClicked:o,onChatClicked:p}}return d}),define("integration/preCobrowseController",["signals"],function(a){"use strict";function b(b,c,d,e,f,g,h){function i(){return!!d.isBrowserSupported()||(g(h.browserUnsupported),!1)}function j(a){e&&e.setStartMessage(a.autoConnect?h.sessionStartedAutoConnect:null),d.startSession(),k()}function k(){b("pre-cobrowse ui: cobrowse session started"),o=!0,n.cobrowseStarted.dispatch()}function l(){b("pre-cobrowse ui: cobrowse session ended"),o=!1,n.cobrowseEnded.dispatch()}function m(a,c){return b("pre-cobrowse ui: cobrowse requested. integration supported: ",a," agent connected: ",c),i()?o?void b("pre-cobrowse ui: cobrowse in progress, quitting"):void(a?c?j({autoConnect:!0}):f(h.areYouOnPhone,function(a){a?j({autoConnect:!1}):g(h.connectBeforeCobrowse)}):f(h.areYouOnPhoneOrChat,function(a){a?j({autoConnect:!1}):g(h.connectBeforeCobrowse)})):void b("pre-cobrowse ui: unsupported browser, quitting")}var n={cobrowseStarted:new a,cobrowseEnded:new a},o=!1;return c.onCobrowseRequested.add(m),c.onInitialized.add(function(){b("pre-cobrowse ui: primary media initialized, adding cobrowse callbacks"),d.onSessionStarted.add(k),d.onSessionEnded.add(l)}),{on:n}}return b}),define("integration/integrationController",["jquery","underscore","smoke","./lib/localizationLoader","./lib/buttons","./preCobrowseController","nls"],function(a,b,c,d,e,f,g){"use strict";function h(h,i,j,k,l){function m(a,c){var d=b.extend(g,a,c);i("integration ui: localization loaded. Final localization: ",d),x.resolve(d)}function n(){new d(i).load([h.cobrowse&&h.cobrowse.localization,h.localization]).done(m)}function o(){var a={cobrowse:!y,chat:!(y||z)};i("integration ui: updating buttons state ",a),w.show(a)}function p(){i("integration ui: cobrowse btn clicked"),x.done(function(){j.startCobrowse()})}function q(){i("integration ui: chat btn clicked"),j.startChat().fail(function(a){x.done(function(b){a.error&&201===a.error.code&&v(b.chatIsAlreadyRunning)})})}var r,s,t,u,v,w=new e(h.buttons||{},k&&k.markServiceElement),x=a.Deferred(),y=!1,z=!1;t=function(a){h.cobrowse.disableBuiltInUI||(i("integration ui: initializing built-in cobrowse ui"),s=new l(k,a)),i('integration ui: initializing "pre-cobrowse" ui'),r=new f(i,j,k,s,u,v,a),r.on.cobrowseStarted.add(function(){y=!0,o()}),r.on.cobrowseEnded.add(function(){y=!1,o()})},t=b.once(t),w.onChatClicked.add(q),w.onCobrowseClicked.add(p),j.onInitialized.add(function(a){i("integration ui: integration initialized. has cobrowse session: ",!!a),y=!!a,o()}),j.onHasChat.add(function(a){i("integration ui: onHasChat fired with: ",a),z=a,o()}),x.done(function(a){u=function(b,d){c.confirm(b,d,{ok:a.modalYes,cancel:a.modalNo})},v=function(a){c.alert(a)},c.title=a.modalTitle,k&&t(a)}),i("initializing built-in integration UI"),n()}return h}),define("integration/initialization",["jquery","underscore","cb/lib/log","cb/lib/contexts","./lib/config","cb/integrationEntryPoint","cb/ui/master/topmostMasterUi","chat/commonChatWrapper","chat/adapter/commonChatAdapter","tracker/trackerApplicationModule","integration/integration","integration/integrationController"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(b){return!0===b?c:a.noop}function n(a){return m(a.debug)}function o(a){return m(e.getCobrowseDebugValue(a))}function p(a){return window[a]}function q(a,c,d,e){function f(a){a.apply(null,e)}var g=d?c[d]:c,h=g.onReady,i=b.isArray(h)?h:b.isFunction(h)?[g.onReady]:[];b.forEach(i,f),d&&b.isUndefined(a[d])&&(a[d]={}),(d?a[d]:a).onReady={push:f}}function r(a,b,c,d,e,f,g){function h(){q(c,b,null,[{cobrowse:e&&b.cobrowse?e:null,chat:d&&b.chat?d:null,integration:g},x])}g&&(a("EXPOSING ALL VERSIONS TO GLOBAL NAMESPACE"),c.version=c.VERSION=g.VERSION,a("INTEGRATED APP VERSION: "+g.VERSION)),e&&b.cobrowse&&(a("CO-BROWSE VERSION: "+e.VERSION),c.cobrowse=c.cobrowse||{},c.cobrowse.VERSION=e.VERSION,a("CO-BROWSE TOP CONTEXT API INITIALIZED: FIRING ONREADY"),q(c,b,"cobrowse",[e,x])),d&&b.chat&&(a("CHAT VERSION: "+d.VERSION),c.chat=c.chat||{},c.chat.VERSION=d.VERSION,a("BUILT-IN CHAT API INITIALIZED: FIRING ONREADY"),q(c,b,"chat",[d])),f&&(c.tracker=c.tracker||{},c.tracker.VERSION="850.1.39",a("TRACKER VERSION: "+c.tracker.VERSION)),x?g.onInitialized.add(function(){a("INTEGRATION INITIALIZED: FIRING GLOBAL ONREADY"),h()}):(a("EVERYTHING INITIALIZED: FIRING GLOBAL ONREADY"),h())}function s(a,c,d,m){var n,o,p,q,s,t,u;a.cobrowse&&(n=f.initTopmostApp(a.cobrowse,m)),a.chat&&(d("INITIALIZING BUILT-IN CHAT"),s=new h(e.getIntegratedChatConfig(a,n),d,w),t=new i(s,d)),b.isNull(a.tracker)?j&&(p=j):p=a.tracker,d("INITIALIZING INTEGRATION"),q=new k(d,s,n,p,a.cobrowse.primaryMedia||t),new l(a,d,q,n,g),q.init(),s&&(d("substituting startChat() with pre-integrated method"),u=s.getPublicAPI(),u.startChat=q.startChat),n&&(d("substituting cobrowse.startSession() with pre-integrated method"),o=b.extend({},n,{startSession:q.startCobrowse})),r(d,a,c,s&&u,n&&o,p,q)}function t(a,b,c,d){a.cobrowse&&f.initChildApp(a.cobrowse,d).done(function(d){c("CO-BROWSE CHILD CONTEXT API INITIALIZED: FIRING ONREADY"),r(c,a,b,null,d,null,null)})}function u(b,c){c("CO-BROWSE THEME IS: ",b),"old-yellow"===b&&a("body").attr("gcboldtheme",!0)}function v(a,b){var c,d,g,h,i;if(w=b,window[a]?g=window[a]:window[a]=g={},c=p(a)||{},d=e.extendConfig(c),f||(d.cobrowse=!1,d.buttons.cobrowse=!1),h=n(d),i=o(d),h("EFFECTIVE CONFIG: ",d),window.external&&window.external.isGenesysTrackerDisable||window.name&&"disableWebme"===window.name)return void h("WEBME SUITE IS DISABLED; STOPPING INITIALIZATION");x?s(d,g,h,i):t(d,g,h,i),u(d.cobrowse.theme,h)}var w,x=d.isTopContext();return{initialize:v}}),function(){var a='.gcb-toolbar-exit:not(.gcb-disabled):active svg path,.gcb-toolbar-exit:not(.gcb-disabled):hover svg path{fill:#fdfdfd}.gcb-appStatus,.gcb-smoke-base .gcb-dialog{-webkit-box-sizing:border-box;-moz-box-sizing:border-box}.gcb-startBtnsContainer{position:fixed;left:0;top:50%;z-index:7426170}.gcb-startBtnsContainer.gcb-right{left:auto;right:0}.gcb-startBtnsContainer.gcb-hasCobrowseBtn{width:24px;height:105px;margin-top:-53px}.gcb-startBtnsContainer.gcb-hasChatBtn{width:24px;height:83px;margin-top:-42px}.gcb-startBtnsContainer.gcb-hasCobrowseBtn.gcb-hasChatBtn{height:208px;margin-top:-104px}.gcb-startChat{width:24px;height:83px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAABTCAMAAACyNjdlAAAAMFBMVEXjszvluEjnvVXpwmLqx2/szHzu0Ynw1pby3KT04bH25r7468v58Nj79eX9+vL///+hSEsKAAABH0lEQVR4Ae2TwW5EIQhFeagiKvD/Xzt9NbWNA100k+7mxITFDV5QyPDmN65rBXSC8JKVvLDDQa0y6g3ZmYG26XCCKIyfhFXFYJdFeRaGsg2ekp4TjO4DqNkJFYR9H6vlMe/QnEeHpKKaICBxixqpC6eQ2qI6857cm+xyYyZDwG3KSt4cbRGY48aZt/YVCQ5o30CWDmHMn7f0sxONj4zvjFNomrdHOQQUbRmxsA04wWmL7v8jN2bK8ALpFSFneFz4gKBghmbuiimZOdhBNAKOZ3cJ0ewKMl9k2ZvrjVFQd4kfS4TiZktXG/WKpKsMVcZQqhLNdma14asisdh+9vynf6xQarScbCjhflx4n8WR4Xb0X4TKmyeBbePKdevsePMBMlgPFfbCzwYAAAAASUVORK5CYII=);cursor:pointer}.gcb-startChat:hover{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAABTCAMAAACyNjdlAAAAMFBMVEX7tw37vB38wS38xT38yk78z1791G792X793Y794p7+567+7L7+8c/+9d//+u////8x05YEAAABH0lEQVR4Ae3T4YoEIQgAYLOyrNT3f9q92eFiqVzgWO7ffgw0IKGGJvh6JwR4QtgJ32EtZ2AeCyLpdCm23kCbGqwQhfHJr8qFTW4ZNl3ZOg+JsEIr1weo6QgQCG99zJb7uI565GgQVVQjOCJXrxG6HZGidqMjeYv4BE65vsHgICLWciZHm/bk+AKrWn/PAotiNH/WJ+nj9ZbO7DjjIx3mjTVQNc0ceS1XtCbEzNZhhcNuDWGXKnNJ8IH4SSAleAR8gFMwQ7UImyGJ2dlBtAL8bnaZ3dkVZA7F0plcL1acurP/WCLFbzY3tU4BHCF3VUY3ROLNdmK1flZVxPz0oyX4g0iQyVtONhR3PwJe340QXGj0XwHiaQvwu3UOyzr7vn4AMlgPFee43A8AAAAASUVORK5CYII=)}.gcb-right .gcb-startChat{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAABTCAMAAACyNjdlAAAAMFBMVEX7tw3////8wS394p7+9d//+u/92X791G7+7L78xT393Y7+8c/+5678yk77vB38z169gYh8AAABGklEQVR4Xu2TO27EMAxE+ddfvv9ts9HGBizSRYqk2tfIwECYGVqERz7QxbwJCS94E/gkbQLByV8JlM6sD3GFkLcbbw5IBX7B6A08xQTFnGAZlUfUQ9IMe7BqPkJppozaD4DYXoKoxnyAb2eoLxq5amiTmSTvQtUJzGC6B2OBJbjfYuvGkOaSYgVG9OZAE0oa8H/4YVVvTx0XLnBGPohGVbkrBxoshtabwNf0srghnl9uiG9a3oZo5z4Y3LAfz1of15me1hnJ74cpvw4I4AbPOxqZl77qBOZqfp0XExxUuUBAURUt0MO32/LT25Ug7lACQzInFGmckdV5HLLoBDEzKvINC+0mPf4dYGjpRZaUXI/zcDsYC0BbKseHLz5JCC0m86LjAAAAAElFTkSuQmCC)}.gcb-right .gcb-startChat:hover{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAABTCAMAAACyNjdlAAAAMFBMVEXjszv////nvVX04bH79eX9+vLw1pbu0Yn468vpwmLy3KT58Nj25r7qx2/luEjszHxF0uAiAAABGklEQVR4Xu2TO27EMAxE+ddfvv9ts9HGBizSRYqk2tfIwECYGVqERz7QxbwJCS94E/gkbQLByV8JlM6sD3GFkLcbbw5IBX7B6A08xQTFnGAZlUfUQ9IMe7BqPkJppozaD4DYXoKoxnyAb2eoLxq5amiTmSTvQtUJzGC6B2OBJbjfYuvGkOaSYgVG9OZAE0oa8H/4YVVvTx0XLnBGPohGVbkrBxoshtabwNf0srghnl9uiG9a3oZo5z4Y3LAfz1of15me1hnJ74cpvw4I4AbPOxqZl77qBOZqfp0XExxUuUBAURUt0MO32/LT25Ug7lACQzInFGmckdV5HLLoBDEzKvINC+0mPf4dYGjpRZaUXI/zcDsYC0BbKseHLz5JCC0m86LjAAAAAElFTkSuQmCC)}.gcb-startCobrowse{width:24px;height:105px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAABpCAMAAAAX1xOuAAAAMFBMVEXjszvluEjnvVXpwmLqx2/szHzu0Ynw1pby3KT04bH25r7468v58Nj79eX9+vL///+hSEsKAAABY0lEQVR4Ae3U0a4cIQgG4F8U1FHg/d+2261po5K0m/aqOd/NmCAiExVfPsfyAyfs1Bcr2MxGL33SY1sOueAle8nOe6Cu+Jry09ACpO6Z9wzQdFXziqoJO+69FnwgyRvhUM3f5JxvT6bvsOwNRmZHrFmNi6vHxZGIguJZwBL10Z3ipRLFS60YIIzLmMB0f64Eq2DnbDX4Jc0StAcZc+AOoJm6QJxxeEwrUBtOTd1m44Rblq5mjFtp6ppx4KY+o+OjroJIrtNnK4hjw+4aSKU+6veuurmNWhJOz93ckiQ+7aTrfpymZiBV5zNhzdX+pwGMcKmg+O+3y4yYKmLVEkJs/e9v1CKP6pCguGvvw4Jr0PHCLohfBu2IXwZte2GRbvJSvezrLFcf9AtuSRkhcvlXAQj9v0e0tfU9MqoL1iBfL+U6E3uK9mtE2wcpHbVtbefsg9RaIeLuAzua/vZQ8O6t/j725Rsf5hIoOirx7QAAAABJRU5ErkJggg==);cursor:pointer}.gcb-startCobrowse:hover{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAABpCAMAAAAX1xOuAAAAMFBMVEX7tw37vB38wS38xT38yk78z1791G792X793Y794p7+567+7L7+8c/+9d//+u////8x05YEAAABY0lEQVR4Ae3U0a4cIQgG4F8U1FHg/d+2261po5K0m/aqOd/NmCAiExVfPsfyAyfs1Bcr2MxGL33SY1sOueAle8nOe6Cu+Jry09ACpO6Z9wzQdFXziqoJO+69FnwgyRvhUM3f5JxvT6bvsOwNRmZHrFmNi6vHxZGIguJZwBL10Z3ipRLFS60YIIzLmMB0f64Eq2DnbDX4Jc0StAcZc+AOoJm6QJxxeEwrUBtOTd1m44Rblq5mjFtp6ppx4KY+o+OjroJIrtNnK4hjw+4aSKU+6veuurmNWhJOz93ckiQ+7aTrfpymZiBV5zNhzdX+pwGMcKmg+O+3y4yYKmLVEkJs/e9v1CKP6pCguGvvw4Jr0PHCLohfBu2IXwZte2GRbvJSvezrLFcf9AtuSRkhcvlXAQj9v0e0tfU9MqoL1iBfL+U6E3uK9mtE2wcpHbVtbefsg9RaIeLuAzua/vZQ8O6t/j725Rsf5hIoOirx7QAAAABJRU5ErkJggg==)}.gcb-right .gcb-startCobrowse{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAABpCAMAAAAX1xOuAAAAMFBMVEXjszv////79eX9+vLw1pbszHzu0YnnvVXluEj04bHy3KTqx2/pwmL58Nj468v25r66x0TOAAABYElEQVR4Ae2VS04gMQxE/Y/zv/9tB0YBFONGYsRqxFu1VHLKlcRp+Bd+6VJr6xApG/8ySxAWVi2lN6ZbUZSzILdLqOxvpXQLFL8O8l4x1yWMNw9DgQs5nq1l+czhE4JMhCfEncMBBi0IVDp15VnIl5pfm6ftJhSDHMPyU4KSZ84fhGU+uJSOYi9wNbubbgSv1JnvbtKYob7dosDmVSuhJPEW0bbHHA6HmIMgUOyVygopzgI5RJCjCvD/XlFwbRsi3mUxcoWAMtKW7hAZxEsGZPQ2cT5oRkhZuxOp6WcPpNazE2KmaiMPNxmpQaQJgBBvCCgaGBK37KDWPA9dEJxbMgbCQ1GTCtiI87yUATUAKP48BsXzMShYkzEwU7DxIxMl3CCnzq8eucR8bPbcnCU3N//u/1HhxknOfMz4E9SB1QE6rdi9YUlmUHF0HElA511mLS+0GTpifNhd1/eD+uXb/AGhZAxjYImtOQAAAABJRU5ErkJggg==)}.gcb-right .gcb-startCobrowse:hover{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAABpCAMAAAAX1xOuAAAAMFBMVEX7tw3////+9d//+u/92X78z1791G78wS37vB394p793Y78yk78xT3+8c/+7L7+5660THsCAAABYElEQVR4Ae2VS04gMQxE/Y/zv/9tB0YBFONGYsRqxFu1VHLKlcRp+Bd+6VJr6xApG/8ySxAWVi2lN6ZbUZSzILdLqOxvpXQLFL8O8l4x1yWMNw9DgQs5nq1l+czhE4JMhCfEncMBBi0IVDp15VnIl5pfm6ftJhSDHMPyU4KSZ84fhGU+uJSOYi9wNbubbgSv1JnvbtKYob7dosDmVSuhJPEW0bbHHA6HmIMgUOyVygopzgI5RJCjCvD/XlFwbRsi3mUxcoWAMtKW7hAZxEsGZPQ2cT5oRkhZuxOp6WcPpNazE2KmaiMPNxmpQaQJgBBvCCgaGBK37KDWPA9dEJxbMgbCQ1GTCtiI87yUATUAKP48BsXzMShYkzEwU7DxIxMl3CCnzq8eucR8bPbcnCU3N//u/1HhxknOfMz4E9SB1QE6rdi9YUlmUHF0HElA511mLS+0GTpifNhd1/eD+uXb/AGhZAxjYImtOQAAAABJRU5ErkJggg==)}.gcb-startChat+.gcb-startCobrowse{margin-top:20px}.gcb-toolbar{position:fixed;top:50px;left:50px;background:#3a4045;color:#fdfdfd;border-radius:2px;font-size:12px;font-family:Roboto,Helvetica Neue,Helvetica,Arial,sans-serif;box-shadow:rgba(0,0,0,.172549) 0 4px 7px;z-index:9999999999}body[gcboldtheme] .gcb-toolbar{height:43px;background:#fff;color:#000;font-size:11px;font-family:Tahoma,sans-serif;border:1px solid #e3b33b;box-shadow:2px 2px 1px 0 rgba(0,0,0,.3)}.gcb-toolbar-top{border-bottom:1px solid #333;padding-bottom:3px;border-radius:2px}body[gcboldtheme] .gcb-toolbar-top{height:7px;background:#e3b33b;padding-bottom:0;border-radius:0;border-bottom:0}.gcb-drag-handle{cursor:move}.gcb-dragged{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.gcb-toolbar-grips{background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSczMicgaGVpZ2h0PSczMic+CjxwYXRoIHN0eWxlPSJmaWxsOiM5OGE3Yjg7IiBkPSJNMTYgMTR2LTRoNHY0aC00ek04IDE0di00aDR2NGgtNHpNMCAxNHYtNGg0djRoLTR6TTE2IDIydi00aDR2NGgtNHpNOCAyMnYtNGg0djRoLTR6TTAgMjJ2LTRoNHY0aC00eiIgLz4KCjwvc3ZnPg==) no-repeat;background-size:16px;width:16px;height:11px;margin:0 auto;position:relative}body[gcboldtheme] .gcb-toolbar-grips{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAICAIAAAB/FOjAAAAAHElEQVR4AWN4vNmaJMTw//9/CItIxojUQHKwAgCY9hLAprGf5gAAAABJRU5ErkJggg==) no-repeat;background-size:auto;height:8px;top:-1px}.gcb-toolbar-content{display:table;padding:0 13px 4px 18px;font-size:12px}body[gcboldtheme] .gcb-toolbar-content{padding:1px 12px 4px;font-size:9pt}.gcb-toolbar-with-logo .gcb-toolbar-content{padding:0 13px 4px 32px;background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSczMicgaGVpZ2h0PSczMic+CjxwYXRoIHN0eWxlPSJmaWxsOiM5OEE3Qjg7IiBkPSJNMzEuODEzIDI0LjEyNWMwLjU2MyA0LjA2My02LjUgNy4zNzUtMTUgNy41NjMtNi4xMjUgMC4xMjUtMTMuNjI1LTEuNjg4LTE2LjEyNS01LjkzOC0wLjQzOC0wLjY4OC0xLTIuNjg4LTAuNDM4LTMuODEzIDEuOTM4IDUuMTI1IDEwLjc1IDYuODc1IDE2LjUgNi43NSA2LjYyNS0wLjE4OCAxNS43NS0yLjY4OCAxMy44NzUtNi41IDAuODEzIDAuNTYzIDEuMDYzIDEuMTI1IDEuMTg4IDEuOTM4ek0xNy4xODggMTguNzVjLTExLjU2My0wLjEyNS0xNy4xMjUtNS0xNy4xODgtOS4yNS0wLjEyNS00Ljg3NSA2LjY4OC04LjA2MyAxNi43NS04LjA2MyA0LjMxMyAwIDcuNTYzIDEuMTI1IDkuMjUgMS44MTMgMC41IDAuMjUgMC40MzggMC41LTAuMTg4IDAuMjUtMy4yNS0xLjI1LTUuMzc1LTEuNTYzLTkuMTI1LTEuNjI1LTUuMzc1LTAuMTI1LTE1LjE4OCAyLTE0LjgxMyA3LjUgMC4xODggMi42ODggNS41NjMgNi40MzggMTUuMzc1IDYuMzEzIDMuNjg4IDAgNi4zNzUtMC41IDguODEzLTEuNTYzIDAuMjUgMSAwLjE4OCAyLjM3NS0wLjI1IDIuNjg4LTAuNDM4IDAuNTYzLTEuOTM4IDEtMi41NjMgMS4xMjUtMS44MTMgMC4zNzUtMy45MzggMC43NS02LjA2MyAwLjgxM3pNNi4zNzUgMTEuNzVjNy4yNS00LjQzOCAyNC4zMTMtMy4xODggMjUuMzEzIDUuMTI1IDAuNjI1IDQuODc1LTYuMjUgOC4yNS0xNSA4LjQzOC00LjUgMC4xMjUtMTIuNzUtMS4xMjUtMTYtNi4xODgtMC41LTAuODc1LTEtMi44MTMtMC40MzgtNCAxLjYyNSA0Ljc1IDEwLjQzOCA3LjM3NSAxNi4zNzUgNy4yNSAyMC45MzgtMC41IDE0LjEyNS0xMy4yNS0wLjE4OC0xMi42ODgtNC4zNzUgMC4yNS01LjY4OCAwLjQzOC05Ljg3NSAyLjI1LTAuNjI1IDAuMzEzLTAuNDM4IDAtMC4xODgtMC4xODh6IiAvPgo8L3N2Zz4=) 8px 8px no-repeat;background-size:16px}.gcb-toolbar-cell{display:table-cell;vertical-align:middle}.gcb-toolbar-cell-content{padding-right:12px;white-space:nowrap}.gcb-toolbar-exit{cursor:pointer;border:1px solid transparent;border-radius:2px}.gcb-toolbar-exit.gcb-disabled{cursor:default}body[gcboldtheme] .gcb-toolbar-exit:not(.gcb-disabled):hover{border-color:#88919D}body[gcboldtheme] .gcb-toolbar-exit svg{display:none}body[gcboldtheme] .gcb-toolbar-exit:not(.gcb-disabled):active{border-color:#88919D;background:#96A2B0}.gcb-toolbar-exit svg path{fill:#98a7b8}.gcb-toolbar-icon-exit{width:32px;height:32px;transform:scale(.75)}body[gcboldtheme] .gcb-toolbar-icon-exit{transform:none;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAHq0lEQVR4Xu2UeVBU2RnFGZNKKnEiqkMvr2l2GmTXQXGDQckoErcYFFRaGppVZWsUHFE2QVFEdgHZI4hou4OKqJIGZSbiiIOYAdndANl3GuiTm5fUVGamHKDGP/2qTtW93z31zu/er7pnyH2sj5qGdmeI5wuTJCE20WUSu/iHbR6ZFRN7MiqkW6PLXu6If3jDPe2Rz/6zlewPHrwjWW/ZhkirUkHCA1nG/QZUNvega1CKkXEZ0QTa+kbwoLYDJwu/h03Mg1HbmNKUXen3PvvVwR75qp9sS9IMdMlljrvmMXDzyXU0DcrwpFsGSbsMd1snaD3okKGqV4a3IzI0dfUh8XYtNh6XtG2NTvryVwFsjuWlBBQxUSbVwrU2ZfDTTJBa+T3EzeO42DJBNI4zNa+R8awWF5qkyHrehG0pPEQWiRBZeAbWURellkHL9mwO057+z902ebG//w0WJCP6KB6wRMnIUmTWKMI+m4Jb3k54X/LGrnx7sleBcx4L3uJ9yKkdguPf1yP4Hguia0xsO60K13zGxALbefxphdulLTTmZ3Olxf083Opbgxu964iscHvADCXDOshtUsKZBi5yGpVAPJCMasAhRxEnHz5B/ONaAqWD4j4u3b/dpwrrU6xuo02zVaYMsPq4gSS7kUtCzXCtay2tm30rUDxkhFv9S1HQY4GCbgsU9pijaGAx7o/ykPiMgiBLgNPPh8gL3ILLeQ7uDM8n/iWI/44Dfb5C5kqPuZOPYkuK8RLHc5SsaFAXl999iSsdq3CjfwFS6ziwz1VESi2HAJniaucXKOjVQJCEDbtsdfDP/OemaxBb0YlT1aMQ5vnh8EM2CnuNUTTEw1+TqWHt1fKTv4LFsQVxkZUUrnYvRMGANnLfKuGrEjY2xv8ZvuIL8L5FPjqoBXGnCmyzleCUFYKI+zU4VtqAE+VtiK8aRdwzKQ6WlGNrFgtXepVxc0gDBwmo+loF0aQAy8L1n+d3cSHuVoZ1pjLWx1nDMTsGYSXNOFL+Ag5iCtHPKWxI1obXuVzEfdtHbixFYvUY4qrGEPPdGE48lSL8UQ925kTBKmEpQr6hcLqJgo4999KkAGuTNMauDHEQ9oSNdfGOCJR04OjjYURWShFVOQzrdAeYR+nC/6oEsZWDSL34NXJVVJHuF0EHH3tCwr+VIrSCvMLXIxDda8c+gTkyNeWxxUG1cVKADRkqOD/Ihvd9NjalhMNenA2bnFD4S9oR9M9RHHrYC8/rj8mtBhGdV47zWhpoiw1E6TpTJHqHwbP4MXZeSIevpA++ZaM47heHu+bGaI09iDwNSnbdkGf6iwBW6arI7uEgtIoFk2P6sDnPgdc/WDCNtgL/ag2c7w7DhcgvuQxneRp4c1KErrRwdJ4+BAmBCNhhBfN4RVgkeiDUJwrFJLwjJYD2vIkWIV+F6r/EU30/hFmc1lhKOwex9epIbqOQ+EoJiS+Vse8REyZR2jA/5QObKw2I09TDqwNueBe5F60JrniX7EdDlBCIaF8KBz05KFpJhxP50x7ixasAN6R+OrPuvQA6AQv/deIlAyHlOggu00VwqR6CH+jiWLUa4lqZ8PqGicUnF8LDxRcFurpod3dHW5AbCXD5AeLeejPcXLno/8JdaA/xokBPD1lMBa/3AujuNz7lXs5EUIUavrqr/SMdKNFC6FNlBDcoYPkpLbjtFOCqnh4N0XrIlYxDiPaEvehOj0R32gmy3kf3yBntuUa8GUyGr9wv1YLARStWZivLguuY8LmlDp+bGrR876hh7101iEjPr1QZh5rn4S8XKQi2U7j0P4i3/k5oCbXH6yNueB2xh16/IT1yhsvEE8b+7KjcZPV5uNYMNb+F5e7V87DnHgW3K0rwJvP3qp0L92fzsK9mHr3f/3o2tpcxYHBSEzu3boGYBLS5u6HRZwfqfbfRImu6J9bXh72RYgXLTP53clMpnqfOcv0YzfHd9bPgWMiAoGoO1IJMwAu1g0mmCjbeZ0An0hC6YQFYmvgIzk7HkWdsiEZPR7xwtUGNcDOtWpetaPAU4PIKE4RwWKly0ymOo0GISa4ihHUzwa/7E1SCTGGW0QiTpDvQiziCZUmVWJXXDSfXaOQYGaDRezfqdzvj2ZZ1qNn+N1pkjTp3IZpEHhAvWYwoNvvIlAHUvbi/UeDrZH1+lgP+u99jsZgN3cjDWJXfC4vz/bC4MAihWwyyDAxQT575hdART60sUb99Gz1zInpNeqh1EKBh9y6cW7QIxylq6hBcIfu3czZpRvDi1catqj+FTgYXRjExsLw8AsGuBKST8DpXVxLggMo1a1Bva0sHZ5M+AaPXpEef1djbo4HszxKIcBYreOqjcKVmyFtQqxU8tarmZ3JBBRpAcL0QfvMNUGNnhxYnJ1RaWv4QnmloiPVLlepcOcyEjJ9AtDg6oo7Px4E5czrlpluzzOf+4Y9LmNaz1uufUbQ9Wr7CNqonUEkVTeSjb52d6aB0Ei5S1zw6y9Bo5ixT7U8CGQxR2n8haE+LUIgjXO5AlJraF3IfoiJUVJYHczj9jWQEqSQ8kM3+2Z/MIRZLdJpANJPwwyT8hLo6Cf+AFaaktNxTXr7Gn8HwfJ9nP4Ph5TV7dmO4svLPwj/WvwFDHCIcFw5HsgAAAABJRU5ErkJggg==)}body[gcboldtheme] .gcb-toolbar-exit.gcb-disabled .gcb-toolbar-icon-exit{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAADJUlEQVR4AdWRz0/bdRjHu2pMjFcv3rx692BE40n/Aq/+B8bF7eDNuIvzTASFUoutgHRIoGuxpV2//Ul/fVvWLy0tpdC2dDiWuC1hyQIDXr4TIVoLwcuS7XnnSZ7nSV6vfpqv3fbS1/P6C5l30jfiieRe/jh3GN9JLmW/LL31v+HI+8Fk6mSThxxwzBFPecA68YPEWPbNS+HklfDXsaM4HWH7POKh8pgnHKjrRPeiH18iCI7luE+bqHqPB0qPjqYuYcpYGIe+z/32ix//VZY/lPvo10iTY4UoMXLskqCgLUz8+OfPLsDvvBs97LHLPWVXmk0a6p4mQ9M2BprVoUeut88VBBINeihIoD6dBVVJsEOFBLpTwe3y2gef/17s5B5dpUcdg5oQBZOotgjbdFmhhJSEno4PvsE/bCGYLQosC8tobnOHlHQbNOkoVYm6Epg4rg0IFtfbdIgITgtpEKeqOU+LrtKhrTRJE2JVQs/84Ad8tkOZsOAtWoqBn7uCKngka7OtbNGQdgE33taAIEyXHIY6RQ19AeGbUk5LsUQUi6zudQwWWeOXE++H/xEs08LCh0FeQJGKkmUKS1BNlwUChIkIX9fFwrM/3a8IPGtSp0lDKXKbMCZuClisUaUmPKircGVN1wLjzT7BXK3OKiUUKjSE+5VZMhRPFXrFKV7UdRbX1X7BaJ67FE5jYkkjBCm0lbVtUKeiyfwbv27rr/kPlk/0r1HIkSeLSZUos/wqIK+txCqmJuE4bg58hQW7N1MSlqJImZK6KEEGH7eQ4p9oc5qjr9kGa2bId1SWwGSOBYKaFrmNofayQpK4ktA0z4TDdn65b4RYpcRvJIkSIEYWP/p90kQwlIi0WeZwfnuuYPqVyckQFmGWyJJTAswIThCULKPENOkV3LpI4X7V8Z3vSCAhCggnJeB3DMEzSgZDW1xSL45vzlV47KOfTK0F8GLiIibBGe5s/vj9mSJJjB/+tF1UI68Pfzrumcp4HztJkkY4EzeH3xi5Mn5tWltaV+eTyY9sl5draGI/Idxx/ewixWV4fzmHRjbGvvj3ZezqSOsn4S9K/QVgkJZKAMFreAAAAABJRU5ErkJggg==)}.gcb-appStatus{position:fixed;top:0;left:0;box-sizing:border-box;font-family:Roboto,Helvetica Neue,Helvetica,Arial,sans-serif;width:100%;background:#2e69db;box-shadow:rgba(0,0,0,.172549) 0 3px 3px;min-height:40px;padding:11px 50px 9px;color:#fdfdfd;font-size:13px;font-style:normal;font-weight:400;text-align:left;z-index:99999999;display:none}body[gcboldtheme] .gcb-appStatus{font-family:Tahoma,sans-serif;font-size:9pt;padding:3px 12px;background:#e3b33b;color:#000;box-shadow:none;min-height:0;font-weight:400}.gcb-appStatus-link,.gcb-appStatus-link:active,.gcb-appStatus-link:hover{color:#F8A740;font-weight:500;text-decoration:underline}.gcb-appStatus-link:active,.gcb-appStatus-link:hover,body[gcboldtheme] .gcb-appStatus-link{color:inherit}.gcb-appStatus-close{position:absolute;top:11px;right:24px;width:16px;height:16px;cursor:pointer}body[gcboldtheme] .gcb-appStatus-close{top:1px;right:12px;margin-top:1px}.gcb-appStatus-close-icon{width:16px;height:16px;background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSczMicgaGVpZ2h0PSczMic+CjxwYXRoIHN0eWxlPSJmaWxsOiNmZGZkZmQ7IiBkPSJNMTIgMTJsLTQgNCA0IDQtMiAyLTQtNC00IDQtMi0yIDQtNC00LTQgMi0yIDQgNCA0LTR6IiAvPgo8L3N2Zz4=) 2px -8px no-repeat}._gcb_toast-title{font-weight:700}._gcb_toast-message{-ms-word-wrap:break-word;word-wrap:break-word}._gcb_toast-message a,._gcb_toast-message label{color:#FFF}._gcb_toast-message a:hover{color:#CCC;text-decoration:none}._gcb_toast-top-full-width{top:0;right:0;width:100%}._gcb_toast-bottom-full-width{bottom:0;right:0;width:100%}._gcb_toast-top-left{top:12px;left:12px}._gcb_toast-top-right{top:12px;right:12px}._gcb_toast-bottom-right{right:12px;bottom:12px}._gcb_toast-bottom-left{bottom:12px;left:12px}.gcb-smoke-base,.gcb-smokebg{position:fixed;top:0;left:0;bottom:0}#_gcb_toast-container{position:fixed;z-index:9999999999}#_gcb_toast-container>div{margin:0;padding:12px 4px 12px 54px;width:248px;min-height:32px;font-family:Roboto,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:13px;line-height:1.6667;text-align:left;background-position:16px center;background-repeat:no-repeat;background-size:24px}body[gcboldtheme] #_gcb_toast-container>div{margin:0 0 6px;padding:12px 56px 12px 12px;font-family:Tahoma,sans-serif;font-size:11pt;line-height:1.3;background-position:95% center;opacity:.9;background-size:auto}._gcb_toast{background-color:rgba(34,37,41,.88);color:#fff;border-top:1px solid #444A52}body[gcboldtheme] ._gcb_toast{background-color:#e3b33b;color:#000;border:0}#_gcb_toast-container>:hover{opacity:1;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter:alpha(opacity=100);cursor:pointer}._gcb_toast-info{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSczMicgaGVpZ2h0PSczMic+CjxwYXRoIHN0eWxlPSJmaWxsOiNGRkY7IiBkPSJNMTMuODEzIDIuMTg4YzcuNjI1IDAgMTMuODEzIDYuMTg4IDEzLjgxMyAxMy44MTNzLTYuMTg4IDEzLjgxMy0xMy44MTMgMTMuODEzLTEzLjgxMy02LjE4OC0xMy44MTMtMTMuODEzIDYuMTg4LTEzLjgxMyAxMy44MTMtMTMuODEzek0xNS44MTMgMjR2LTEwaC00djEwaDR6TTE1LjgxMyAxMnYtNGgtNHY0aDR6IiAvPgo8L3N2Zz4=)!important}body[gcboldtheme] ._gcb_toast-info{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAABZElEQVR4XqXVIW/CUBSG4SMQExVI5AQCiZzoD5jkByAmEMiJCSQJYgKBQExMIJAVCMQkEoFAIJAVFRUIxASC5P2WACyw3nZN+yBJ357cJueam5oMmLEkJGTFnKF8y0cP6hPJgR1DVS0bHWJlYM+bKuYmj0A5sFDNklRjrZwI1Ui83fU4MV26rhMh+jOFe3hez+ciB5Y3Z0FHTryfpuvJrf/74YjlxIExY77T/r0cpvoqiM9TgEgFcZBnaqqMljFI7/OllipMlIqpMZMTz9fPlBlYG0s5MVJfL/8GYiNUKhaJQIIRlQ2sygTYGfNSgY0xLBUITH6pQNvM2BUNcDztSEaFA8F5G1XZFwlwpG5n6qUGMiZkbFeqsEiOxwdPp3yDSXLlsZV3v5ND3fP1ePPzdYd9ci83iJQTe/num2GpHNiqYW6qMOCgDBwZy7MsqjFxRzgSULc85KnFlDXx5VbeENB238w/askRVPtMUy8AAAAASUVORK5CYII=)!important}._gcb_toast-refresh{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSczMicgaGVpZ2h0PSczMic+CjxwYXRoIHN0eWxlPSJmaWxsOiNGRkY7IiBkPSJNMTUuNzUgMjUuNjg4YzAuNjg4IDAgMS4zNzUtMC4xMjUgMi0wLjI1djQuMDYzYy0wLjYyNSAwLjEyNS0xLjMxMyAwLjE4OC0yIDAuMTg4LTcuNTYzIDAtMTMuNjI1LTYuMTI1LTEzLjYyNS0xMy42ODggMC0xLjc1IDAuMzEzLTMuNDM4IDAuOTM4LTVsLTMuMDYzLTEuNzUgOS43NS01LjV2MTEuMTI1bC0zLjE4OC0xLjgxM2MtMC4zMTMgMC45MzgtMC40MzggMS45MzgtMC40MzggMi45MzggMCA1LjMxMyA0LjMxMyA5LjY4OCA5LjYyNSA5LjY4OHpNMjUuNjI1IDE2LjA2M2MwLTUuMzEzLTQuNDM4LTkuNjI1LTkuNzUtOS42MjUtMC42ODggMC0yLjEyNSAwLjA2My0yLjEyNSAwLjE4OHYtNC4wNjNjMC0wLjEyNSAxLjQzOC0wLjEyNSAyLjEyNS0wLjEyNSA3LjU2MyAwIDEzLjc1IDYuMDYzIDEzLjc1IDEzLjYyNSAwIDEuNzUtMC4zNzUgMy40MzgtMSA1bDMuMDYzIDEuNzUtOS42ODggNS41NjMtMC4wNjMtMTEuMTg4IDMuMTg4IDEuODEzYzAuMzEzLTAuOTM4IDAuNS0xLjkzOCAwLjUtMi45Mzh6IiAvPgo8L3N2Zz4=)!important}body[gcboldtheme] ._gcb_toast-refresh{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAABuklEQVR4AeXVIXAaURSF4SMQiApEBCICUYFAVEREIiIiKhAIRMTKiAhEReTORFRURERURCAqEJUViAoEIgKBjEAgKhARCEQFM//pZFngzQKbje63du/MvW/vnqfDXKHNHT0G/OLRMR1XVIxLtBmxcgYrRo5cUj7aTJ2DqSMd4wo9F8APlyVX+ayQqzx7D0uW3sMTHeb0csqZOXbLdUmiQZtvzJzBQDsMvMXCty4rw2XH/HWAsTa48RYjn+gI18I++LM7vGVQ/kFHcMpvh6w1x07xnLcu3IcjJKrJbCy8UVcuV+iGh01Dki+cYqhC3KSf9nIhia9O0VFhPvEts2QrGW8/XlnvlJwYXcfJE+k/5po/6Z3cdLR+JHFuM3BThbnMy2Z31x0kmLjlkgrgyinukxQMI4vrt/eBJ6e41CsWDjDP5kF2/uDN9XtMMzF2nVNeD37+rtYYeosXGrnl8yD2Nn3Sd4AxZ4dvDEdB+YpzbfCwd4k8ZIPNrcygN9pxzJIuw73w/u6YO34yyWYRXYU4c01yiUcXwIIrHeOImXPR5/StNf3C1Aewolf4r+Ej3eRynzBlSN8xl4cD/x/iujwJe56aRwAAAABJRU5ErkJggg==)!important}._gcb_toast-back{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSczMicgaGVpZ2h0PSczMic+CjxwYXRoIHN0eWxlPSJmaWxsOiNGRkY7IiBkPSJNMTMuODEzIDI5LjgxM2MtNy42MjUgMC0xMy44MTMtNi4xODgtMTMuODEzLTEzLjgxM3M2LjE4OC0xMy44MTMgMTMuODEzLTEzLjgxM2M2Ljg3NSAwIDEyLjYyNSA1LjA2MyAxMy42MjUgMTEuNjg4djAuMTI1aC0xNWw1LjY4OC01LjY4OC0yLjg3NS0yLjgxMy0xMC41IDEwLjUgMTAuMjUgMTAuNTYzIDIuODEzLTIuODc1LTUuMzc1LTUuNjg4aDE1Yy0xIDYuNjg4LTYuNjg4IDExLjgxMy0xMy42MjUgMTEuODEzeiIgLz4KPC9zdmc+)!important}body[gcboldtheme] ._gcb_toast-back{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAB3klEQVR4XpWUIVMbcRBHT0RURERURCAiIpCIiIgIBB8AgUAgKvoBEBUViMwgEQgEIqICUXECgahAnECcQCAQCMSJiIiISMTNvNfODsOkx01y9yIz77e7/53bpB73OOeWnIKCR+64cJI0wy9OmVsDSy7sbdH5zkKVBTOOnThw4IRjLilUWfHDTlKPXVJVHjyoDR/xR5XMfp3e5ynaPEo24D6FUrj7qXroL5U/6gtlyrzSBWnoX5MG2OFeye2sPZ2yjOqNsMerOv1YHAuN2RvDSHl7H8Op8lBt82Mj3foIfiuzEJirBy30gGH00E3cUxYt9YBcPUw4V2Yt9YAz5SbhVjluqQdOlKdoxElLPXAQw1Oog3VdeSTb9PNbEqjGDtiJmU5tynQ94FEZVzp4aNIBO8oy4U45qmwgtZNshbHynHChXIbfMoJTJY1lUITdMoJMOfmnsFRGbSPsU1LGjeRSuQu3RQTXShqCPVbqfpsIhpSUDN8FfyrF5ntUic+Vq/V6mZJFtQYwU17s/v8khXJvb3v10Fef7/Iuc+WV0SadIXnok/rF5KrcMKxfHNeUG4+/Hc55UyXnjDHxkbHDmFOykEuutlwK+/yKkAohp9Hbdux6yA1PLFRZ8kzKSf0D/wVHqMGCZ7BVKgAAAABJRU5ErkJggg==)!important}._gcb_toast-forward{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSczMicgaGVpZ2h0PSczMic+CjxwYXRoIHN0eWxlPSJmaWxsOiNGRkYiIGQ9Ik0xMy42MjUgMjkuODEzYy02LjkzOCAwLTEyLjYyNS01LjEyNS0xMy42MjUtMTEuODEzaDE1LjA2M2wtNS40MzggNS42ODggMi44MTMgMi44NzUgMTAuMjUtMTAuNTYzLTEwLjUtMTAuNS0yLjgxMyAyLjgxMyA1LjY4OCA1LjY4OGgtMTVjMC0wLjA2My0wLjA2My0wLjA2My0wLjA2My0wLjEyNSAxLTYuNjI1IDYuNzUtMTEuNjg4IDEzLjYyNS0xMS42ODggNy42MjUgMCAxMy44MTMgNi4xODggMTMuODEzIDEzLjgxM3MtNi4xODggMTMuODEzLTEzLjgxMyAxMy44MTN6IiAvPgo8L3N2Zz4=)!important}body[gcboldtheme] ._gcb_toast-forward{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAB3klEQVR4AZ2UIVMbYRCGPxFREYGoiEBERCARiIgIREUlAoFAVPQHICoqEMwgEQgEIqICUXECgahAnIg4gUAgKhAnIiIiIhGZeZ4OO0wnJdebuzwxd7nZd9/99ttN1bjLObcUlJQ8cMeFo9QMP3jG1AqYc+FWqoevzFSZMebIkX37jjjiklKVBd/spGrskqky8VOl+B6/VMntVYX3eAybh6kG9ymV0p217BH+e+1DVaJcmb5zQRbhH1MD7HCvFHZWjk6ZR/ZGuMWzeva3ccw0am8Me8rLWxmeKZP/2s1Uye2+k/ipjOORqUbj6iUm/0owCA/d5K4yS0FLiUI9SJwbVtpLcKrcJG6Vo5TaSzhSHsNITFprCftRPKXaD0ufyWt/E30noUYP2I7XLzaEy1WBB2W4iQO2lXniTjnc5AwYKk+Ji7C0QRc4UbJoBuVG9yBXjl8f5spe23B7LFnGjuRSuWt9ka+jgLfpXqj77UbpNT+Dt1e/K2XNPlqXLZSr1T9yJbeTGsE4FuCqJ3uUyr1bDbKPlcX6Xt5hqjzX9SNqLyJ8VL2wC1VuGKTq79csa5e/Hc55UaXglCExZGwz5IQ8gpdcrdZenedHiKzBkoxBaoJdD7jhkZkqc57IOK4+4D9OXMJD/cQX6gAAAABJRU5ErkJggg==)!important}._gcb_toast-down{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSczMicgaGVpZ2h0PSczMic+CjxwYXRoIHN0eWxlPSJmaWxsOiNGRkY7IiBkPSJNMjcuNjI1IDE2YzAgNy42MjUtNi4xODggMTMuODEzLTEzLjgxMyAxMy44MTNzLTEzLjgxMy02LjE4OC0xMy44MTMtMTMuODEzYzAtNi44NzUgNS0xMi42MjUgMTEuNjI1LTEzLjYyNWgwLjE4OHYxNWwtNS42ODgtNS42ODgtMi44MTMgMi44NzUgMTAuNSAxMC41IDEwLjU2My0xMC4yNS0yLjg3NS0yLjg3NS01LjY4OCA1LjQzOHYtMTVjNi42ODggMSAxMS44MTMgNi42ODggMTEuODEzIDEzLjYyNXoiIC8+Cjwvc3ZnPg==)!important}body[gcboldtheme] ._gcb_toast-down{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAACBklEQVR4Xp2Vr1MbURRGV0RUREQgIhAREUgEIiICgUBWVCAQFfwBiIoKBDNIRAQCEVGBqIioQFQgIiIiEAgEArECERGBRGTmnA6XgZ19+4a2fPbud+7PeVvk5SYn/GJOSck1l5w6LP5NfvKYBzNiyamdv9g5YKHKgjF7Du3Zc8geI0pVHvlmq8jLNhNVZu5k4Vv8VmVqN2fvchNlfnm3wW1KpXSjkT3sd2mAXb+ymySaKg9JFUzCvpZmjI+nSbIWV8rcahYcKMvIngckssO9evy2OBaa9p4C0oEqT7604bEyS60pIBU/lXEEeFB3/hvQjxrahZvKIommgKyYq58LTpTxhwBHykXBL2XvIwCHyk0U4vBDgF40T6n26oeSAjKxkGrsgPXkKlt5gC0mTcC1MqhzA5ECwq6VnXVlWXCZXqFWiAoQdmuAgXJbcKqMai3MXhEVIOzWL5ZDZRLLoKw/LBWCAFR228mA959JS2Urj2CmzHJ2u6xYxRvJSLmMQAMRMrGHOI8GgtXhUd3OI/J2+s/56b/m+66UrjURebst5srZG68aVhOR2EOMlbsa1C6lcmWngRil2cP+2HyXN3hQ7qt95ESfediH+T/DXJUL+kU+fs6q8fgn5Z3wpMqcIwasv9w8Aw6ZhnnFWa2lbJ4fAUkU5kmjtrxs+5kLbliosuSWCfv5P/MfcYvCRyCSJeEAAAAASUVORK5CYII=)!important}._gcb_toast-up{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSczMicgaGVpZ2h0PSczMic+CjxwYXRoIHN0eWxlPSJmaWxsOiNGRkY7IiBkPSJNMjcuNjI1IDE2YzAgNi45MzgtNS4xMjUgMTIuNjI1LTExLjgxMyAxMy42MjV2LTE1bDUuNjg4IDUuNDM4IDIuODc1LTIuODc1LTEwLjU2My0xMC4yNS0xMC41IDEwLjUgMi44MTMgMi44NzUgNS42ODgtNS42ODh2MTVoLTAuMTg4Yy02LjYyNS0xLTExLjYyNS02Ljc1LTExLjYyNS0xMy42MjUgMC03LjYyNSA2LjE4OC0xMy44MTMgMTMuODEzLTEzLjgxM3MxMy44MTMgNi4xODggMTMuODEzIDEzLjgxM3oiIC8+Cjwvc3ZnPg==)!important}body[gcboldtheme] ._gcb_toast-up{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAB/0lEQVR4Xp3VIU8jURSG4REVKyoQiIqKigokAlExAsEPQCAQCAQ/ALFiBaIJsgKBQFSsQKyoQCBWICoqRlQgEAjEiIqKCmRFk/fdcEO4k+kNSzmyk+855+Y092bpcpdL7igoKZlyz8A8+1r5wz4zE8WCgVv/AThjrsqcIcfmduyYc8wVpSqv/LSRpcsmI1UmHiTxPf6qMraVird4VBYcfXrAfUqldGete4g/1z/Y4NxGrdFYmdWmYBTi22vxkTKqEQ0elKICc6Ys3EnFNUFs8aL2PxbHXDlKx9MEe8ry/Rj2lUk6/gnxRxkGgJl6kIozYapMmawTdJWlzcxdZZ6O22SsjG0miUI9zLhUhlUgxrOMAGRZJCLAhXKbcaccV4EYj0AkImCuPIZBzKtAjEcgEhGwEw5PqXaqQIxHIBL1WcMOaFeBGI9AJNaBqdLLUhWBZNFWFhn3ytG3gJ7ylDFQrr4FnIe1mivlhkDET96khbK3KWCLFatwR3Kl3G8KcPPxv3SLV3V/E4DuW3+675q/lNLtrwI2KJTr6g+hk42vAQyVZ5tVs0WpPNQfDk/te1rrPlRe1+/lHWbKS3of8ewUIZ6nF1Oocks3vThuWKUu/+p4lyxVKbigRzt0bdPjnHEIr7iunj3d5zdLE8WKUWK2VNn0kFsemauy4IkRJ+mX+R+bCsJKUF4+aAAAAABJRU5ErkJggg==)!important}._gcb_toast-warning{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSczMicgaGVpZ2h0PSczMic+CjxwYXRoIHN0eWxlPSJmaWxsOiNGOEE3NDA7IiBkPSJNMzAuMjUgMjguMjVjMC41NjMgMC45MzggMC4xMjUgMS43NS0xIDEuNzVoLTI4Yy0xLjEyNSAwLTEuNTYzLTAuODEzLTEtMS43NWwxNC0yNC41YzAuNTYzLTAuOTM4IDEuNDM4LTAuOTM4IDIgMHpNMTcuMjUgMjZ2LTRoLTR2NGg0ek0xNy4yNSAxN3YtNWgtNHY1bDAuNSAzaDN6IiAvPgo8L3N2Zz4=)!important}body[gcboldtheme] ._gcb_toast-warning{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAA0UlEQVR4AbXRoQ3CUBSF4SsqKhgB0TEQFQyCYJQmjIJAIBmiorIjIBih7h4S8kTzm5O+hv/6I+4Xf09N1KdDjjnnMWrLmyTlPepSl4t+5SlqyodKOQbzqdeqvASy5aRV+VYbW9JVbNjG9xHKxXOCj3lO8klRTuT0fBwgp+fjADk9HwfI6fgwQE7DhwHDCT4zAE7y2QFyks8MkJN8doCc5PORk3w+cpIPDeUQOMHnfgBO8pkBcpKPdeXWkZN8NnLma9fAHPncNTCFGvU6V18b2nlfXKD+sl/iY0QAAAAASUVORK5CYII=)!important}#_gcb_toast-container._gcb_toast-bottom-full-width>div,#_gcb_toast-container._gcb_toast-top-full-width>div{width:96%;margin:1px auto}@media all and (max-width:350px){#_gcb_toast-container{width:98%;right:1%}#_gcb_toast-container>div{width:auto}}.gcb-smoke-base{right:0;visibility:hidden;opacity:0}body[gcboldtheme] .gcb-smoke-base{background:rgba(0,0,0,.3)}.gcb-smoke-base.gcb-smoke-visible{opacity:1;visibility:visible}.gcb-smokebg{right:0;background-color:#222529;opacity:.8;transition:opacity .15s linear}body[gcboldtheme] .gcb-smokebg{background:0 0;opacity:1;transition:none}.gcb-smoke-base .gcb-dialog{position:relative;width:auto;margin:10px;padding:32px 32px 40px;box-sizing:border-box}body[gcboldtheme] .gcb-smoke-base .gcb-dialog{position:absolute;top:25%;left:50%;width:40%;margin-left:-20%;padding:0}.gcb-smoke-base .gcb-dialog-inner{padding:0 16px;color:#444a52;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}body[gcboldtheme] .gcb-smoke-base .gcb-dialog-inner{padding:10px;color:#202020}.gcb-dialog-title{min-height:16px;margin:0 0 12px;line-height:1.66666667;font-size:24px;font-weight:300}body[gcboldtheme] .gcb-dialog-title{display:block;background:#e3b33b;color:#fff;width:100%;height:1.33em;margin:-10px -10px 10px;font-weight:700;padding:4px 10px;box-sizing:content-box;min-height:0;line-height:inherit;font-size:9pt}.gcb-dialog-buttons:after,.gcb-dialog-buttons:before{display:table;content:" "}.gcb-dialog-prompt{margin-top:15px}.gcb-dialog-buttons{margin:24px 0 0;text-align:right}body[gcboldtheme] .gcb-dialog-buttons{margin:20px 0 0}.gcb-dialog-buttons:after{clear:both}.gcb-smoke{font-family:Roboto,Roboto,Helvetica,sans-serif;font-size:9pt;line-height:1.66666667;text-align:left;background-color:#fdfdfd;box-shadow:0 0 2px 0 rgba(34,37,41,.24)}body[gcboldtheme] .gcb-smoke{font-family:Tahoma,sans-serif;line-height:1.3;background-color:rgba(255,255,255,.95);box-shadow:0 2px 8px #666}.gcb-dialog-prompt input{margin:0;outline:0;font-family:Menlo,"Andale Mono",monospace;border:1px solid #aaa;width:100%;display:inline-block;background-color:transparent;font-size:16px}.gcb-dialog-buttons button{display:inline-block;padding:5px 24px;margin-bottom:0;font-size:12px;font-weight:700;line-height:1.66666667;text-align:center;white-space:nowrap;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;border:1px solid #dae1e8;border-radius:2px;color:#444a52;background:#f3f7fa;background:linear-gradient(to bottom,#f3f7fa,#edf1f5);background:-o-linear-gradient(bottom,#f3f7fa,#edf1f5);float:left}body[gcboldtheme] .gcb-dialog-buttons button{vertical-align:baseline;font-family:Tahoma,sans-serif;text-decoration:none;border-radius:3px;color:#4A5965;border:1px solid #cacaca;font-size:9pt;font-weight:700;line-height:1;margin:0 3px;min-width:75px;padding:4px 8px;background-color:#f4f4f4;background-image:linear-gradient(to bottom,#f4f4f4,#edefef);background-clip:padding-box;float:none}.gcb-dialog-buttons button+button{float:right;color:#fdfdfd;background:#5081e1;background:linear-gradient(to bottom,#5081e1,#4375d6);background:-o-linear-gradient(bottom,#5081e1,#4375d6);border-color:#2e69db}body[gcboldtheme] .gcb-dialog-buttons button+button{float:none;background-color:#f4f4f4;background-image:linear-gradient(to bottom,#f4f4f4,#edefef);border:1px solid #cacaca;color:#4A5965}.gcb-dialog-buttons button+button:hover{color:#fdfdfd;box-shadow:0 0 2px 2px #75a8ff}.gcb-dialog-buttons button+button:active{color:#fdfdfd;background:#3b65b5;background:linear-gradient(to bottom,#3b65b5,#4871bf);background:-o-linear-gradient(bottom,#3b65b5,#4871bf);border-color:#2c60bf}.gcb-dialog-buttons button:hover{color:#444a52;box-shadow:0 0 2px 2px #dae1e8}body[gcboldtheme] .gcb-dialog-buttons button:hover{background-color:#fff;background-image:linear-gradient(to bottom,#fff,#f7f7f7);background-clip:padding-box;box-shadow:none}.gcb-dialog-buttons button:active{color:#444a52;background:#dadde0;background:linear-gradient(to bottom,#dadde0,#e9edf0);background:-o-linear-gradient(bottom,#dadde0,#e9edf0);border-color:#ced5d8}body[gcboldtheme] .gcb-dialog-buttons button:active{background-color:#eaeaea;background-image:linear-gradient(to bottom,#eaeaea,#fff);background-clip:padding-box}@media (min-width:768px){.gcb-smoke-base .gcb-dialog{margin:30px auto;width:600px}body[gcboldtheme] .gcb-smoke-base .gcb-dialog{margin:0 0 0 -300px;width:600px}}@media (min-width:400px) and (max-width:700px){body[gcboldtheme] .gcb-smoke-base .gcb-dialog{width:80%;margin:0 0 0 -40%}}@media (max-width:400px){body[gcboldtheme] .gcb-smoke-base .gcb-dialog{width:90%;margin:0 0 0 -45%}}.gcb-tooltip{position:absolute;z-index:7426170;display:block;visibility:visible;font-size:11px;line-height:1.6667;font-family:Roboto,Helvetica Neue,Helvetica,Arial,sans-serif,sans-serif}body[gcboldtheme] .gcb-tooltip{line-height:1.4;font-family:Tahoma,sans-serif}.gcb-tooltip.gcb-top{margin-top:-3px;padding:5px 0}.gcb-tooltip.gcb-right{margin-left:3px;padding:0 5px}.gcb-tooltip.gcb-bottom{margin-top:3px;padding:5px 0}.gcb-tooltip.gcb-left{margin-left:-3px;padding:0 5px}.gcb-tooltip-inner{max-width:240px;padding:14px 24px;color:#fdfdfd;text-align:center;text-decoration:none;background-color:#2E69DB;border-radius:2px;box-shadow:rgba(34,37,41,.239216) 0 0 2px;opacity:.9}body[gcboldtheme] .gcb-tooltip-inner{padding:8px;color:#222;background-color:#e3b33b;border-radius:4px;box-shadow:none;opacity:1}.gcb-tooltip-arrow{position:absolute;width:0;height:0;border-color:transparent;border-style:solid;opacity:.9}body[gcboldtheme] .gcb-tooltip-arrow{opacity:1}.gcb-tooltip.gcb-top .gcb-tooltip-arrow{bottom:0;left:50%;margin-left:-5px;border-width:5px 5px 0;border-top-color:#2E69DB}body[gcboldtheme] .gcb-tooltip.gcb-top .gcb-tooltip-arrow{border-top-color:#e3b33b}.gcb-tooltip.gcb-right .gcb-tooltip-arrow{top:50%;left:0;margin-top:-5px;border-width:5px 5px 5px 0;border-right-color:#2E69DB}body[gcboldtheme] .gcb-tooltip.gcb-right .gcb-tooltip-arrow{border-right-color:#e3b33b}.gcb-tooltip.gcb-left .gcb-tooltip-arrow{top:50%;right:0;margin-top:-5px;border-width:5px 0 5px 5px;border-left-color:#2E69DB}body[gcboldtheme] .gcb-tooltip.gcb-left .gcb-tooltip-arrow{border-left-color:#e3b33b}.gcb-tooltip.gcb-bottom .gcb-tooltip-arrow{top:0;left:50%;margin-bottom:-5px;border-width:0 5px 5px;border-bottom-color:#2E69DB}body[gcboldtheme] .gcb-tooltip.gcb-bottom .gcb-tooltip-arrow{margin-left:-5px;margin-bottom:0;border-bottom-color:#e3b33b}.gcb-fade{opacity:0;-webkit-transition:opacity .15s linear;-moz-transition:opacity .15s linear;-o-transition:opacity .15s linear;transition:opacity .15s linear}.gcb-fade.gcb-in{opacity:1}',b=document.getElementsByTagName("head")[0],c=document.createElement("style");if(c.setAttribute("data-gcb-service-node",!0),b.insertBefore(c,b.firstChild),c.styleSheet)c.styleSheet.disabled||(c.styleSheet.cssText=a);else try{c.innerHTML=a}catch(b){c.innerText=a}}(),define("masterCss",function(){}),require(["jquery","integration/initialization","masterCss"],function(a,b){"use strict";var c,d,e=a("script[data-gcb-url]");d=a("script[data-cfg-var]").data("cfgVar")||(window._gcb?"_gcb":"_genesys"),c=a("script[data-gwc-var]"),c.length&&c.data("gwcVar")||e.attr("data-gwc-var",d+".chat"),a(document).ready(function(){var a=e.data("gcbUrl");b.initialize(d,a+"/cometd")})}),define("integration/integrationApp",function(){}),require({map:{"*":{lodash:"underscore","chat/common/umd/cookie":"chat/cookieWrapper","simply-deferred":"jquery",URIjs:"URI"},"integration/initialization":{notificationAgentModule:"dummy","tracker/trackerApplicationModule":"dummy"}}},["integration/integrationApp"],function(){}),define("integration/build/integrationConfigNoTracker.js",function(){})}).call({});